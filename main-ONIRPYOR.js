import{a as K,c as W,d as $,e as q,f as J,g as X,h as Z,i as G,j as Y,k as V,l as ee,m as te,n as ne,o as oe}from"./chunk-2YUYKPUY.js";import{$ as m,$a as d,Ga as x,Ha as s,Ja as y,Ma as i,Na as a,Oa as l,Pa as M,Qa as c,Ra as P,Sa as O,Ta as w,Ua as j,Va as z,Wa as L,X as A,Xa as B,Ya as g,Za as S,ab as D,bb as H,c as R,ga as U,ha as u,ia as f,ma as C,nb as Q,wa as h,ya as p}from"./chunk-WRFWHMDT.js";var pe=["*"],I=class n{clicked=new C;onClick(o){this.clicked.emit(o)}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=m({type:n,selectors:[["app-button"]],outputs:{clicked:"clicked"},standalone:!0,features:[d],ngContentSelectors:pe,decls:2,vars:0,consts:[[1,"button",3,"click"]],template:function(e,t){e&1&&(O(),i(0,"button",0),c("click",function(v){return t.onClick(v)}),w(1),a())},styles:[".button[_ngcontent-%COMP%]{background-color:#133167;color:#fff;border:none;padding:6px 12px;border-radius:4px;transition:background-color .3s ease;cursor:pointer}.button[_ngcontent-%COMP%]:hover{background-color:#0f254e}"]})};var se=["dialogRef"],le=["*"],ce=()=>({width:"16px",height:"16px"}),k=class n{open;title;closed=new C;dialogRef;ngOnChanges(){this.dialogRef&&(this.open?this.dialogRef.nativeElement.showModal():this.dialogRef.nativeElement.close())}onClose(){this.closed.emit()}close(){this.dialogRef.nativeElement.close()}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=m({type:n,selectors:[["app-dialog"]],viewQuery:function(e,t){if(e&1&&z(se,5),e&2){let r;L(r=B())&&(t.dialogRef=r.first)}},inputs:{open:"open",title:"title"},outputs:{closed:"closed"},standalone:!0,features:[U,d],ngContentSelectors:le,decls:9,vars:3,consts:[["dialogRef",""],[1,"dialog",3,"close"],[1,"dialog-header"],[1,"close-button",3,"click"],["src","assets/svg/close.svg",3,"svgStyle"]],template:function(e,t){if(e&1){let r=M();O(),i(0,"dialog",1,0),c("close",function(){return u(r),f(t.onClose())}),i(2,"header",2)(3,"h2"),g(4),a(),i(5,"button",3),c("click",function(){return u(r),f(t.close())}),l(6,"svg-icon",4),a()(),i(7,"section"),w(8),a()()}e&2&&(p(4),S(t.title),p(2),s("svgStyle",D(2,ce)))},dependencies:[V],styles:[".dialog[_ngcontent-%COMP%]{border:none;border-radius:8px;box-shadow:0 4px 6px #0000001a;padding:16px;max-width:900px}.dialog[_ngcontent-%COMP%]   .dialog-header[_ngcontent-%COMP%]{display:flex;margin-bottom:16px}.dialog[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{flex:1;text-align:center;margin:0;font-size:16px}.dialog[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{all:unset;cursor:pointer}"]})};var me=n=>({hidden:n}),de=()=>({width:"18px",height:"18px",color:"white"});function ge(n,o){n&1&&l(0,"div",1)}var E=class n{label;imageUrl;vote=new C;showDialog=!1;isImageLoaded=!1;onVote(o){o.stopPropagation(),this.vote.emit()}onImageLoad(){this.isImageLoaded=!0}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=m({type:n,selectors:[["app-voting-card"]],inputs:{label:"label",imageUrl:"imageUrl"},outputs:{vote:"vote"},standalone:!0,features:[d],decls:11,vars:12,consts:[[1,"vote-card"],[1,"skeleton-loader"],[1,"vote-card-image",3,"load","ngClass","src","alt"],[1,"vote-card-label"],[3,"clicked"],[1,"dialog-button",3,"click"],["src","assets/svg/maximize.svg",3,"svgStyle"],[3,"closed","open","title"],["alt","Cat Image",1,"dialog-image",3,"src"]],template:function(e,t){e&1&&(i(0,"div",0),x(1,ge,1,0,"div",1),i(2,"img",2),c("load",function(){return t.onImageLoad()}),a(),i(3,"span",3),g(4),a(),i(5,"app-button",4),c("clicked",function(v){return t.onVote(v)}),g(6,"Vote"),a(),i(7,"button",5),c("click",function(){return t.showDialog=!0}),l(8,"svg-icon",6),a()(),i(9,"app-dialog",7),c("closed",function(){return t.showDialog=!1}),l(10,"img",8),a()),e&2&&(p(),y(t.isImageLoaded?-1:1),p(),j("alt",t.label),s("ngClass",H(9,me,!t.isImageLoaded))("src",t.imageUrl,h),p(2),S(t.label),p(4),s("svgStyle",D(11,de)),p(),s("open",t.showDialog)("title",t.label),p(),s("src",t.imageUrl,h))},dependencies:[K,I,k,V],styles:[".vote-card[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:12px;position:relative}.vote-card[_ngcontent-%COMP%]   .vote-card-image[_ngcontent-%COMP%]{width:200px;aspect-ratio:1;object-fit:cover;border-radius:8px;border:1px solid #133167;padding:4px}.vote-card[_ngcontent-%COMP%]   .vote-card-image.hidden[_ngcontent-%COMP%]{display:none}.vote-card[_ngcontent-%COMP%]   .skeleton-loader[_ngcontent-%COMP%]{width:200px;aspect-ratio:1;border-radius:8px;background-color:#f7f7f7;animation:_ngcontent-%COMP%_pulse 1.5s infinite}@keyframes _ngcontent-%COMP%_pulse{0%{opacity:1}50%{opacity:.5}to{opacity:1}}.vote-card[_ngcontent-%COMP%]   .vote-card-label[_ngcontent-%COMP%]{font-size:14px;font-weight:700;color:#0f254e}.vote-card[_ngcontent-%COMP%]   .dialog-button[_ngcontent-%COMP%]{all:unset;cursor:pointer;position:absolute;top:16px;right:16px}.dialog-image[_ngcontent-%COMP%]{display:block;margin:0 auto 16px;max-height:400px;border-radius:8px}"]})};function ue(n,o){if(n&1){let e=M();i(0,"app-voting-card",3),c("vote",function(){u(e);let r=P();return f(r.onVote({winner:r.cat1,loser:r.cat2}))}),a(),i(1,"app-voting-card",3),c("vote",function(){u(e);let r=P();return f(r.onVote({winner:r.cat2,loser:r.cat1}))}),a(),l(2,"app-bottom-nav",4)}if(n&2){let e=P();s("imageUrl",e.cat1.imageUrl)("label",e.cat1.id),p(),s("imageUrl",e.cat2.imageUrl)("label",e.cat2.id),p(),s("item",e.navItem)}}var N=class n{catService=A(te);cat1;cat2;loading=!1;error=null;navItem={route:"/ranking",label:"Voir le classement"};ngOnInit(){this.loadNewOpponents()}loadNewOpponents(){this.loading=!0,this.error=null,this.catService.selectCatOpponents$().subscribe({next:([o,e])=>{this.cat1=o,this.cat2=e,this.navItem.info=`${this.catService.getPlayedMatches()} parties jou\xE9es`},error:o=>{this.loading=!1,o instanceof Error?this.error=o.message:this.error="An unexpected error occurred. Please try again later."},complete:()=>{this.loading=!1}})}onVote(o){return R(this,null,function*(){try{yield this.catService.recordVote(o),this.loadNewOpponents()}catch(e){e instanceof Error&&(this.error=e.message)}})}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=m({type:n,selectors:[["app-voting-page"]],standalone:!0,features:[d],decls:4,vars:3,consts:[[3,"loading","error"],[1,"page-container"],[1,"page-content","content"],[3,"vote","imageUrl","label"],[3,"item"]],template:function(e,t){e&1&&(i(0,"app-state-wrapper",0)(1,"section",1)(2,"div",2),x(3,ue,3,5),a()()()),e&2&&(s("loading",t.loading)("error",t.error),p(3),y(!t.loading&&t.cat1&&t.cat2?3:-1))},dependencies:[E,ne,oe],styles:[".content[_ngcontent-%COMP%]{display:flex}.content[_ngcontent-%COMP%]   app-voting-card[_ngcontent-%COMP%]{flex:1;display:flex;justify-content:center;align-items:center}.content[_ngcontent-%COMP%]   app-voting-card[_ngcontent-%COMP%]:first-child{border-right:1px dashed #133167}"]})};var ie=[{path:"",pathMatch:"full",redirectTo:"voting"},{path:"voting",component:N},{path:"ranking",loadComponent:()=>import("./chunk-63ZL33PD.js").then(n=>n.RankingPageComponent)},{path:"**",loadComponent:()=>import("./chunk-WPTYCRN4.js").then(n=>n.NotFoundPageComponent)}];var ae={production:!0,firebase:{apiKey:"AIzaSyDc1PksS7zr0DX9xMmdJpCKSK6uxnfWOrc",authDomain:"catmash-37c0c.firebaseapp.com",projectId:"catmash-37c0c",storageBucket:"catmash-37c0c.firebasestorage.app",messagingSenderId:"457408874219",appId:"1:457408874219:web:2964f6270a8980d153e0ae"}};var re={providers:[Q({eventCoalescing:!0}),J(ie),W(),X(()=>Z(ae.firebase)),G(()=>Y()),ee()]};var F=class n{brandLogo="assets/img/cat_brand.png";static \u0275fac=function(e){return new(e||n)};static \u0275cmp=m({type:n,selectors:[["app-header"]],standalone:!0,features:[d],decls:5,vars:1,consts:[[1,"header"],[1,"header-brand"],["alt","CatMash Logo",1,"header-logo",3,"src"],[1,"header-title"]],template:function(e,t){e&1&&(i(0,"header",0)(1,"div",1),l(2,"img",2),i(3,"span",3),g(4,"CATMASH"),a()()()),e&2&&(p(2),s("src",t.brandLogo,h))},styles:[".header[_ngcontent-%COMP%]{height:70px;display:flex;justify-content:center;align-items:center}.header[_ngcontent-%COMP%]   .header-brand[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:4px;font-size:12px;font-weight:700}.header[_ngcontent-%COMP%]   .header-brand[_ngcontent-%COMP%]   .header-logo[_ngcontent-%COMP%]{width:40px}"]})};var T=class n{static \u0275fac=function(e){return new(e||n)};static \u0275cmp=m({type:n,selectors:[["app-root"]],standalone:!0,features:[d],decls:4,vars:0,consts:[[1,"app-root"],[1,"app-container"]],template:function(e,t){e&1&&(i(0,"div",0),l(1,"app-header"),i(2,"div",1),l(3,"router-outlet"),a()())},dependencies:[F,q],styles:[".app-root[_ngcontent-%COMP%]{min-height:100vh;display:flex;flex-direction:column}.app-root[_ngcontent-%COMP%]   .app-header[_ngcontent-%COMP%]{height:70px}.app-root[_ngcontent-%COMP%]   .app-container[_ngcontent-%COMP%]{min-height:calc(100vh - 70px)}"]})};$(T,re).catch(n=>console.error(n));
