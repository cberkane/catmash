import{$ as ut,$a as ft,A as Ls,Aa as Jf,B as bt,Ba as Yn,C as Ke,Ca as Ac,D as pn,Da as Xf,E as fc,Ea as Zf,F as Gn,Fa as ep,G as jf,Ga as tp,H as Wt,Ha as np,I as nt,Ia as rp,J as pc,Ja as ip,K as zf,L as gc,M as qf,Ma as dt,N as mc,Na as St,O as Qe,Oa as Ht,P as Gf,Q as ge,Qa as Dc,R as fe,Ra as sp,S as q,Sa as $s,T as Wf,Ta as js,U as se,V as yc,W as Q,X as x,Y as Ye,Ya as Jn,Z as vc,Za as ri,_ as ni,a as V,aa as Vs,ab as op,b as _e,ba as Hf,c as D,ca as rt,d as Ff,da as Kf,e as sc,ea as Wn,f as qt,fa as it,g as oc,ga as _c,gb as ii,h as ac,hb as ap,i as fn,ib as zs,j as Ge,ja as wc,jb as bc,k as Lf,ka as gn,kb as Sc,l as Vf,la as Us,lb as qs,m as Gt,ma as mn,mb as Cc,n as cc,na as Fe,o as uc,oa as Ec,ob as si,p as lc,pa as lt,pb as Rc,q as Le,qa as Hn,qb as cp,r as $,ra as Qf,rb as Ct,s as We,sa as Ic,t as Uf,ta as Yf,u as Bf,ua as ht,v as W,va as Tc,w as hc,x as He,xa as Kn,y as $f,ya as Qn,z as dc,za as Bs}from"./chunk-WRFWHMDT.js";var fp=null;function Xn(){return fp}function pp(n){fp??=n}var Gs=class{};var Pe=new se(""),gp=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:()=>x(Xv),providedIn:"platform"})}}return n})();var Xv=(()=>{class n extends gp{constructor(){super(),this._doc=x(Pe),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Xn().getBaseHref(this._doc)}onPopState(t){let r=Xn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=Xn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:()=>new n,providedIn:"platform"})}}return n})();function mp(n,e){if(n.length==0)return e;if(e.length==0)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,t==2?n+e.substring(1):t==1?n+e:n+"/"+e}function up(n){let e=n.match(/#|\?|$/),t=e&&e.index||n.length,r=t-(n[t-1]==="/"?1:0);return n.slice(0,r)+n.slice(t)}function yn(n){return n&&n[0]!=="?"?"?"+n:n}var Ks=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:()=>x(yp),providedIn:"root"})}}return n})(),Zv=new se(""),yp=(()=>{class n extends Ks{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??x(Pe).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return mp(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+yn(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,s){let a=this.prepareExternalUrl(i+yn(s));this._platformLocation.pushState(t,r,a)}replaceState(t,r,i,s){let a=this.prepareExternalUrl(i+yn(s));this._platformLocation.replaceState(t,r,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(Q(gp),Q(Zv,8))}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var oi=(()=>{class n{constructor(t){this._subject=new mn,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=n_(up(lp(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+yn(r))}normalize(t){return n.stripTrailingSlash(t_(this._basePath,lp(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+yn(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+yn(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}static{this.normalizeQueryParams=yn}static{this.joinWithSlash=mp}static{this.stripTrailingSlash=up}static{this.\u0275fac=function(r){return new(r||n)(Q(Ks))}}static{this.\u0275prov=q({token:n,factory:()=>e_(),providedIn:"root"})}}return n})();function e_(){return new oi(Q(Ks))}function t_(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function lp(n){return n.replace(/\/index.html$/,"")}function n_(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}function Qs(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,s]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}var Pc=/\s+/,hp=[],Sb=(()=>{class n{constructor(t,r){this._ngEl=t,this._renderer=r,this.initialClasses=hp,this.stateMap=new Map}set klass(t){this.initialClasses=t!=null?t.trim().split(Pc):hp}set ngClass(t){this.rawClass=typeof t=="string"?t.trim().split(Pc):t}ngDoCheck(){for(let r of this.initialClasses)this._updateState(r,!0);let t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(let r of t)this._updateState(r,!0);else if(t!=null)for(let r of Object.keys(t))this._updateState(r,!!t[r]);this._applyStateDiff()}_updateState(t,r){let i=this.stateMap.get(t);i!==void 0?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(t,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(let t of this.stateMap){let r=t[0],i=t[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(t,r){t=t.trim(),t.length>0&&t.split(Pc).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static{this.\u0275fac=function(r){return new(r||n)(Bs(Hn),Bs(Yn))}}static{this.\u0275dir=Vs({type:n,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"},standalone:!0})}}return n})();function r_(n,e){return new fe(2100,!1)}var Cb=(()=>{class n{transform(t,r,i){if(t==null)return null;if(!this.supports(t))throw r_(n,t);return t.slice(r,i)}supports(t){return typeof t=="string"||Array.isArray(t)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275pipe=Hf({name:"slice",type:n,pure:!1,standalone:!0})}}return n})();var vp="browser",i_="server";function Ys(n){return n===i_}var Zn=class{};var ci=class{},Xs=class{},Rt=class n{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(t=>{let r=t.indexOf(":");if(r>0){let i=t.slice(0,r),s=i.toLowerCase(),a=t.slice(r+1).trim();this.maybeSetNormalizedName(i,s),this.headers.has(s)?this.headers.get(s).push(a):this.headers.set(s,[a])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,r)=>{this.setHeaderEntries(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){let t=new n;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){let t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,t);let i=(e.op==="a"?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":let s=e.value;if(!s)this.headers.delete(t),this.normalizedNames.delete(t);else{let a=this.headers.get(t);if(!a)return;a=a.filter(c=>s.indexOf(c)===-1),a.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,a)}break}}setHeaderEntries(e,t){let r=(Array.isArray(t)?t:[t]).map(s=>s.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}};var Oc=class{encodeKey(e){return _p(e)}encodeValue(e){return _p(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function o_(n,e){let t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{let s=i.indexOf("="),[a,c]=s==-1?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,s)),e.decodeValue(i.slice(s+1))],u=t.get(a)||[];u.push(c),t.set(a,u)}),t}var a_=/%(\d[a-f0-9])/gi,c_={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function _p(n){return encodeURIComponent(n).replace(a_,(e,t)=>c_[t]??e)}function Js(n){return`${n}`}var Qt=class n{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new Oc,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=o_(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{let r=e.fromObject[t],i=Array.isArray(r)?r.map(Js):[Js(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){let t=[];return Object.keys(e).forEach(r=>{let i=e[r];Array.isArray(i)?i.forEach(s=>{t.push({param:r,value:s,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let t=new n({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let t=(e.op==="a"?this.map.get(e.param):void 0)||[];t.push(Js(e.value)),this.map.set(e.param,t);break;case"d":if(e.value!==void 0){let r=this.map.get(e.param)||[],i=r.indexOf(Js(e.value));i!==-1&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var kc=class{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function u_(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function wp(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function Ep(n){return typeof Blob<"u"&&n instanceof Blob}function Ip(n){return typeof FormData<"u"&&n instanceof FormData}function l_(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}var ai=class n{constructor(e,t,r,i){this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase();let s;if(u_(this.method)||i?(this.body=r!==void 0?r:null,s=i):s=r,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params),this.transferCache=s.transferCache),this.headers??=new Rt,this.context??=new kc,!this.params)this.params=new Qt,this.urlWithParams=t;else{let a=this.params.toString();if(a.length===0)this.urlWithParams=t;else{let c=t.indexOf("?"),u=c===-1?"?":c<t.length-1?"&":"";this.urlWithParams=t+u+a}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||wp(this.body)||Ep(this.body)||Ip(this.body)||l_(this.body)?this.body:this.body instanceof Qt?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||Ip(this.body)?null:Ep(this.body)?this.body.type||null:wp(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof Qt?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(e={}){let t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,s=e.transferCache??this.transferCache,a=e.body!==void 0?e.body:this.body,c=e.withCredentials??this.withCredentials,u=e.reportProgress??this.reportProgress,d=e.headers||this.headers,p=e.params||this.params,m=e.context??this.context;return e.setHeaders!==void 0&&(d=Object.keys(e.setHeaders).reduce((w,b)=>w.set(b,e.setHeaders[b]),d)),e.setParams&&(p=Object.keys(e.setParams).reduce((w,b)=>w.set(b,e.setParams[b]),p)),new n(t,r,a,{params:p,headers:d,context:m,reportProgress:u,responseType:i,withCredentials:c,transferCache:s})}},Yt=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(Yt||{}),ui=class{constructor(e,t=200,r="OK"){this.headers=e.headers||new Rt,this.status=e.status!==void 0?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}},Zs=class n extends ui{constructor(e={}){super(e),this.type=Yt.ResponseHeader}clone(e={}){return new n({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},li=class n extends ui{constructor(e={}){super(e),this.type=Yt.Response,this.body=e.body!==void 0?e.body:null}clone(e={}){return new n({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},Kt=class extends ui{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},bp=200,h_=204;function Nc(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,transferCache:n.transferCache}}var hi=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let s;if(t instanceof ai)s=t;else{let u;i.headers instanceof Rt?u=i.headers:u=new Rt(i.headers);let d;i.params&&(i.params instanceof Qt?d=i.params:d=new Qt({fromObject:i.params})),s=new ai(t,r,i.body!==void 0?i.body:null,{headers:u,context:i.context,params:d,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials,transferCache:i.transferCache})}let a=$(s).pipe(pn(u=>this.handler.handle(u)));if(t instanceof ai||i.observe==="events")return a;let c=a.pipe(bt(u=>u instanceof li));switch(i.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return c.pipe(W(u=>{if(u.body!==null&&!(u.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return u.body}));case"blob":return c.pipe(W(u=>{if(u.body!==null&&!(u.body instanceof Blob))throw new Error("Response is not a Blob.");return u.body}));case"text":return c.pipe(W(u=>{if(u.body!==null&&typeof u.body!="string")throw new Error("Response is not a string.");return u.body}));case"json":default:return c.pipe(W(u=>u.body))}case"response":return c;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:new Qt().append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,Nc(i,r))}post(t,r,i={}){return this.request("POST",t,Nc(i,r))}put(t,r,i={}){return this.request("PUT",t,Nc(i,r))}static{this.\u0275fac=function(r){return new(r||n)(Q(ci))}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac})}}return n})(),d_=/^\)\]\}',?\n/,f_="X-Request-URL";function Tp(n){if(n.url)return n.url;let e=f_.toLocaleLowerCase();return n.headers.get(e)}var p_=(()=>{class n{constructor(){this.fetchImpl=x(Mc,{optional:!0})?.fetch??((...t)=>globalThis.fetch(...t)),this.ngZone=x(Fe)}handle(t){return new qt(r=>{let i=new AbortController;return this.doRequest(t,i.signal,r).then(xc,s=>r.error(new Kt({error:s}))),()=>i.abort()})}doRequest(t,r,i){return D(this,null,function*(){let s=this.createRequestInit(t),a;try{let b=this.ngZone.runOutsideAngular(()=>this.fetchImpl(t.urlWithParams,V({signal:r},s)));g_(b),i.next({type:Yt.Sent}),a=yield b}catch(b){i.error(new Kt({error:b,status:b.status??0,statusText:b.statusText,url:t.urlWithParams,headers:b.headers}));return}let c=new Rt(a.headers),u=a.statusText,d=Tp(a)??t.urlWithParams,p=a.status,m=null;if(t.reportProgress&&i.next(new Zs({headers:c,status:p,statusText:u,url:d})),a.body){let b=a.headers.get("content-length"),P=[],N=a.body.getReader(),C=0,U,z,L=typeof Zone<"u"&&Zone.current;yield this.ngZone.runOutsideAngular(()=>D(this,null,function*(){for(;;){let{done:le,value:X}=yield N.read();if(le)break;if(P.push(X),C+=X.length,t.reportProgress){z=t.responseType==="text"?(z??"")+(U??=new TextDecoder).decode(X,{stream:!0}):void 0;let E=()=>i.next({type:Yt.DownloadProgress,total:b?+b:void 0,loaded:C,partialText:z});L?L.run(E):E()}}}));let ne=this.concatChunks(P,C);try{let le=a.headers.get("Content-Type")??"";m=this.parseBody(t,ne,le)}catch(le){i.error(new Kt({error:le,headers:new Rt(a.headers),status:a.status,statusText:a.statusText,url:Tp(a)??t.urlWithParams}));return}}p===0&&(p=m?bp:0),p>=200&&p<300?(i.next(new li({body:m,headers:c,status:p,statusText:u,url:d})),i.complete()):i.error(new Kt({error:m,headers:c,status:p,statusText:u,url:d}))})}parseBody(t,r,i){switch(t.responseType){case"json":let s=new TextDecoder().decode(r).replace(d_,"");return s===""?null:JSON.parse(s);case"text":return new TextDecoder().decode(r);case"blob":return new Blob([r],{type:i});case"arraybuffer":return r.buffer}}createRequestInit(t){let r={},i=t.withCredentials?"include":void 0;if(t.headers.forEach((s,a)=>r[s]=a.join(",")),t.headers.has("Accept")||(r.Accept="application/json, text/plain, */*"),!t.headers.has("Content-Type")){let s=t.detectContentTypeHeader();s!==null&&(r["Content-Type"]=s)}return{body:t.serializeBody(),method:t.method,headers:r,credentials:i}}concatChunks(t,r){let i=new Uint8Array(r),s=0;for(let a of t)i.set(a,s),s+=a.length;return i}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac})}}return n})(),Mc=class{};function xc(){}function g_(n){n.then(xc,xc)}function m_(n,e){return e(n)}function y_(n,e,t){return(r,i)=>it(t,()=>e(r,s=>n(s,i)))}var Sp=new se(""),v_=new se(""),__=new se("",{providedIn:"root",factory:()=>!0});var Ap=(()=>{class n extends ci{constructor(t,r){super(),this.backend=t,this.injector=r,this.chain=null,this.pendingTasks=x(Us),this.contributeToStability=x(__)}handle(t){if(this.chain===null){let r=Array.from(new Set([...this.injector.get(Sp),...this.injector.get(v_,[])]));this.chain=r.reduceRight((i,s)=>y_(i,s,this.injector),m_)}if(this.contributeToStability){let r=this.pendingTasks.add();return this.chain(t,i=>this.backend.handle(i)).pipe(Wt(()=>this.pendingTasks.remove(r)))}else return this.chain(t,r=>this.backend.handle(r))}static{this.\u0275fac=function(r){return new(r||n)(Q(Xs),Q(Wn))}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac})}}return n})();var w_=/^\)\]\}',?\n/;function E_(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}var Dp=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if(t.method==="JSONP")throw new fe(-2800,!1);let r=this.xhrFactory;return(r.\u0275loadImpl?Le(r.\u0275loadImpl()):$(null)).pipe(Qe(()=>new qt(s=>{let a=r.build();if(a.open(t.method,t.urlWithParams),t.withCredentials&&(a.withCredentials=!0),t.headers.forEach((N,C)=>a.setRequestHeader(N,C.join(","))),t.headers.has("Accept")||a.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){let N=t.detectContentTypeHeader();N!==null&&a.setRequestHeader("Content-Type",N)}if(t.responseType){let N=t.responseType.toLowerCase();a.responseType=N!=="json"?N:"text"}let c=t.serializeBody(),u=null,d=()=>{if(u!==null)return u;let N=a.statusText||"OK",C=new Rt(a.getAllResponseHeaders()),U=E_(a)||t.url;return u=new Zs({headers:C,status:a.status,statusText:N,url:U}),u},p=()=>{let{headers:N,status:C,statusText:U,url:z}=d(),L=null;C!==h_&&(L=typeof a.response>"u"?a.responseText:a.response),C===0&&(C=L?bp:0);let ne=C>=200&&C<300;if(t.responseType==="json"&&typeof L=="string"){let le=L;L=L.replace(w_,"");try{L=L!==""?JSON.parse(L):null}catch(X){L=le,ne&&(ne=!1,L={error:X,text:L})}}ne?(s.next(new li({body:L,headers:N,status:C,statusText:U,url:z||void 0})),s.complete()):s.error(new Kt({error:L,headers:N,status:C,statusText:U,url:z||void 0}))},m=N=>{let{url:C}=d(),U=new Kt({error:N,status:a.status||0,statusText:a.statusText||"Unknown Error",url:C||void 0});s.error(U)},w=!1,b=N=>{w||(s.next(d()),w=!0);let C={type:Yt.DownloadProgress,loaded:N.loaded};N.lengthComputable&&(C.total=N.total),t.responseType==="text"&&a.responseText&&(C.partialText=a.responseText),s.next(C)},P=N=>{let C={type:Yt.UploadProgress,loaded:N.loaded};N.lengthComputable&&(C.total=N.total),s.next(C)};return a.addEventListener("load",p),a.addEventListener("error",m),a.addEventListener("timeout",m),a.addEventListener("abort",m),t.reportProgress&&(a.addEventListener("progress",b),c!==null&&a.upload&&a.upload.addEventListener("progress",P)),a.send(c),s.next({type:Yt.Sent}),()=>{a.removeEventListener("error",m),a.removeEventListener("abort",m),a.removeEventListener("load",p),a.removeEventListener("timeout",m),t.reportProgress&&(a.removeEventListener("progress",b),c!==null&&a.upload&&a.upload.removeEventListener("progress",P)),a.readyState!==a.DONE&&a.abort()}})))}static{this.\u0275fac=function(r){return new(r||n)(Q(Zn))}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac})}}return n})(),Cp=new se(""),I_="XSRF-TOKEN",T_=new se("",{providedIn:"root",factory:()=>I_}),A_="X-XSRF-TOKEN",D_=new se("",{providedIn:"root",factory:()=>A_}),eo=class{},b_=(()=>{class n{constructor(t,r,i){this.doc=t,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if(this.platform==="server")return null;let t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=Qs(t,this.cookieName),this.lastCookieString=t),this.lastToken}static{this.\u0275fac=function(r){return new(r||n)(Q(Pe),Q(ht),Q(T_))}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac})}}return n})();function S_(n,e){let t=n.url.toLowerCase();if(!x(Cp)||n.method==="GET"||n.method==="HEAD"||t.startsWith("http://")||t.startsWith("https://"))return e(n);let r=x(eo).getToken(),i=x(D_);return r!=null&&!n.headers.has(i)&&(n=n.clone({headers:n.headers.set(i,r)})),e(n)}function jb(...n){let e=[hi,Dp,Ap,{provide:ci,useExisting:Ap},{provide:Xs,useFactory:()=>x(p_,{optional:!0})??x(Dp)},{provide:Sp,useValue:S_,multi:!0},{provide:Cp,useValue:!0},{provide:eo,useClass:b_}];for(let t of n)e.push(...t.\u0275providers);return rt(e)}var Vc=class extends Gs{constructor(){super(...arguments),this.supportsDOMEvents=!0}},Uc=class n extends Vc{static makeCurrent(){pp(new n)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=P_();return t==null?null:N_(t)}resetBaseElement(){di=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Qs(document.cookie,e)}},di=null;function P_(){return di=di||document.querySelector("base"),di?di.getAttribute("href"):null}function N_(n){return new URL(n,document.baseURI).pathname}var O_=(()=>{class n{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac})}}return n})(),Bc=new se(""),Op=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(s=>s.supports(t)),!r)throw new fe(5101,!1);return this._eventNameToPlugin.set(t,r),r}static{this.\u0275fac=function(r){return new(r||n)(Q(Bc),Q(Fe))}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac})}}return n})(),to=class{constructor(e){this._doc=e}},Fc="ng-app-id",kp=(()=>{class n{constructor(t,r,i,s={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Ys(s),this.resetHostNodes()}addStyles(t){for(let r of t)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(t){for(let r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(let r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(let r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){let r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){let t=this.doc.head?.querySelectorAll(`style[${Fc}="${this.appId}"]`);if(t?.length){let r=new Map;return t.forEach(i=>{i.textContent!=null&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){let i=this.styleRef;if(i.has(t)){let s=i.get(t);return s.usage+=r,s.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){let i=this.styleNodesInDOM,s=i?.get(r);if(s?.parentNode===t)return i.delete(r),s.removeAttribute(Fc),s;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=r,this.platformIsServer&&a.setAttribute(Fc,this.appId),t.appendChild(a),a}}addStyleToHost(t,r){let i=this.getStyleElement(t,r),s=this.styleRef,a=s.get(r)?.elements;a?a.push(i):s.set(r,{elements:[i],usage:1})}resetHostNodes(){let t=this.hostNodes;t.clear(),t.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||n)(Q(Pe),Q(Ic),Q(Tc,8),Q(ht))}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac})}}return n})(),Lc={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},jc=/%COMP%/g,Mp="%COMP%",k_=`_nghost-${Mp}`,M_=`_ngcontent-${Mp}`,x_=!0,F_=new se("",{providedIn:"root",factory:()=>x_});function L_(n){return M_.replace(jc,n)}function V_(n){return k_.replace(jc,n)}function xp(n,e){return e.map(t=>t.replace(jc,n))}var Rp=(()=>{class n{constructor(t,r,i,s,a,c,u,d=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=a,this.platformId=c,this.ngZone=u,this.nonce=d,this.rendererByCompId=new Map,this.platformIsServer=Ys(c),this.defaultRenderer=new fi(t,a,u,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===ni.ShadowDom&&(r=_e(V({},r),{encapsulation:ni.Emulated}));let i=this.getOrCreateRenderer(t,r);return i instanceof no?i.applyToHost(t):i instanceof pi&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,s=i.get(r.id);if(!s){let a=this.doc,c=this.ngZone,u=this.eventManager,d=this.sharedStylesHost,p=this.removeStylesOnCompDestroy,m=this.platformIsServer;switch(r.encapsulation){case ni.Emulated:s=new no(u,d,r,this.appId,p,a,c,m);break;case ni.ShadowDom:return new $c(u,d,t,r,a,c,this.nonce,m);default:s=new pi(u,d,r,p,a,c,m);break}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||n)(Q(Op),Q(kp),Q(Ic),Q(F_),Q(Pe),Q(ht),Q(Fe),Q(Tc))}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac})}}return n})(),fi=class{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(Lc[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(Pp(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(Pp(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new fe(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let s=Lc[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=Lc[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(Kn.DashCase|Kn.Important)?e.style.setProperty(t,r,i&Kn.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Kn.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r){if(typeof e=="string"&&(e=Xn().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function Pp(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var $c=class extends fi{constructor(e,t,r,i,s,a,c,u){super(e,s,a,u),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let d=xp(i.id,i.styles);for(let p of d){let m=document.createElement("style");c&&m.setAttribute("nonce",c),m.textContent=p,this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},pi=class extends fi{constructor(e,t,r,i,s,a,c,u){super(e,s,a,c),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=u?xp(u,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},no=class extends pi{constructor(e,t,r,i,s,a,c,u){let d=i+"-"+r.id;super(e,t,r,s,a,c,u,d),this.contentAttr=L_(d),this.hostAttr=V_(d)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}},U_=(()=>{class n extends to{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static{this.\u0275fac=function(r){return new(r||n)(Q(Pe))}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac})}}return n})(),Np=["alt","control","meta","shift"],B_={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},$_={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},j_=(()=>{class n extends to{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i){let s=n.parseEventName(r),a=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Xn().onAndCancel(t,s.domEventName,a))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let s=n._normalizeKey(r.pop()),a="",c=r.indexOf("code");if(c>-1&&(r.splice(c,1),a="code."),Np.forEach(d=>{let p=r.indexOf(d);p>-1&&(r.splice(p,1),a+=d+".")}),a+=s,r.length!=0||s.length===0)return null;let u={};return u.domEventName=i,u.fullKey=a,u}static matchEventFullKeyCode(t,r){let i=B_[t.key]||t.key,s="";return r.indexOf("code.")>-1&&(i=t.code,s="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),Np.forEach(a=>{if(a!==i){let c=$_[a];c(t)&&(s+=a+".")}}),s+=i,s===r)}static eventCallback(t,r,i){return s=>{n.matchEventFullKeyCode(s,t)&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return t==="esc"?"escape":t}static{this.\u0275fac=function(r){return new(r||n)(Q(Pe))}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac})}}return n})();function wS(n,e,t){return cp(V({rootComponent:n,platformRef:t?.platformRef},z_(e)))}function z_(n){return{appProviders:[...K_,...n?.providers??[]],platformProviders:H_}}function q_(){Uc.makeCurrent()}function G_(){return new Ec}function W_(){return Qf(document),document}var H_=[{provide:ht,useValue:vp},{provide:Yf,useValue:q_,multi:!0},{provide:Pe,useFactory:W_,deps:[]}];var K_=[{provide:Kf,useValue:"root"},{provide:Ec,useFactory:G_,deps:[]},{provide:Bc,useClass:U_,multi:!0,deps:[Pe,Fe,ht]},{provide:Bc,useClass:j_,multi:!0,deps:[Pe]},Rp,kp,Op,{provide:Jf,useExisting:Rp},{provide:Zn,useClass:O_,deps:[]},[]];var Fp=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static{this.\u0275fac=function(r){return new(r||n)(Q(Pe))}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Vp=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},Y_=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=n[t++],a=n[t++],c=n[t++],u=((i&7)<<18|(s&63)<<12|(a&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{let s=n[t++],a=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|a&63)}}return e.join("")},Up={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let s=n[i],a=i+1<n.length,c=a?n[i+1]:0,u=i+2<n.length,d=u?n[i+2]:0,p=s>>2,m=(s&3)<<4|c>>4,w=(c&15)<<2|d>>6,b=d&63;u||(b=64,a||(w=64)),r.push(t[p],t[m],t[w],t[b])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(Vp(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):Y_(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let s=t[n.charAt(i++)],c=i<n.length?t[n.charAt(i)]:0;++i;let d=i<n.length?t[n.charAt(i)]:64;++i;let m=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||c==null||d==null||m==null)throw new qc;let w=s<<2|c>>4;if(r.push(w),d!==64){let b=c<<4&240|d>>2;if(r.push(b),m!==64){let P=d<<6&192|m;r.push(P)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},qc=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},J_=function(n){let e=Vp(n);return Up.encodeByteArray(e,!0)},gi=function(n){return J_(n).replace(/\./g,"")},Wc=function(n){try{return Up.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function X_(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var Z_=()=>X_().__FIREBASE_DEFAULTS__,ew=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},tw=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&Wc(n[1]);return e&&JSON.parse(e)},io=()=>{try{return Z_()||ew()||tw()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Bp=n=>{var e,t;return(t=(e=io())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},$p=n=>{let e=Bp(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},Hc=()=>{var n;return(n=io())===null||n===void 0?void 0:n.config},jp=n=>{var e;return(e=io())===null||e===void 0?void 0:e[`_${n}`]};var ro=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function zp(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let a=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[gi(JSON.stringify(t)),gi(JSON.stringify(a)),""].join(".")}function Ue(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function qp(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ue())}function nw(){var n;let e=(n=io())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Gp(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Wp(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function Hp(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Kp(){return!nw()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Kc(){try{return typeof indexedDB=="object"}catch{return!1}}function Qp(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}var rw="FirebaseError",Je=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=rw,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Pt.prototype.create)}},Pt=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],a=s?iw(s,r):"Error",c=`${this.serviceName}: ${a} (${i}).`;return new Je(i,c,r)}};function iw(n,e){return n.replace(sw,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var sw=/\{\$([^}]+)}/g;function er(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let s=n[i],a=e[i];if(Lp(s)&&Lp(a)){if(!er(s,a))return!1}else if(s!==a)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function Lp(n){return n!==null&&typeof n=="object"}function Qc(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Yp(n,e){let t=new Gc(n,e);return t.subscribe.bind(t)}var Gc=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");ow(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=zc),i.error===void 0&&(i.error=zc),i.complete===void 0&&(i.complete=zc);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function ow(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function zc(){}var IS=4*60*60*1e3;function Te(n){return n&&n._delegate?n._delegate:n}var Xe=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var vn="[DEFAULT]";var Yc=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new ro;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(cw(e))try{this.getOrInitializeService({instanceIdentifier:vn})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=vn){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return D(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=vn){return this.instances.has(e)}getOptions(e=vn){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[s,a]of this.instancesDeferred.entries()){let c=this.normalizeInstanceIdentifier(s);r===c&&a.resolve(i)}return i}onInit(e,t){var r;let i=this.normalizeInstanceIdentifier(t),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);let a=this.instances.get(i);return a&&e(a,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:aw(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=vn){return this.component?this.component.multipleInstances?e:vn:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function aw(n){return n===vn?void 0:n}function cw(n){return n.instantiationMode==="EAGER"}var so=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new Yc(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var uw=[],Y=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(Y||{}),lw={debug:Y.DEBUG,verbose:Y.VERBOSE,info:Y.INFO,warn:Y.WARN,error:Y.ERROR,silent:Y.SILENT},hw=Y.INFO,dw={[Y.DEBUG]:"log",[Y.VERBOSE]:"log",[Y.INFO]:"info",[Y.WARN]:"warn",[Y.ERROR]:"error"},fw=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=dw[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Jt=class{constructor(e){this.name=e,this._logLevel=hw,this._logHandler=fw,this._userLogHandler=null,uw.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Y))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?lw[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Y.DEBUG,...e),this._logHandler(this,Y.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Y.VERBOSE,...e),this._logHandler(this,Y.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Y.INFO,...e),this._logHandler(this,Y.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Y.WARN,...e),this._logHandler(this,Y.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Y.ERROR,...e),this._logHandler(this,Y.ERROR,...e)}};var pw=(n,e)=>e.some(t=>n instanceof t),Jp,Xp;function gw(){return Jp||(Jp=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function mw(){return Xp||(Xp=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var Zp=new WeakMap,Xc=new WeakMap,eg=new WeakMap,Jc=new WeakMap,eu=new WeakMap;function yw(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",a)},s=()=>{t(gt(n.result)),i()},a=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",a)});return e.then(t=>{t instanceof IDBCursor&&Zp.set(t,n)}).catch(()=>{}),eu.set(e,n),e}function vw(n){if(Xc.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",a),n.removeEventListener("abort",a)},s=()=>{t(),i()},a=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",a),n.addEventListener("abort",a)});Xc.set(n,e)}var Zc={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Xc.get(n);if(e==="objectStoreNames")return n.objectStoreNames||eg.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return gt(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function tg(n){Zc=n(Zc)}function _w(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(oo(this),e,...t);return eg.set(r,e.sort?e.sort():[e]),gt(r)}:mw().includes(n)?function(...e){return n.apply(oo(this),e),gt(Zp.get(this))}:function(...e){return gt(n.apply(oo(this),e))}}function ww(n){return typeof n=="function"?_w(n):(n instanceof IDBTransaction&&vw(n),pw(n,gw())?new Proxy(n,Zc):n)}function gt(n){if(n instanceof IDBRequest)return yw(n);if(Jc.has(n))return Jc.get(n);let e=ww(n);return e!==n&&(Jc.set(n,e),eu.set(e,n)),e}var oo=n=>eu.get(n);function rg(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){let a=indexedDB.open(n,e),c=gt(a);return r&&a.addEventListener("upgradeneeded",u=>{r(gt(a.result),u.oldVersion,u.newVersion,gt(a.transaction),u)}),t&&a.addEventListener("blocked",u=>t(u.oldVersion,u.newVersion,u)),c.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",d=>i(d.oldVersion,d.newVersion,d))}).catch(()=>{}),c}var Ew=["get","getKey","getAll","getAllKeys","count"],Iw=["put","add","delete","clear"],tu=new Map;function ng(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(tu.get(e))return tu.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=Iw.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||Ew.includes(t)))return;let s=function(a,...c){return D(this,null,function*(){let u=this.transaction(a,i?"readwrite":"readonly"),d=u.store;return r&&(d=d.index(c.shift())),(yield Promise.all([d[t](...c),i&&u.done]))[0]})};return tu.set(e,s),s}tg(n=>_e(V({},n),{get:(e,t,r)=>ng(e,t)||n.get(e,t,r),has:(e,t)=>!!ng(e,t)||n.has(e,t)}));var ru=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(Tw(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function Tw(n){let e=n.getComponent();return e?.type==="VERSION"}var iu="@firebase/app",ig="0.10.13";var Nt=new Jt("@firebase/app"),Aw="@firebase/app-compat",Dw="@firebase/analytics-compat",bw="@firebase/analytics",Sw="@firebase/app-check-compat",Cw="@firebase/app-check",Rw="@firebase/auth",Pw="@firebase/auth-compat",Nw="@firebase/database",Ow="@firebase/data-connect",kw="@firebase/database-compat",Mw="@firebase/functions",xw="@firebase/functions-compat",Fw="@firebase/installations",Lw="@firebase/installations-compat",Vw="@firebase/messaging",Uw="@firebase/messaging-compat",Bw="@firebase/performance",$w="@firebase/performance-compat",jw="@firebase/remote-config",zw="@firebase/remote-config-compat",qw="@firebase/storage",Gw="@firebase/storage-compat",Ww="@firebase/firestore",Hw="@firebase/vertexai-preview",Kw="@firebase/firestore-compat",Qw="firebase",Yw="10.14.1";var su="[DEFAULT]",Jw={[iu]:"fire-core",[Aw]:"fire-core-compat",[bw]:"fire-analytics",[Dw]:"fire-analytics-compat",[Cw]:"fire-app-check",[Sw]:"fire-app-check-compat",[Rw]:"fire-auth",[Pw]:"fire-auth-compat",[Nw]:"fire-rtdb",[Ow]:"fire-data-connect",[kw]:"fire-rtdb-compat",[Mw]:"fire-fn",[xw]:"fire-fn-compat",[Fw]:"fire-iid",[Lw]:"fire-iid-compat",[Vw]:"fire-fcm",[Uw]:"fire-fcm-compat",[Bw]:"fire-perf",[$w]:"fire-perf-compat",[jw]:"fire-rc",[zw]:"fire-rc-compat",[qw]:"fire-gcs",[Gw]:"fire-gcs-compat",[Ww]:"fire-fst",[Kw]:"fire-fst-compat",[Hw]:"fire-vertex","fire-js":"fire-js",[Qw]:"fire-js-all"};var mi=new Map,Xw=new Map,ou=new Map;function sg(n,e){try{n.container.addComponent(e)}catch(t){Nt.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Zt(n){let e=n.name;if(ou.has(e))return Nt.debug(`There were multiple attempts to register component ${e}.`),!1;ou.set(e,n);for(let t of mi.values())sg(t,n);for(let t of Xw.values())sg(t,n);return!0}function lu(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function tr(n){return n.settings!==void 0}var Zw={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Xt=new Pt("app","Firebase",Zw);var au=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Xe("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Xt.create("app-deleted",{appName:this._name})}};var nr=Yw;function hu(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=Object.assign({name:su,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Xt.create("bad-app-name",{appName:String(i)});if(t||(t=Hc()),!t)throw Xt.create("no-options");let s=mi.get(i);if(s){if(er(t,s.options)&&er(r,s.config))return s;throw Xt.create("duplicate-app",{appName:i})}let a=new so(i);for(let u of ou.values())a.addComponent(u);let c=new au(t,r,a);return mi.set(i,c),c}function vi(n=su){let e=mi.get(n);if(!e&&n===su&&Hc())return hu();if(!e)throw Xt.create("no-app",{appName:n});return e}function ao(){return Array.from(mi.values())}function we(n,e,t){var r;let i=(r=Jw[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);let s=i.match(/\s|\//),a=e.match(/\s|\//);if(s||a){let c=[`Unable to register library "${i}" with version "${e}":`];s&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&a&&c.push("and"),a&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Nt.warn(c.join(" "));return}Zt(new Xe(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var eE="firebase-heartbeat-database",tE=1,yi="firebase-heartbeat-store",nu=null;function ug(){return nu||(nu=rg(eE,tE,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(yi)}catch(t){console.warn(t)}}}}).catch(n=>{throw Xt.create("idb-open",{originalErrorMessage:n.message})})),nu}function nE(n){return D(this,null,function*(){try{let t=(yield ug()).transaction(yi),r=yield t.objectStore(yi).get(lg(n));return yield t.done,r}catch(e){if(e instanceof Je)Nt.warn(e.message);else{let t=Xt.create("idb-get",{originalErrorMessage:e?.message});Nt.warn(t.message)}}})}function og(n,e){return D(this,null,function*(){try{let r=(yield ug()).transaction(yi,"readwrite");yield r.objectStore(yi).put(e,lg(n)),yield r.done}catch(t){if(t instanceof Je)Nt.warn(t.message);else{let r=Xt.create("idb-set",{originalErrorMessage:t?.message});Nt.warn(r.message)}}})}function lg(n){return`${n.name}!${n.options.appId}`}var rE=1024,iE=30*24*60*60*1e3,cu=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new uu(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return D(this,null,function*(){var e,t;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=ag();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(a=>a.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(a=>{let c=new Date(a.date).valueOf();return Date.now()-c<=iE}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Nt.warn(r)}})}getHeartbeatsHeader(){return D(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=ag(),{heartbeatsToSend:r,unsentEntries:i}=sE(this._heartbeatsCache.heartbeats),s=gi(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return Nt.warn(t),""}})}};function ag(){return new Date().toISOString().substring(0,10)}function sE(n,e=rE){let t=[],r=n.slice();for(let i of n){let s=t.find(a=>a.agent===i.agent);if(s){if(s.dates.push(i.date),cg(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),cg(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var uu=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return D(this,null,function*(){return Kc()?Qp().then(()=>!0).catch(()=>!1):!1})}read(){return D(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield nE(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return D(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return og(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return D(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return og(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function cg(n){return gi(JSON.stringify({version:2,heartbeats:n})).length}function oE(n){Zt(new Xe("platform-logger",e=>new ru(e),"PRIVATE")),Zt(new Xe("heartbeat",e=>new cu(e),"PRIVATE")),we(iu,ig,n),we(iu,ig,"esm2017"),we("fire-js","")}oE("");var aE="firebase",cE="10.14.1";we(aE,cE,"app");var ir=new ii("ANGULARFIRE2_VERSION");function fu(n,e,t){if(e){if(e.length===1)return e[0];let s=e.filter(a=>a.app===t);if(s.length===1)return s[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var wi=(n,e)=>{let t=e?[e]:ao(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(a=>{r.includes(a)||r.push(a)})}),r},_i=class{constructor(){return wi(uE)}},uE="app-check";function rr(){}var co=class{zone;delegate;constructor(e,t=Vf){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,s=function(a){i.runGuarded(()=>{e.apply(this,[a])})};return this.delegate.schedule(s,t,r)}},du=class{zone;task=null;constructor(e){this.zone=e}call(e,t){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",rr,{},rr,rr)),t.pipe(ge({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},Ei=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new co(Zone.current)),this.insideAngular=t.run(()=>new co(Zone.current,Lf)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(Q(Fe))};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function uo(){let n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return n}function lE(n){return uo().ngZone.runOutsideAngular(()=>n())}function _n(n){return uo().ngZone.run(()=>n())}function hE(n){return dE(uo())(n)}function dE(n){return function(t){return t=t.lift(new du(n.ngZone)),t.pipe(lc(n.outsideAngular),uc(n.insideAngular))}}var fE=(n,e)=>function(){let r=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),_n(()=>n.apply(void 0,r))},st=(n,e)=>function(){let t,r=arguments;for(let s=0;s<arguments.length;s++)typeof r[s]=="function"&&(e&&(t||=_n(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",rr,{},rr,rr))),r[s]=fE(r[s],t));let i=lE(()=>n.apply(this,r));if(!e)if(i instanceof qt){let s=uo();return i.pipe(lc(s.outsideAngular),uc(s.insideAngular))}else return _n(()=>i);return i instanceof qt?i.pipe(hE):i instanceof Promise?_n(()=>new Promise((s,a)=>i.then(c=>_n(()=>s(c)),c=>_n(()=>a(c))))):typeof i=="function"&&t?function(){return setTimeout(()=>{t&&t.state==="scheduled"&&t.invoke()},10),i.apply(this,arguments)}:_n(()=>i)};var wn=class{constructor(e){return e}},Ii=class{constructor(){return ao()}};function pE(n){return n&&n.length===1?n[0]:new wn(vi())}var pu=new se("angularfire2._apps"),gE={provide:wn,useFactory:pE,deps:[[new Ye,pu]]},mE={provide:Ii,deps:[[new Ye,pu]]};function yE(n){return(e,t)=>{let r=t.get(ht);we("angularfire",ir.full,"core"),we("angularfire",ir.full,"app"),we("angular",ap.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new wn(i)}}function cC(n,...e){return rt([gE,mE,{provide:pu,useFactory:yE(n),multi:!0,deps:[Fe,gn,Ei,...e]}])}var uC=st(hu,!0);function vg(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var _g=vg,wg=new Pt("auth","Firebase",vg());var po=new Jt("@firebase/auth");function _E(n,...e){po.logLevel<=Y.WARN&&po.warn(`Auth (${nr}): ${n}`,...e)}function ho(n,...e){po.logLevel<=Y.ERROR&&po.error(`Auth (${nr}): ${n}`,...e)}function hg(n,...e){throw bu(n,...e)}function Du(n,...e){return bu(n,...e)}function Eg(n,e,t){let r=Object.assign(Object.assign({},_g()),{[e]:t});return new Pt("auth","Firebase",r).create(e,{appName:n.name})}function fo(n){return Eg(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function bu(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return wg.create(n,...e)}function re(n,e,...t){if(!n)throw bu(e,...t)}function Ti(n){let e="INTERNAL ASSERTION FAILED: "+n;throw ho(e),new Error(e)}function go(n,e){n||Ti(e)}function wE(){return dg()==="http:"||dg()==="https:"}function dg(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function EE(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(wE()||Wp()||"connection"in navigator)?navigator.onLine:!0}function IE(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var In=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,go(t>e,"Short delay should be less than long delay!"),this.isMobile=qp()||Hp()}get(){return EE()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function TE(n,e){go(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var mo=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ti("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ti("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ti("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var AE={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var DE=new In(3e4,6e4);function Ig(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function wo(s,a,c,u){return D(this,arguments,function*(n,e,t,r,i={}){return Tg(n,i,()=>D(this,null,function*(){let d={},p={};r&&(e==="GET"?p=r:d={body:JSON.stringify(r)});let m=Qc(Object.assign({key:n.config.apiKey},p)).slice(1),w=yield n._getAdditionalHeaders();w["Content-Type"]="application/json",n.languageCode&&(w["X-Firebase-Locale"]=n.languageCode);let b=Object.assign({method:e,headers:w},d);return Gp()||(b.referrerPolicy="no-referrer"),mo.fetch()(Ag(n,n.config.apiHost,t,m),b)}))})}function Tg(n,e,t){return D(this,null,function*(){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},AE),e);try{let i=new yu(n),s=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();let a=yield s.json();if("needConfirmation"in a)throw lo(n,"account-exists-with-different-credential",a);if(s.ok&&!("errorMessage"in a))return a;{let c=s.ok?a.errorMessage:a.error.message,[u,d]=c.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw lo(n,"credential-already-in-use",a);if(u==="EMAIL_EXISTS")throw lo(n,"email-already-in-use",a);if(u==="USER_DISABLED")throw lo(n,"user-disabled",a);let p=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw Eg(n,p,d);hg(n,p)}}catch(i){if(i instanceof Je)throw i;hg(n,"network-request-failed",{message:String(i)})}})}function Ag(n,e,t,r){let i=`${e}${t}?${r}`;return n.config.emulator?TE(n.config,i):`${n.config.apiScheme}://${i}`}var yu=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Du(this.auth,"network-request-failed")),DE.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function lo(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=Du(n,e,r);return i.customData._tokenResponse=t,i}function bE(n,e){return D(this,null,function*(){return wo(n,"POST","/v1/accounts:delete",e)})}function Dg(n,e){return D(this,null,function*(){return wo(n,"POST","/v1/accounts:lookup",e)})}function Ai(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function Su(n,e=!1){return D(this,null,function*(){let t=Te(n),r=yield t.getIdToken(e),i=bg(r);re(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,a=s?.sign_in_provider;return{claims:i,token:r,authTime:Ai(gu(i.auth_time)),issuedAtTime:Ai(gu(i.iat)),expirationTime:Ai(gu(i.exp)),signInProvider:a||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function gu(n){return Number(n)*1e3}function bg(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return ho("JWT malformed, contained fewer than 3 sections"),null;try{let i=Wc(t);return i?JSON.parse(i):(ho("Failed to decode base64 JWT payload"),null)}catch(i){return ho("Caught error parsing JWT payload as JSON",i?.toString()),null}}function fg(n){let e=bg(n);return re(e,"internal-error"),re(typeof e.exp<"u","internal-error"),re(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function vu(n,e,t=!1){return D(this,null,function*(){if(t)return e;try{return yield e}catch(r){throw r instanceof Je&&SE(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})}function SE({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var _u=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>D(this,null,function*(){yield this.iteration()}),t)}iteration(){return D(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var bi=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ai(this.lastLoginAt),this.creationTime=Ai(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function yo(n){return D(this,null,function*(){var e;let t=n.auth,r=yield n.getIdToken(),i=yield vu(n,Dg(t,{idToken:r}));re(i?.users.length,t,"internal-error");let s=i.users[0];n._notifyReloadListener(s);let a=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?Sg(s.providerUserInfo):[],c=CE(n.providerData,a),u=n.isAnonymous,d=!(n.email&&s.passwordHash)&&!c?.length,p=u?d:!1,m={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:c,metadata:new bi(s.createdAt,s.lastLoginAt),isAnonymous:p};Object.assign(n,m)})}function Cu(n){return D(this,null,function*(){let e=Te(n);yield yo(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function CE(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function Sg(n){return n.map(e=>{var{providerId:t}=e,r=cc(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function RE(n,e){return D(this,null,function*(){let t=yield Tg(n,{},()=>D(this,null,function*(){let r=Qc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,a=Ag(n,i,"/v1/token",`key=${s}`),c=yield n._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",mo.fetch()(a,{method:"POST",headers:c,body:r})}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function PE(n,e){return D(this,null,function*(){return wo(n,"POST","/v2/accounts:revokeToken",Ig(n,e))})}var Di=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){re(e.idToken,"internal-error"),re(typeof e.idToken<"u","internal-error"),re(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):fg(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){re(e.length!==0,"internal-error");let t=fg(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return D(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(re(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return D(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:s}=yield RE(e,t);this.updateTokensAndExpiration(r,i,Number(s))})}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:s}=t,a=new n;return r&&(re(typeof r=="string","internal-error",{appName:e}),a.refreshToken=r),i&&(re(typeof i=="string","internal-error",{appName:e}),a.accessToken=i),s&&(re(typeof s=="number","internal-error",{appName:e}),a.expirationTime=s),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return Ti("not implemented")}};function en(n,e){re(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var Si=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,s=cc(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new _u(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new bi(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){return D(this,null,function*(){let t=yield vu(this,this.stsTokenManager.getToken(this.auth,e));return re(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return Su(this,e)}reload(){return Cu(this)}_assign(e){this!==e&&(re(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){re(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return D(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield yo(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return D(this,null,function*(){if(tr(this.auth.app))return Promise.reject(fo(this.auth));let e=yield this.getIdToken();return yield vu(this,bE(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,s,a,c,u,d,p;let m=(r=t.displayName)!==null&&r!==void 0?r:void 0,w=(i=t.email)!==null&&i!==void 0?i:void 0,b=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,P=(a=t.photoURL)!==null&&a!==void 0?a:void 0,N=(c=t.tenantId)!==null&&c!==void 0?c:void 0,C=(u=t._redirectEventId)!==null&&u!==void 0?u:void 0,U=(d=t.createdAt)!==null&&d!==void 0?d:void 0,z=(p=t.lastLoginAt)!==null&&p!==void 0?p:void 0,{uid:L,emailVerified:ne,isAnonymous:le,providerData:X,stsTokenManager:E}=t;re(L&&E,e,"internal-error");let g=Di.fromJSON(this.name,E);re(typeof L=="string",e,"internal-error"),en(m,e.name),en(w,e.name),re(typeof ne=="boolean",e,"internal-error"),re(typeof le=="boolean",e,"internal-error"),en(b,e.name),en(P,e.name),en(N,e.name),en(C,e.name),en(U,e.name),en(z,e.name);let v=new n({uid:L,auth:e,email:w,emailVerified:ne,displayName:m,isAnonymous:le,photoURL:P,phoneNumber:b,tenantId:N,stsTokenManager:g,createdAt:U,lastLoginAt:z});return X&&Array.isArray(X)&&(v.providerData=X.map(_=>Object.assign({},_))),C&&(v._redirectEventId=C),v}static _fromIdTokenResponse(e,t,r=!1){return D(this,null,function*(){let i=new Di;i.updateFromServerResponse(t);let s=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield yo(s),s})}static _fromGetAccountInfoResponse(e,t,r){return D(this,null,function*(){let i=t.users[0];re(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?Sg(i.providerUserInfo):[],a=!(i.email&&i.passwordHash)&&!s?.length,c=new Di;c.updateFromIdToken(r);let u=new n({uid:i.localId,auth:e,stsTokenManager:c,isAnonymous:a}),d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new bi(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(u,d),u})}};var pg=new Map;function En(n){go(n instanceof Function,"Expected a class definition");let e=pg.get(n);return e?(go(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,pg.set(n,e),e)}var NE=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return D(this,null,function*(){return!0})}_set(t,r){return D(this,null,function*(){this.storage[t]=r})}_get(t){return D(this,null,function*(){let r=this.storage[t];return r===void 0?null:r})}_remove(t){return D(this,null,function*(){delete this.storage[t]})}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),wu=NE;function mu(n,e,t){return`firebase:${n}:${e}:${t}`}var vo=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=mu(this.userKey,i.apiKey,s),this.fullPersistenceKey=mu("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return D(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?Si._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return D(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return D(this,null,function*(){if(!t.length)return new n(En(wu),e,r);let i=(yield Promise.all(t.map(d=>D(this,null,function*(){if(yield d._isAvailable())return d})))).filter(d=>d),s=i[0]||En(wu),a=mu(r,e.config.apiKey,e.name),c=null;for(let d of t)try{let p=yield d._get(a);if(p){let m=Si._fromJSON(e,p);d!==s&&(c=m),s=d;break}}catch{}let u=i.filter(d=>d._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new n(s,e,r):(s=u[0],c&&(yield s._set(a,c.toJSON())),yield Promise.all(t.map(d=>D(this,null,function*(){if(d!==s)try{yield d._remove(a)}catch{}}))),new n(s,e,r))})}};function gg(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(xE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(OE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(LE(e))return"Blackberry";if(VE(e))return"Webos";if(kE(e))return"Safari";if((e.includes("chrome/")||ME(e))&&!e.includes("edge/"))return"Chrome";if(FE(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function OE(n=Ue()){return/firefox\//i.test(n)}function kE(n=Ue()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function ME(n=Ue()){return/crios\//i.test(n)}function xE(n=Ue()){return/iemobile/i.test(n)}function FE(n=Ue()){return/android/i.test(n)}function LE(n=Ue()){return/blackberry/i.test(n)}function VE(n=Ue()){return/webos/i.test(n)}function Cg(n,e=[]){let t;switch(n){case"Browser":t=gg(Ue());break;case"Worker":t=`${gg(Ue())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${nr}/${r}`}var Eu=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=s=>new Promise((a,c)=>{try{let u=e(s);a(u)}catch(u){c(u)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return D(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)yield r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function UE(t){return D(this,arguments,function*(n,e={}){return wo(n,"GET","/v2/passwordPolicy",Ig(n,e))})}var BE=6,Iu=class{constructor(e){var t,r,i,s;let a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=a.minPasswordLength)!==null&&t!==void 0?t:BE,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,s,a,c;let u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(t=u.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(s=u.containsUppercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(a=u.containsNumericCharacter)!==null&&a!==void 0?a:!0),u.isValid&&(u.isValid=(c=u.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),u}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var Tu=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new _o(this),this.idTokenSubscription=new _o(this),this.beforeStateQueue=new Eu(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=wg,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=En(t)),this._initializationPromise=this.queue(()=>D(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield vo.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return D(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return D(this,null,function*(){try{let t=yield Dg(this,{idToken:e}),r=yield Si._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return D(this,null,function*(){var t;if(tr(this.app)){let a=this.app.settings.authIdToken;return a?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(c,c))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,s=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let a=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,c=i?._redirectEventId,u=yield this.tryRedirectSignIn(e);(!a||a===c)&&u?.user&&(i=u.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(i)}catch(a){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return re(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return D(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return D(this,null,function*(){try{yield yo(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=IE()}_delete(){return D(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return D(this,null,function*(){if(tr(this.app))return Promise.reject(fo(this));let t=e?Te(e):null;return t&&re(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return D(this,null,function*(){if(!this._deleted)return e&&re(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>D(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return D(this,null,function*(){return tr(this.app)?Promise.reject(fo(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return tr(this.app)?Promise.reject(fo(this)):this.queue(()=>D(this,null,function*(){yield this.assertedPersistence.setPersistence(En(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return D(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return D(this,null,function*(){let e=yield UE(this),t=new Iu(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Pt("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){return D(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),yield PE(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return D(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return D(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&En(e)||this._popupRedirectResolver;re(t,this,"argument-error"),this.redirectPersistenceManager=yield vo.create(this,[En(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return D(this,null,function*(){var t,r;return this._isInitialized&&(yield this.queue(()=>D(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return D(this,null,function*(){if(e===this.currentUser)return this.queue(()=>D(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let s=typeof t=="function"?t:t.next.bind(t),a=!1,c=this._isInitialized?Promise.resolve():this._initializationPromise;if(re(c,this,"internal-error"),c.then(()=>{a||s(this.currentUser)}),typeof t=="function"){let u=e.addObserver(t,r,i);return()=>{a=!0,u()}}else{let u=e.addObserver(t);return()=>{a=!0,u()}}}directlySetCurrentUser(e){return D(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return re(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Cg(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return D(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(t["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t})}_getAppCheckToken(){return D(this,null,function*(){var e;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&_E(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function $E(n){return Te(n)}var _o=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=Yp(t=>this.observer=t)}get next(){return re(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var jE={loadJS(){return D(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function zE(n){jE=n}function qE(n){return`__${n}${Math.floor(Math.random()*1e6)}`}function GE(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(En);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}var EC=qE("rcb"),IC=new In(3e4,6e4);var TC=new In(2e3,1e4);var AC=10*60*1e3;var DC=new In(3e4,6e4);var bC=new In(5e3,15e3);var SC=encodeURIComponent("fac");var mg="@firebase/auth",yg="1.7.9";var Au=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return D(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){re(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function WE(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function HE(n){Zt(new Xe("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:a,authDomain:c}=r.options;re(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});let u={apiKey:a,authDomain:c,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Cg(n)},d=new Tu(r,i,s,u);return GE(d,t),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Zt(new Xe("auth-internal",e=>{let t=$E(e.getProvider("auth").getImmediate());return(r=>new Au(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),we(mg,yg,WE(n)),we(mg,yg,"esm2017")}var KE=5*60,CC=jp("authIdTokenMaxAge")||KE;function QE(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}zE({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let s=Du("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",QE().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});HE("Browser");var KI="auth";var Eo=class{constructor(){return wi(KI)}};var Rg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Pg={};var tn,Ru;(function(){var n;function e(E,g){function v(){}v.prototype=g.prototype,E.D=g.prototype,E.prototype=new v,E.prototype.constructor=E,E.C=function(_,I,A){for(var y=Array(arguments.length-2),Tt=2;Tt<arguments.length;Tt++)y[Tt-2]=arguments[Tt];return g.prototype[I].apply(_,y)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(E,g,v){v||(v=0);var _=Array(16);if(typeof g=="string")for(var I=0;16>I;++I)_[I]=g.charCodeAt(v++)|g.charCodeAt(v++)<<8|g.charCodeAt(v++)<<16|g.charCodeAt(v++)<<24;else for(I=0;16>I;++I)_[I]=g[v++]|g[v++]<<8|g[v++]<<16|g[v++]<<24;g=E.g[0],v=E.g[1],I=E.g[2];var A=E.g[3],y=g+(A^v&(I^A))+_[0]+3614090360&4294967295;g=v+(y<<7&4294967295|y>>>25),y=A+(I^g&(v^I))+_[1]+3905402710&4294967295,A=g+(y<<12&4294967295|y>>>20),y=I+(v^A&(g^v))+_[2]+606105819&4294967295,I=A+(y<<17&4294967295|y>>>15),y=v+(g^I&(A^g))+_[3]+3250441966&4294967295,v=I+(y<<22&4294967295|y>>>10),y=g+(A^v&(I^A))+_[4]+4118548399&4294967295,g=v+(y<<7&4294967295|y>>>25),y=A+(I^g&(v^I))+_[5]+1200080426&4294967295,A=g+(y<<12&4294967295|y>>>20),y=I+(v^A&(g^v))+_[6]+2821735955&4294967295,I=A+(y<<17&4294967295|y>>>15),y=v+(g^I&(A^g))+_[7]+4249261313&4294967295,v=I+(y<<22&4294967295|y>>>10),y=g+(A^v&(I^A))+_[8]+1770035416&4294967295,g=v+(y<<7&4294967295|y>>>25),y=A+(I^g&(v^I))+_[9]+2336552879&4294967295,A=g+(y<<12&4294967295|y>>>20),y=I+(v^A&(g^v))+_[10]+4294925233&4294967295,I=A+(y<<17&4294967295|y>>>15),y=v+(g^I&(A^g))+_[11]+2304563134&4294967295,v=I+(y<<22&4294967295|y>>>10),y=g+(A^v&(I^A))+_[12]+1804603682&4294967295,g=v+(y<<7&4294967295|y>>>25),y=A+(I^g&(v^I))+_[13]+4254626195&4294967295,A=g+(y<<12&4294967295|y>>>20),y=I+(v^A&(g^v))+_[14]+2792965006&4294967295,I=A+(y<<17&4294967295|y>>>15),y=v+(g^I&(A^g))+_[15]+1236535329&4294967295,v=I+(y<<22&4294967295|y>>>10),y=g+(I^A&(v^I))+_[1]+4129170786&4294967295,g=v+(y<<5&4294967295|y>>>27),y=A+(v^I&(g^v))+_[6]+3225465664&4294967295,A=g+(y<<9&4294967295|y>>>23),y=I+(g^v&(A^g))+_[11]+643717713&4294967295,I=A+(y<<14&4294967295|y>>>18),y=v+(A^g&(I^A))+_[0]+3921069994&4294967295,v=I+(y<<20&4294967295|y>>>12),y=g+(I^A&(v^I))+_[5]+3593408605&4294967295,g=v+(y<<5&4294967295|y>>>27),y=A+(v^I&(g^v))+_[10]+38016083&4294967295,A=g+(y<<9&4294967295|y>>>23),y=I+(g^v&(A^g))+_[15]+3634488961&4294967295,I=A+(y<<14&4294967295|y>>>18),y=v+(A^g&(I^A))+_[4]+3889429448&4294967295,v=I+(y<<20&4294967295|y>>>12),y=g+(I^A&(v^I))+_[9]+568446438&4294967295,g=v+(y<<5&4294967295|y>>>27),y=A+(v^I&(g^v))+_[14]+3275163606&4294967295,A=g+(y<<9&4294967295|y>>>23),y=I+(g^v&(A^g))+_[3]+4107603335&4294967295,I=A+(y<<14&4294967295|y>>>18),y=v+(A^g&(I^A))+_[8]+1163531501&4294967295,v=I+(y<<20&4294967295|y>>>12),y=g+(I^A&(v^I))+_[13]+2850285829&4294967295,g=v+(y<<5&4294967295|y>>>27),y=A+(v^I&(g^v))+_[2]+4243563512&4294967295,A=g+(y<<9&4294967295|y>>>23),y=I+(g^v&(A^g))+_[7]+1735328473&4294967295,I=A+(y<<14&4294967295|y>>>18),y=v+(A^g&(I^A))+_[12]+2368359562&4294967295,v=I+(y<<20&4294967295|y>>>12),y=g+(v^I^A)+_[5]+4294588738&4294967295,g=v+(y<<4&4294967295|y>>>28),y=A+(g^v^I)+_[8]+2272392833&4294967295,A=g+(y<<11&4294967295|y>>>21),y=I+(A^g^v)+_[11]+1839030562&4294967295,I=A+(y<<16&4294967295|y>>>16),y=v+(I^A^g)+_[14]+4259657740&4294967295,v=I+(y<<23&4294967295|y>>>9),y=g+(v^I^A)+_[1]+2763975236&4294967295,g=v+(y<<4&4294967295|y>>>28),y=A+(g^v^I)+_[4]+1272893353&4294967295,A=g+(y<<11&4294967295|y>>>21),y=I+(A^g^v)+_[7]+4139469664&4294967295,I=A+(y<<16&4294967295|y>>>16),y=v+(I^A^g)+_[10]+3200236656&4294967295,v=I+(y<<23&4294967295|y>>>9),y=g+(v^I^A)+_[13]+681279174&4294967295,g=v+(y<<4&4294967295|y>>>28),y=A+(g^v^I)+_[0]+3936430074&4294967295,A=g+(y<<11&4294967295|y>>>21),y=I+(A^g^v)+_[3]+3572445317&4294967295,I=A+(y<<16&4294967295|y>>>16),y=v+(I^A^g)+_[6]+76029189&4294967295,v=I+(y<<23&4294967295|y>>>9),y=g+(v^I^A)+_[9]+3654602809&4294967295,g=v+(y<<4&4294967295|y>>>28),y=A+(g^v^I)+_[12]+3873151461&4294967295,A=g+(y<<11&4294967295|y>>>21),y=I+(A^g^v)+_[15]+530742520&4294967295,I=A+(y<<16&4294967295|y>>>16),y=v+(I^A^g)+_[2]+3299628645&4294967295,v=I+(y<<23&4294967295|y>>>9),y=g+(I^(v|~A))+_[0]+4096336452&4294967295,g=v+(y<<6&4294967295|y>>>26),y=A+(v^(g|~I))+_[7]+1126891415&4294967295,A=g+(y<<10&4294967295|y>>>22),y=I+(g^(A|~v))+_[14]+2878612391&4294967295,I=A+(y<<15&4294967295|y>>>17),y=v+(A^(I|~g))+_[5]+4237533241&4294967295,v=I+(y<<21&4294967295|y>>>11),y=g+(I^(v|~A))+_[12]+1700485571&4294967295,g=v+(y<<6&4294967295|y>>>26),y=A+(v^(g|~I))+_[3]+2399980690&4294967295,A=g+(y<<10&4294967295|y>>>22),y=I+(g^(A|~v))+_[10]+4293915773&4294967295,I=A+(y<<15&4294967295|y>>>17),y=v+(A^(I|~g))+_[1]+2240044497&4294967295,v=I+(y<<21&4294967295|y>>>11),y=g+(I^(v|~A))+_[8]+1873313359&4294967295,g=v+(y<<6&4294967295|y>>>26),y=A+(v^(g|~I))+_[15]+4264355552&4294967295,A=g+(y<<10&4294967295|y>>>22),y=I+(g^(A|~v))+_[6]+2734768916&4294967295,I=A+(y<<15&4294967295|y>>>17),y=v+(A^(I|~g))+_[13]+1309151649&4294967295,v=I+(y<<21&4294967295|y>>>11),y=g+(I^(v|~A))+_[4]+4149444226&4294967295,g=v+(y<<6&4294967295|y>>>26),y=A+(v^(g|~I))+_[11]+3174756917&4294967295,A=g+(y<<10&4294967295|y>>>22),y=I+(g^(A|~v))+_[2]+718787259&4294967295,I=A+(y<<15&4294967295|y>>>17),y=v+(A^(I|~g))+_[9]+3951481745&4294967295,E.g[0]=E.g[0]+g&4294967295,E.g[1]=E.g[1]+(I+(y<<21&4294967295|y>>>11))&4294967295,E.g[2]=E.g[2]+I&4294967295,E.g[3]=E.g[3]+A&4294967295}r.prototype.u=function(E,g){g===void 0&&(g=E.length);for(var v=g-this.blockSize,_=this.B,I=this.h,A=0;A<g;){if(I==0)for(;A<=v;)i(this,E,A),A+=this.blockSize;if(typeof E=="string"){for(;A<g;)if(_[I++]=E.charCodeAt(A++),I==this.blockSize){i(this,_),I=0;break}}else for(;A<g;)if(_[I++]=E[A++],I==this.blockSize){i(this,_),I=0;break}}this.h=I,this.o+=g},r.prototype.v=function(){var E=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);E[0]=128;for(var g=1;g<E.length-8;++g)E[g]=0;var v=8*this.o;for(g=E.length-8;g<E.length;++g)E[g]=v&255,v/=256;for(this.u(E),E=Array(16),g=v=0;4>g;++g)for(var _=0;32>_;_+=8)E[v++]=this.g[g]>>>_&255;return E};function s(E,g){var v=c;return Object.prototype.hasOwnProperty.call(v,E)?v[E]:v[E]=g(E)}function a(E,g){this.h=g;for(var v=[],_=!0,I=E.length-1;0<=I;I--){var A=E[I]|0;_&&A==g||(v[I]=A,_=!1)}this.g=v}var c={};function u(E){return-128<=E&&128>E?s(E,function(g){return new a([g|0],0>g?-1:0)}):new a([E|0],0>E?-1:0)}function d(E){if(isNaN(E)||!isFinite(E))return m;if(0>E)return C(d(-E));for(var g=[],v=1,_=0;E>=v;_++)g[_]=E/v|0,v*=4294967296;return new a(g,0)}function p(E,g){if(E.length==0)throw Error("number format error: empty string");if(g=g||10,2>g||36<g)throw Error("radix out of range: "+g);if(E.charAt(0)=="-")return C(p(E.substring(1),g));if(0<=E.indexOf("-"))throw Error('number format error: interior "-" character');for(var v=d(Math.pow(g,8)),_=m,I=0;I<E.length;I+=8){var A=Math.min(8,E.length-I),y=parseInt(E.substring(I,I+A),g);8>A?(A=d(Math.pow(g,A)),_=_.j(A).add(d(y))):(_=_.j(v),_=_.add(d(y)))}return _}var m=u(0),w=u(1),b=u(16777216);n=a.prototype,n.m=function(){if(N(this))return-C(this).m();for(var E=0,g=1,v=0;v<this.g.length;v++){var _=this.i(v);E+=(0<=_?_:4294967296+_)*g,g*=4294967296}return E},n.toString=function(E){if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(P(this))return"0";if(N(this))return"-"+C(this).toString(E);for(var g=d(Math.pow(E,6)),v=this,_="";;){var I=ne(v,g).g;v=U(v,I.j(g));var A=((0<v.g.length?v.g[0]:v.h)>>>0).toString(E);if(v=I,P(v))return A+_;for(;6>A.length;)A="0"+A;_=A+_}},n.i=function(E){return 0>E?0:E<this.g.length?this.g[E]:this.h};function P(E){if(E.h!=0)return!1;for(var g=0;g<E.g.length;g++)if(E.g[g]!=0)return!1;return!0}function N(E){return E.h==-1}n.l=function(E){return E=U(this,E),N(E)?-1:P(E)?0:1};function C(E){for(var g=E.g.length,v=[],_=0;_<g;_++)v[_]=~E.g[_];return new a(v,~E.h).add(w)}n.abs=function(){return N(this)?C(this):this},n.add=function(E){for(var g=Math.max(this.g.length,E.g.length),v=[],_=0,I=0;I<=g;I++){var A=_+(this.i(I)&65535)+(E.i(I)&65535),y=(A>>>16)+(this.i(I)>>>16)+(E.i(I)>>>16);_=y>>>16,A&=65535,y&=65535,v[I]=y<<16|A}return new a(v,v[v.length-1]&-2147483648?-1:0)};function U(E,g){return E.add(C(g))}n.j=function(E){if(P(this)||P(E))return m;if(N(this))return N(E)?C(this).j(C(E)):C(C(this).j(E));if(N(E))return C(this.j(C(E)));if(0>this.l(b)&&0>E.l(b))return d(this.m()*E.m());for(var g=this.g.length+E.g.length,v=[],_=0;_<2*g;_++)v[_]=0;for(_=0;_<this.g.length;_++)for(var I=0;I<E.g.length;I++){var A=this.i(_)>>>16,y=this.i(_)&65535,Tt=E.i(I)>>>16,Lr=E.i(I)&65535;v[2*_+2*I]+=y*Lr,z(v,2*_+2*I),v[2*_+2*I+1]+=A*Lr,z(v,2*_+2*I+1),v[2*_+2*I+1]+=y*Tt,z(v,2*_+2*I+1),v[2*_+2*I+2]+=A*Tt,z(v,2*_+2*I+2)}for(_=0;_<g;_++)v[_]=v[2*_+1]<<16|v[2*_];for(_=g;_<2*g;_++)v[_]=0;return new a(v,0)};function z(E,g){for(;(E[g]&65535)!=E[g];)E[g+1]+=E[g]>>>16,E[g]&=65535,g++}function L(E,g){this.g=E,this.h=g}function ne(E,g){if(P(g))throw Error("division by zero");if(P(E))return new L(m,m);if(N(E))return g=ne(C(E),g),new L(C(g.g),C(g.h));if(N(g))return g=ne(E,C(g)),new L(C(g.g),g.h);if(30<E.g.length){if(N(E)||N(g))throw Error("slowDivide_ only works with positive integers.");for(var v=w,_=g;0>=_.l(E);)v=le(v),_=le(_);var I=X(v,1),A=X(_,1);for(_=X(_,2),v=X(v,2);!P(_);){var y=A.add(_);0>=y.l(E)&&(I=I.add(v),A=y),_=X(_,1),v=X(v,1)}return g=U(E,I.j(g)),new L(I,g)}for(I=m;0<=E.l(g);){for(v=Math.max(1,Math.floor(E.m()/g.m())),_=Math.ceil(Math.log(v)/Math.LN2),_=48>=_?1:Math.pow(2,_-48),A=d(v),y=A.j(g);N(y)||0<y.l(E);)v-=_,A=d(v),y=A.j(g);P(A)&&(A=w),I=I.add(A),E=U(E,y)}return new L(I,E)}n.A=function(E){return ne(this,E).h},n.and=function(E){for(var g=Math.max(this.g.length,E.g.length),v=[],_=0;_<g;_++)v[_]=this.i(_)&E.i(_);return new a(v,this.h&E.h)},n.or=function(E){for(var g=Math.max(this.g.length,E.g.length),v=[],_=0;_<g;_++)v[_]=this.i(_)|E.i(_);return new a(v,this.h|E.h)},n.xor=function(E){for(var g=Math.max(this.g.length,E.g.length),v=[],_=0;_<g;_++)v[_]=this.i(_)^E.i(_);return new a(v,this.h^E.h)};function le(E){for(var g=E.g.length+1,v=[],_=0;_<g;_++)v[_]=E.i(_)<<1|E.i(_-1)>>>31;return new a(v,E.h)}function X(E,g){var v=g>>5;g%=32;for(var _=E.g.length-v,I=[],A=0;A<_;A++)I[A]=0<g?E.i(A+v)>>>g|E.i(A+v+1)<<32-g:E.i(A+v);return new a(I,E.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Ru=Pg.Md5=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=d,a.fromString=p,tn=Pg.Integer=a}).apply(typeof Rg<"u"?Rg:typeof self<"u"?self:typeof window<"u"?window:{});var Io=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ot={};var Pu,QI,sr,Nu,Ci,To,Ou,ku,Mu;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(o,l,h){return o==Array.prototype||o==Object.prototype||(o[l]=h.value),o};function t(o){o=[typeof globalThis=="object"&&globalThis,o,typeof window=="object"&&window,typeof self=="object"&&self,typeof Io=="object"&&Io];for(var l=0;l<o.length;++l){var h=o[l];if(h&&h.Math==Math)return h}throw Error("Cannot find global object")}var r=t(this);function i(o,l){if(l)e:{var h=r;o=o.split(".");for(var f=0;f<o.length-1;f++){var T=o[f];if(!(T in h))break e;h=h[T]}o=o[o.length-1],f=h[o],l=l(f),l!=f&&l!=null&&e(h,o,{configurable:!0,writable:!0,value:l})}}function s(o,l){o instanceof String&&(o+="");var h=0,f=!1,T={next:function(){if(!f&&h<o.length){var S=h++;return{value:l(S,o[S]),done:!1}}return f=!0,{done:!0,value:void 0}}};return T[Symbol.iterator]=function(){return T},T}i("Array.prototype.values",function(o){return o||function(){return s(this,function(l,h){return h})}});var a=a||{},c=this||self;function u(o){var l=typeof o;return l=l!="object"?l:o?Array.isArray(o)?"array":l:"null",l=="array"||l=="object"&&typeof o.length=="number"}function d(o){var l=typeof o;return l=="object"&&o!=null||l=="function"}function p(o,l,h){return o.call.apply(o.bind,arguments)}function m(o,l,h){if(!o)throw Error();if(2<arguments.length){var f=Array.prototype.slice.call(arguments,2);return function(){var T=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(T,f),o.apply(l,T)}}return function(){return o.apply(l,arguments)}}function w(o,l,h){return w=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?p:m,w.apply(null,arguments)}function b(o,l){var h=Array.prototype.slice.call(arguments,1);return function(){var f=h.slice();return f.push.apply(f,arguments),o.apply(this,f)}}function P(o,l){function h(){}h.prototype=l.prototype,o.aa=l.prototype,o.prototype=new h,o.prototype.constructor=o,o.Qb=function(f,T,S){for(var k=Array(arguments.length-2),ae=2;ae<arguments.length;ae++)k[ae-2]=arguments[ae];return l.prototype[T].apply(f,k)}}function N(o){let l=o.length;if(0<l){let h=Array(l);for(let f=0;f<l;f++)h[f]=o[f];return h}return[]}function C(o,l){for(let h=1;h<arguments.length;h++){let f=arguments[h];if(u(f)){let T=o.length||0,S=f.length||0;o.length=T+S;for(let k=0;k<S;k++)o[T+k]=f[k]}else o.push(f)}}class U{constructor(l,h){this.i=l,this.j=h,this.h=0,this.g=null}get(){let l;return 0<this.h?(this.h--,l=this.g,this.g=l.next,l.next=null):l=this.i(),l}}function z(o){return/^[\s\xa0]*$/.test(o)}function L(){var o=c.navigator;return o&&(o=o.userAgent)?o:""}function ne(o){return ne[" "](o),o}ne[" "]=function(){};var le=L().indexOf("Gecko")!=-1&&!(L().toLowerCase().indexOf("webkit")!=-1&&L().indexOf("Edge")==-1)&&!(L().indexOf("Trident")!=-1||L().indexOf("MSIE")!=-1)&&L().indexOf("Edge")==-1;function X(o,l,h){for(let f in o)l.call(h,o[f],f,o)}function E(o,l){for(let h in o)l.call(void 0,o[h],h,o)}function g(o){let l={};for(let h in o)l[h]=o[h];return l}let v="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function _(o,l){let h,f;for(let T=1;T<arguments.length;T++){f=arguments[T];for(h in f)o[h]=f[h];for(let S=0;S<v.length;S++)h=v[S],Object.prototype.hasOwnProperty.call(f,h)&&(o[h]=f[h])}}function I(o){var l=1;o=o.split(":");let h=[];for(;0<l&&o.length;)h.push(o.shift()),l--;return o.length&&h.push(o.join(":")),h}function A(o){c.setTimeout(()=>{throw o},0)}function y(){var o=Ma;let l=null;return o.g&&(l=o.g,o.g=o.g.next,o.g||(o.h=null),l.next=null),l}class Tt{constructor(){this.h=this.g=null}add(l,h){let f=Lr.get();f.set(l,h),this.h?this.h.next=f:this.g=f,this.h=f}}var Lr=new U(()=>new dv,o=>o.reset());class dv{constructor(){this.next=this.g=this.h=null}set(l,h){this.h=l,this.g=h,this.next=null}reset(){this.next=this.g=this.h=null}}let Vr,Ur=!1,Ma=new Tt,Md=()=>{let o=c.Promise.resolve(void 0);Vr=()=>{o.then(fv)}};var fv=()=>{for(var o;o=y();){try{o.h.call(o.g)}catch(h){A(h)}var l=Lr;l.j(o),100>l.h&&(l.h++,o.next=l.g,l.g=o)}Ur=!1};function Bt(){this.s=this.s,this.C=this.C}Bt.prototype.s=!1,Bt.prototype.ma=function(){this.s||(this.s=!0,this.N())},Bt.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function be(o,l){this.type=o,this.g=this.target=l,this.defaultPrevented=!1}be.prototype.h=function(){this.defaultPrevented=!0};var pv=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var o=!1,l=Object.defineProperty({},"passive",{get:function(){o=!0}});try{let h=()=>{};c.addEventListener("test",h,l),c.removeEventListener("test",h,l)}catch{}return o}();function Br(o,l){if(be.call(this,o?o.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,o){var h=this.type=o.type,f=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:null;if(this.target=o.target||o.srcElement,this.g=l,l=o.relatedTarget){if(le){e:{try{ne(l.nodeName);var T=!0;break e}catch{}T=!1}T||(l=null)}}else h=="mouseover"?l=o.fromElement:h=="mouseout"&&(l=o.toElement);this.relatedTarget=l,f?(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0):(this.clientX=o.clientX!==void 0?o.clientX:o.pageX,this.clientY=o.clientY!==void 0?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0),this.button=o.button,this.key=o.key||"",this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.pointerId=o.pointerId||0,this.pointerType=typeof o.pointerType=="string"?o.pointerType:gv[o.pointerType]||"",this.state=o.state,this.i=o,o.defaultPrevented&&Br.aa.h.call(this)}}P(Br,be);var gv={2:"touch",3:"pen",4:"mouse"};Br.prototype.h=function(){Br.aa.h.call(this);var o=this.i;o.preventDefault?o.preventDefault():o.returnValue=!1};var $r="closure_listenable_"+(1e6*Math.random()|0),mv=0;function yv(o,l,h,f,T){this.listener=o,this.proxy=null,this.src=l,this.type=h,this.capture=!!f,this.ha=T,this.key=++mv,this.da=this.fa=!1}function ws(o){o.da=!0,o.listener=null,o.proxy=null,o.src=null,o.ha=null}function Es(o){this.src=o,this.g={},this.h=0}Es.prototype.add=function(o,l,h,f,T){var S=o.toString();o=this.g[S],o||(o=this.g[S]=[],this.h++);var k=Fa(o,l,f,T);return-1<k?(l=o[k],h||(l.fa=!1)):(l=new yv(l,this.src,S,!!f,T),l.fa=h,o.push(l)),l};function xa(o,l){var h=l.type;if(h in o.g){var f=o.g[h],T=Array.prototype.indexOf.call(f,l,void 0),S;(S=0<=T)&&Array.prototype.splice.call(f,T,1),S&&(ws(l),o.g[h].length==0&&(delete o.g[h],o.h--))}}function Fa(o,l,h,f){for(var T=0;T<o.length;++T){var S=o[T];if(!S.da&&S.listener==l&&S.capture==!!h&&S.ha==f)return T}return-1}var La="closure_lm_"+(1e6*Math.random()|0),Va={};function xd(o,l,h,f,T){if(f&&f.once)return Ld(o,l,h,f,T);if(Array.isArray(l)){for(var S=0;S<l.length;S++)xd(o,l[S],h,f,T);return null}return h=ja(h),o&&o[$r]?o.K(l,h,d(f)?!!f.capture:!!f,T):Fd(o,l,h,!1,f,T)}function Fd(o,l,h,f,T,S){if(!l)throw Error("Invalid event type");var k=d(T)?!!T.capture:!!T,ae=Ba(o);if(ae||(o[La]=ae=new Es(o)),h=ae.add(l,h,f,k,S),h.proxy)return h;if(f=vv(),h.proxy=f,f.src=o,f.listener=h,o.addEventListener)pv||(T=k),T===void 0&&(T=!1),o.addEventListener(l.toString(),f,T);else if(o.attachEvent)o.attachEvent(Ud(l.toString()),f);else if(o.addListener&&o.removeListener)o.addListener(f);else throw Error("addEventListener and attachEvent are unavailable.");return h}function vv(){function o(h){return l.call(o.src,o.listener,h)}let l=_v;return o}function Ld(o,l,h,f,T){if(Array.isArray(l)){for(var S=0;S<l.length;S++)Ld(o,l[S],h,f,T);return null}return h=ja(h),o&&o[$r]?o.L(l,h,d(f)?!!f.capture:!!f,T):Fd(o,l,h,!0,f,T)}function Vd(o,l,h,f,T){if(Array.isArray(l))for(var S=0;S<l.length;S++)Vd(o,l[S],h,f,T);else f=d(f)?!!f.capture:!!f,h=ja(h),o&&o[$r]?(o=o.i,l=String(l).toString(),l in o.g&&(S=o.g[l],h=Fa(S,h,f,T),-1<h&&(ws(S[h]),Array.prototype.splice.call(S,h,1),S.length==0&&(delete o.g[l],o.h--)))):o&&(o=Ba(o))&&(l=o.g[l.toString()],o=-1,l&&(o=Fa(l,h,f,T)),(h=-1<o?l[o]:null)&&Ua(h))}function Ua(o){if(typeof o!="number"&&o&&!o.da){var l=o.src;if(l&&l[$r])xa(l.i,o);else{var h=o.type,f=o.proxy;l.removeEventListener?l.removeEventListener(h,f,o.capture):l.detachEvent?l.detachEvent(Ud(h),f):l.addListener&&l.removeListener&&l.removeListener(f),(h=Ba(l))?(xa(h,o),h.h==0&&(h.src=null,l[La]=null)):ws(o)}}}function Ud(o){return o in Va?Va[o]:Va[o]="on"+o}function _v(o,l){if(o.da)o=!0;else{l=new Br(l,this);var h=o.listener,f=o.ha||o.src;o.fa&&Ua(o),o=h.call(f,l)}return o}function Ba(o){return o=o[La],o instanceof Es?o:null}var $a="__closure_events_fn_"+(1e9*Math.random()>>>0);function ja(o){return typeof o=="function"?o:(o[$a]||(o[$a]=function(l){return o.handleEvent(l)}),o[$a])}function Se(){Bt.call(this),this.i=new Es(this),this.M=this,this.F=null}P(Se,Bt),Se.prototype[$r]=!0,Se.prototype.removeEventListener=function(o,l,h,f){Vd(this,o,l,h,f)};function Me(o,l){var h,f=o.F;if(f)for(h=[];f;f=f.F)h.push(f);if(o=o.M,f=l.type||l,typeof l=="string")l=new be(l,o);else if(l instanceof be)l.target=l.target||o;else{var T=l;l=new be(f,o),_(l,T)}if(T=!0,h)for(var S=h.length-1;0<=S;S--){var k=l.g=h[S];T=Is(k,f,!0,l)&&T}if(k=l.g=o,T=Is(k,f,!0,l)&&T,T=Is(k,f,!1,l)&&T,h)for(S=0;S<h.length;S++)k=l.g=h[S],T=Is(k,f,!1,l)&&T}Se.prototype.N=function(){if(Se.aa.N.call(this),this.i){var o=this.i,l;for(l in o.g){for(var h=o.g[l],f=0;f<h.length;f++)ws(h[f]);delete o.g[l],o.h--}}this.F=null},Se.prototype.K=function(o,l,h,f){return this.i.add(String(o),l,!1,h,f)},Se.prototype.L=function(o,l,h,f){return this.i.add(String(o),l,!0,h,f)};function Is(o,l,h,f){if(l=o.i.g[String(l)],!l)return!0;l=l.concat();for(var T=!0,S=0;S<l.length;++S){var k=l[S];if(k&&!k.da&&k.capture==h){var ae=k.listener,Ie=k.ha||k.src;k.fa&&xa(o.i,k),T=ae.call(Ie,f)!==!1&&T}}return T&&!f.defaultPrevented}function Bd(o,l,h){if(typeof o=="function")h&&(o=w(o,h));else if(o&&typeof o.handleEvent=="function")o=w(o.handleEvent,o);else throw Error("Invalid listener argument");return 2147483647<Number(l)?-1:c.setTimeout(o,l||0)}function $d(o){o.g=Bd(()=>{o.g=null,o.i&&(o.i=!1,$d(o))},o.l);let l=o.h;o.h=null,o.m.apply(null,l)}class wv extends Bt{constructor(l,h){super(),this.m=l,this.l=h,this.h=null,this.i=!1,this.g=null}j(l){this.h=arguments,this.g?this.i=!0:$d(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function jr(o){Bt.call(this),this.h=o,this.g={}}P(jr,Bt);var jd=[];function zd(o){X(o.g,function(l,h){this.g.hasOwnProperty(h)&&Ua(l)},o),o.g={}}jr.prototype.N=function(){jr.aa.N.call(this),zd(this)},jr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var za=c.JSON.stringify,Ev=c.JSON.parse,Iv=class{stringify(o){return c.JSON.stringify(o,void 0)}parse(o){return c.JSON.parse(o,void 0)}};function qa(){}qa.prototype.h=null;function qd(o){return o.h||(o.h=o.i())}function Gd(){}var zr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ga(){be.call(this,"d")}P(Ga,be);function Wa(){be.call(this,"c")}P(Wa,be);var un={},Wd=null;function Ts(){return Wd=Wd||new Se}un.La="serverreachability";function Hd(o){be.call(this,un.La,o)}P(Hd,be);function qr(o){let l=Ts();Me(l,new Hd(l))}un.STAT_EVENT="statevent";function Kd(o,l){be.call(this,un.STAT_EVENT,o),this.stat=l}P(Kd,be);function xe(o){let l=Ts();Me(l,new Kd(l,o))}un.Ma="timingevent";function Qd(o,l){be.call(this,un.Ma,o),this.size=l}P(Qd,be);function Gr(o,l){if(typeof o!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){o()},l)}function Wr(){this.g=!0}Wr.prototype.xa=function(){this.g=!1};function Tv(o,l,h,f,T,S){o.info(function(){if(o.g)if(S)for(var k="",ae=S.split("&"),Ie=0;Ie<ae.length;Ie++){var ee=ae[Ie].split("=");if(1<ee.length){var Ce=ee[0];ee=ee[1];var Re=Ce.split("_");k=2<=Re.length&&Re[1]=="type"?k+(Ce+"="+ee+"&"):k+(Ce+"=redacted&")}}else k=null;else k=S;return"XMLHTTP REQ ("+f+") [attempt "+T+"]: "+l+`
`+h+`
`+k})}function Av(o,l,h,f,T,S,k){o.info(function(){return"XMLHTTP RESP ("+f+") [ attempt "+T+"]: "+l+`
`+h+`
`+S+" "+k})}function $n(o,l,h,f){o.info(function(){return"XMLHTTP TEXT ("+l+"): "+bv(o,h)+(f?" "+f:"")})}function Dv(o,l){o.info(function(){return"TIMEOUT: "+l})}Wr.prototype.info=function(){};function bv(o,l){if(!o.g)return l;if(!l)return null;try{var h=JSON.parse(l);if(h){for(o=0;o<h.length;o++)if(Array.isArray(h[o])){var f=h[o];if(!(2>f.length)){var T=f[1];if(Array.isArray(T)&&!(1>T.length)){var S=T[0];if(S!="noop"&&S!="stop"&&S!="close")for(var k=1;k<T.length;k++)T[k]=""}}}}return za(h)}catch{return l}}var As={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Yd={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ha;function Ds(){}P(Ds,qa),Ds.prototype.g=function(){return new XMLHttpRequest},Ds.prototype.i=function(){return{}},Ha=new Ds;function $t(o,l,h,f){this.j=o,this.i=l,this.l=h,this.R=f||1,this.U=new jr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Jd}function Jd(){this.i=null,this.g="",this.h=!1}var Xd={},Ka={};function Qa(o,l,h){o.L=1,o.v=Rs(At(l)),o.m=h,o.P=!0,Zd(o,null)}function Zd(o,l){o.F=Date.now(),bs(o),o.A=At(o.v);var h=o.A,f=o.R;Array.isArray(f)||(f=[String(f)]),pf(h.i,"t",f),o.C=0,h=o.j.J,o.h=new Jd,o.g=Of(o.j,h?l:null,!o.m),0<o.O&&(o.M=new wv(w(o.Y,o,o.g),o.O)),l=o.U,h=o.g,f=o.ca;var T="readystatechange";Array.isArray(T)||(T&&(jd[0]=T.toString()),T=jd);for(var S=0;S<T.length;S++){var k=xd(h,T[S],f||l.handleEvent,!1,l.h||l);if(!k)break;l.g[k.key]=k}l=o.H?g(o.H):{},o.m?(o.u||(o.u="POST"),l["Content-Type"]="application/x-www-form-urlencoded",o.g.ea(o.A,o.u,o.m,l)):(o.u="GET",o.g.ea(o.A,o.u,null,l)),qr(),Tv(o.i,o.u,o.A,o.l,o.R,o.m)}$t.prototype.ca=function(o){o=o.target;let l=this.M;l&&Dt(o)==3?l.j():this.Y(o)},$t.prototype.Y=function(o){try{if(o==this.g)e:{let Re=Dt(this.g);var l=this.g.Ba();let qn=this.g.Z();if(!(3>Re)&&(Re!=3||this.g&&(this.h.h||this.g.oa()||Ef(this.g)))){this.J||Re!=4||l==7||(l==8||0>=qn?qr(3):qr(2)),Ya(this);var h=this.g.Z();this.X=h;t:if(ef(this)){var f=Ef(this.g);o="";var T=f.length,S=Dt(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ln(this),Hr(this);var k="";break t}this.h.i=new c.TextDecoder}for(l=0;l<T;l++)this.h.h=!0,o+=this.h.i.decode(f[l],{stream:!(S&&l==T-1)});f.length=0,this.h.g+=o,this.C=0,k=this.h.g}else k=this.g.oa();if(this.o=h==200,Av(this.i,this.u,this.A,this.l,this.R,Re,h),this.o){if(this.T&&!this.K){t:{if(this.g){var ae,Ie=this.g;if((ae=Ie.g?Ie.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!z(ae)){var ee=ae;break t}}ee=null}if(h=ee)$n(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ja(this,h);else{this.o=!1,this.s=3,xe(12),ln(this),Hr(this);break e}}if(this.P){h=!0;let tt;for(;!this.J&&this.C<k.length;)if(tt=Sv(this,k),tt==Ka){Re==4&&(this.s=4,xe(14),h=!1),$n(this.i,this.l,null,"[Incomplete Response]");break}else if(tt==Xd){this.s=4,xe(15),$n(this.i,this.l,k,"[Invalid Chunk]"),h=!1;break}else $n(this.i,this.l,tt,null),Ja(this,tt);if(ef(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Re!=4||k.length!=0||this.h.h||(this.s=1,xe(16),h=!1),this.o=this.o&&h,!h)$n(this.i,this.l,k,"[Invalid Chunked Response]"),ln(this),Hr(this);else if(0<k.length&&!this.W){this.W=!0;var Ce=this.j;Ce.g==this&&Ce.ba&&!Ce.M&&(Ce.j.info("Great, no buffering proxy detected. Bytes received: "+k.length),rc(Ce),Ce.M=!0,xe(11))}}else $n(this.i,this.l,k,null),Ja(this,k);Re==4&&ln(this),this.o&&!this.J&&(Re==4?Cf(this.j,this):(this.o=!1,bs(this)))}else qv(this.g),h==400&&0<k.indexOf("Unknown SID")?(this.s=3,xe(12)):(this.s=0,xe(13)),ln(this),Hr(this)}}}catch{}finally{}};function ef(o){return o.g?o.u=="GET"&&o.L!=2&&o.j.Ca:!1}function Sv(o,l){var h=o.C,f=l.indexOf(`
`,h);return f==-1?Ka:(h=Number(l.substring(h,f)),isNaN(h)?Xd:(f+=1,f+h>l.length?Ka:(l=l.slice(f,f+h),o.C=f+h,l)))}$t.prototype.cancel=function(){this.J=!0,ln(this)};function bs(o){o.S=Date.now()+o.I,tf(o,o.I)}function tf(o,l){if(o.B!=null)throw Error("WatchDog timer not null");o.B=Gr(w(o.ba,o),l)}function Ya(o){o.B&&(c.clearTimeout(o.B),o.B=null)}$t.prototype.ba=function(){this.B=null;let o=Date.now();0<=o-this.S?(Dv(this.i,this.A),this.L!=2&&(qr(),xe(17)),ln(this),this.s=2,Hr(this)):tf(this,this.S-o)};function Hr(o){o.j.G==0||o.J||Cf(o.j,o)}function ln(o){Ya(o);var l=o.M;l&&typeof l.ma=="function"&&l.ma(),o.M=null,zd(o.U),o.g&&(l=o.g,o.g=null,l.abort(),l.ma())}function Ja(o,l){try{var h=o.j;if(h.G!=0&&(h.g==o||Xa(h.h,o))){if(!o.K&&Xa(h.h,o)&&h.G==3){try{var f=h.Da.g.parse(l)}catch{f=null}if(Array.isArray(f)&&f.length==3){var T=f;if(T[0]==0){e:if(!h.u){if(h.g)if(h.g.F+3e3<o.F)Ms(h),Os(h);else break e;nc(h),xe(18)}}else h.za=T[1],0<h.za-h.T&&37500>T[2]&&h.F&&h.v==0&&!h.C&&(h.C=Gr(w(h.Za,h),6e3));if(1>=sf(h.h)&&h.ca){try{h.ca()}catch{}h.ca=void 0}}else dn(h,11)}else if((o.K||h.g==o)&&Ms(h),!z(l))for(T=h.Da.g.parse(l),l=0;l<T.length;l++){let ee=T[l];if(h.T=ee[0],ee=ee[1],h.G==2)if(ee[0]=="c"){h.K=ee[1],h.ia=ee[2];let Ce=ee[3];Ce!=null&&(h.la=Ce,h.j.info("VER="+h.la));let Re=ee[4];Re!=null&&(h.Aa=Re,h.j.info("SVER="+h.Aa));let qn=ee[5];qn!=null&&typeof qn=="number"&&0<qn&&(f=1.5*qn,h.L=f,h.j.info("backChannelRequestTimeoutMs_="+f)),f=h;let tt=o.g;if(tt){let Fs=tt.g?tt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Fs){var S=f.h;S.g||Fs.indexOf("spdy")==-1&&Fs.indexOf("quic")==-1&&Fs.indexOf("h2")==-1||(S.j=S.l,S.g=new Set,S.h&&(Za(S,S.h),S.h=null))}if(f.D){let ic=tt.g?tt.g.getResponseHeader("X-HTTP-Session-Id"):null;ic&&(f.ya=ic,ce(f.I,f.D,ic))}}h.G=3,h.l&&h.l.ua(),h.ba&&(h.R=Date.now()-o.F,h.j.info("Handshake RTT: "+h.R+"ms")),f=h;var k=o;if(f.qa=Nf(f,f.J?f.ia:null,f.W),k.K){of(f.h,k);var ae=k,Ie=f.L;Ie&&(ae.I=Ie),ae.B&&(Ya(ae),bs(ae)),f.g=k}else bf(f);0<h.i.length&&ks(h)}else ee[0]!="stop"&&ee[0]!="close"||dn(h,7);else h.G==3&&(ee[0]=="stop"||ee[0]=="close"?ee[0]=="stop"?dn(h,7):tc(h):ee[0]!="noop"&&h.l&&h.l.ta(ee),h.v=0)}}qr(4)}catch{}}var Cv=class{constructor(o,l){this.g=o,this.map=l}};function nf(o){this.l=o||10,c.PerformanceNavigationTiming?(o=c.performance.getEntriesByType("navigation"),o=0<o.length&&(o[0].nextHopProtocol=="hq"||o[0].nextHopProtocol=="h2")):o=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=o?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function rf(o){return o.h?!0:o.g?o.g.size>=o.j:!1}function sf(o){return o.h?1:o.g?o.g.size:0}function Xa(o,l){return o.h?o.h==l:o.g?o.g.has(l):!1}function Za(o,l){o.g?o.g.add(l):o.h=l}function of(o,l){o.h&&o.h==l?o.h=null:o.g&&o.g.has(l)&&o.g.delete(l)}nf.prototype.cancel=function(){if(this.i=af(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let o of this.g.values())o.cancel();this.g.clear()}};function af(o){if(o.h!=null)return o.i.concat(o.h.D);if(o.g!=null&&o.g.size!==0){let l=o.i;for(let h of o.g.values())l=l.concat(h.D);return l}return N(o.i)}function Rv(o){if(o.V&&typeof o.V=="function")return o.V();if(typeof Map<"u"&&o instanceof Map||typeof Set<"u"&&o instanceof Set)return Array.from(o.values());if(typeof o=="string")return o.split("");if(u(o)){for(var l=[],h=o.length,f=0;f<h;f++)l.push(o[f]);return l}l=[],h=0;for(f in o)l[h++]=o[f];return l}function Pv(o){if(o.na&&typeof o.na=="function")return o.na();if(!o.V||typeof o.V!="function"){if(typeof Map<"u"&&o instanceof Map)return Array.from(o.keys());if(!(typeof Set<"u"&&o instanceof Set)){if(u(o)||typeof o=="string"){var l=[];o=o.length;for(var h=0;h<o;h++)l.push(h);return l}l=[],h=0;for(let f in o)l[h++]=f;return l}}}function cf(o,l){if(o.forEach&&typeof o.forEach=="function")o.forEach(l,void 0);else if(u(o)||typeof o=="string")Array.prototype.forEach.call(o,l,void 0);else for(var h=Pv(o),f=Rv(o),T=f.length,S=0;S<T;S++)l.call(void 0,f[S],h&&h[S],o)}var uf=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Nv(o,l){if(o){o=o.split("&");for(var h=0;h<o.length;h++){var f=o[h].indexOf("="),T=null;if(0<=f){var S=o[h].substring(0,f);T=o[h].substring(f+1)}else S=o[h];l(S,T?decodeURIComponent(T.replace(/\+/g," ")):"")}}}function hn(o){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,o instanceof hn){this.h=o.h,Ss(this,o.j),this.o=o.o,this.g=o.g,Cs(this,o.s),this.l=o.l;var l=o.i,h=new Yr;h.i=l.i,l.g&&(h.g=new Map(l.g),h.h=l.h),lf(this,h),this.m=o.m}else o&&(l=String(o).match(uf))?(this.h=!1,Ss(this,l[1]||"",!0),this.o=Kr(l[2]||""),this.g=Kr(l[3]||"",!0),Cs(this,l[4]),this.l=Kr(l[5]||"",!0),lf(this,l[6]||"",!0),this.m=Kr(l[7]||"")):(this.h=!1,this.i=new Yr(null,this.h))}hn.prototype.toString=function(){var o=[],l=this.j;l&&o.push(Qr(l,hf,!0),":");var h=this.g;return(h||l=="file")&&(o.push("//"),(l=this.o)&&o.push(Qr(l,hf,!0),"@"),o.push(encodeURIComponent(String(h)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h=this.s,h!=null&&o.push(":",String(h))),(h=this.l)&&(this.g&&h.charAt(0)!="/"&&o.push("/"),o.push(Qr(h,h.charAt(0)=="/"?Mv:kv,!0))),(h=this.i.toString())&&o.push("?",h),(h=this.m)&&o.push("#",Qr(h,Fv)),o.join("")};function At(o){return new hn(o)}function Ss(o,l,h){o.j=h?Kr(l,!0):l,o.j&&(o.j=o.j.replace(/:$/,""))}function Cs(o,l){if(l){if(l=Number(l),isNaN(l)||0>l)throw Error("Bad port number "+l);o.s=l}else o.s=null}function lf(o,l,h){l instanceof Yr?(o.i=l,Lv(o.i,o.h)):(h||(l=Qr(l,xv)),o.i=new Yr(l,o.h))}function ce(o,l,h){o.i.set(l,h)}function Rs(o){return ce(o,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),o}function Kr(o,l){return o?l?decodeURI(o.replace(/%25/g,"%2525")):decodeURIComponent(o):""}function Qr(o,l,h){return typeof o=="string"?(o=encodeURI(o).replace(l,Ov),h&&(o=o.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),o):null}function Ov(o){return o=o.charCodeAt(0),"%"+(o>>4&15).toString(16)+(o&15).toString(16)}var hf=/[#\/\?@]/g,kv=/[#\?:]/g,Mv=/[#\?]/g,xv=/[#\?@]/g,Fv=/#/g;function Yr(o,l){this.h=this.g=null,this.i=o||null,this.j=!!l}function jt(o){o.g||(o.g=new Map,o.h=0,o.i&&Nv(o.i,function(l,h){o.add(decodeURIComponent(l.replace(/\+/g," ")),h)}))}n=Yr.prototype,n.add=function(o,l){jt(this),this.i=null,o=jn(this,o);var h=this.g.get(o);return h||this.g.set(o,h=[]),h.push(l),this.h+=1,this};function df(o,l){jt(o),l=jn(o,l),o.g.has(l)&&(o.i=null,o.h-=o.g.get(l).length,o.g.delete(l))}function ff(o,l){return jt(o),l=jn(o,l),o.g.has(l)}n.forEach=function(o,l){jt(this),this.g.forEach(function(h,f){h.forEach(function(T){o.call(l,T,f,this)},this)},this)},n.na=function(){jt(this);let o=Array.from(this.g.values()),l=Array.from(this.g.keys()),h=[];for(let f=0;f<l.length;f++){let T=o[f];for(let S=0;S<T.length;S++)h.push(l[f])}return h},n.V=function(o){jt(this);let l=[];if(typeof o=="string")ff(this,o)&&(l=l.concat(this.g.get(jn(this,o))));else{o=Array.from(this.g.values());for(let h=0;h<o.length;h++)l=l.concat(o[h])}return l},n.set=function(o,l){return jt(this),this.i=null,o=jn(this,o),ff(this,o)&&(this.h-=this.g.get(o).length),this.g.set(o,[l]),this.h+=1,this},n.get=function(o,l){return o?(o=this.V(o),0<o.length?String(o[0]):l):l};function pf(o,l,h){df(o,l),0<h.length&&(o.i=null,o.g.set(jn(o,l),N(h)),o.h+=h.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let o=[],l=Array.from(this.g.keys());for(var h=0;h<l.length;h++){var f=l[h];let S=encodeURIComponent(String(f)),k=this.V(f);for(f=0;f<k.length;f++){var T=S;k[f]!==""&&(T+="="+encodeURIComponent(String(k[f]))),o.push(T)}}return this.i=o.join("&")};function jn(o,l){return l=String(l),o.j&&(l=l.toLowerCase()),l}function Lv(o,l){l&&!o.j&&(jt(o),o.i=null,o.g.forEach(function(h,f){var T=f.toLowerCase();f!=T&&(df(this,f),pf(this,T,h))},o)),o.j=l}function Vv(o,l){let h=new Wr;if(c.Image){let f=new Image;f.onload=b(zt,h,"TestLoadImage: loaded",!0,l,f),f.onerror=b(zt,h,"TestLoadImage: error",!1,l,f),f.onabort=b(zt,h,"TestLoadImage: abort",!1,l,f),f.ontimeout=b(zt,h,"TestLoadImage: timeout",!1,l,f),c.setTimeout(function(){f.ontimeout&&f.ontimeout()},1e4),f.src=o}else l(!1)}function Uv(o,l){let h=new Wr,f=new AbortController,T=setTimeout(()=>{f.abort(),zt(h,"TestPingServer: timeout",!1,l)},1e4);fetch(o,{signal:f.signal}).then(S=>{clearTimeout(T),S.ok?zt(h,"TestPingServer: ok",!0,l):zt(h,"TestPingServer: server error",!1,l)}).catch(()=>{clearTimeout(T),zt(h,"TestPingServer: error",!1,l)})}function zt(o,l,h,f,T){try{T&&(T.onload=null,T.onerror=null,T.onabort=null,T.ontimeout=null),f(h)}catch{}}function Bv(){this.g=new Iv}function $v(o,l,h){let f=h||"";try{cf(o,function(T,S){let k=T;d(T)&&(k=za(T)),l.push(f+S+"="+encodeURIComponent(k))})}catch(T){throw l.push(f+"type="+encodeURIComponent("_badmap")),T}}function Jr(o){this.l=o.Ub||null,this.j=o.eb||!1}P(Jr,qa),Jr.prototype.g=function(){return new Ps(this.l,this.j)},Jr.prototype.i=function(o){return function(){return o}}({});function Ps(o,l){Se.call(this),this.D=o,this.o=l,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}P(Ps,Se),n=Ps.prototype,n.open=function(o,l){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=o,this.A=l,this.readyState=1,Zr(this)},n.send=function(o){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let l={headers:this.u,method:this.B,credentials:this.m,cache:void 0};o&&(l.body=o),(this.D||c).fetch(new Request(this.A,l)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Xr(this)),this.readyState=0},n.Sa=function(o){if(this.g&&(this.l=o,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=o.headers,this.readyState=2,Zr(this)),this.g&&(this.readyState=3,Zr(this),this.g)))if(this.responseType==="arraybuffer")o.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in o){if(this.j=o.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;gf(this)}else o.text().then(this.Ra.bind(this),this.ga.bind(this))};function gf(o){o.j.read().then(o.Pa.bind(o)).catch(o.ga.bind(o))}n.Pa=function(o){if(this.g){if(this.o&&o.value)this.response.push(o.value);else if(!this.o){var l=o.value?o.value:new Uint8Array(0);(l=this.v.decode(l,{stream:!o.done}))&&(this.response=this.responseText+=l)}o.done?Xr(this):Zr(this),this.readyState==3&&gf(this)}},n.Ra=function(o){this.g&&(this.response=this.responseText=o,Xr(this))},n.Qa=function(o){this.g&&(this.response=o,Xr(this))},n.ga=function(){this.g&&Xr(this)};function Xr(o){o.readyState=4,o.l=null,o.j=null,o.v=null,Zr(o)}n.setRequestHeader=function(o,l){this.u.append(o,l)},n.getResponseHeader=function(o){return this.h&&this.h.get(o.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let o=[],l=this.h.entries();for(var h=l.next();!h.done;)h=h.value,o.push(h[0]+": "+h[1]),h=l.next();return o.join(`\r
`)};function Zr(o){o.onreadystatechange&&o.onreadystatechange.call(o)}Object.defineProperty(Ps.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(o){this.m=o?"include":"same-origin"}});function mf(o){let l="";return X(o,function(h,f){l+=f,l+=":",l+=h,l+=`\r
`}),l}function ec(o,l,h){e:{for(f in h){var f=!1;break e}f=!0}f||(h=mf(h),typeof o=="string"?h!=null&&encodeURIComponent(String(h)):ce(o,l,h))}function de(o){Se.call(this),this.headers=new Map,this.o=o||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}P(de,Se);var jv=/^https?$/i,zv=["POST","PUT"];n=de.prototype,n.Ha=function(o){this.J=o},n.ea=function(o,l,h,f){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+o);l=l?l.toUpperCase():"GET",this.D=o,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ha.g(),this.v=this.o?qd(this.o):qd(Ha),this.g.onreadystatechange=w(this.Ea,this);try{this.B=!0,this.g.open(l,String(o),!0),this.B=!1}catch(S){yf(this,S);return}if(o=h||"",h=new Map(this.headers),f)if(Object.getPrototypeOf(f)===Object.prototype)for(var T in f)h.set(T,f[T]);else if(typeof f.keys=="function"&&typeof f.get=="function")for(let S of f.keys())h.set(S,f.get(S));else throw Error("Unknown input type for opt_headers: "+String(f));f=Array.from(h.keys()).find(S=>S.toLowerCase()=="content-type"),T=c.FormData&&o instanceof c.FormData,!(0<=Array.prototype.indexOf.call(zv,l,void 0))||f||T||h.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[S,k]of h)this.g.setRequestHeader(S,k);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{wf(this),this.u=!0,this.g.send(o),this.u=!1}catch(S){yf(this,S)}};function yf(o,l){o.h=!1,o.g&&(o.j=!0,o.g.abort(),o.j=!1),o.l=l,o.m=5,vf(o),Ns(o)}function vf(o){o.A||(o.A=!0,Me(o,"complete"),Me(o,"error"))}n.abort=function(o){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=o||7,Me(this,"complete"),Me(this,"abort"),Ns(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ns(this,!0)),de.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?_f(this):this.bb())},n.bb=function(){_f(this)};function _f(o){if(o.h&&typeof a<"u"&&(!o.v[1]||Dt(o)!=4||o.Z()!=2)){if(o.u&&Dt(o)==4)Bd(o.Ea,0,o);else if(Me(o,"readystatechange"),Dt(o)==4){o.h=!1;try{let k=o.Z();e:switch(k){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var l=!0;break e;default:l=!1}var h;if(!(h=l)){var f;if(f=k===0){var T=String(o.D).match(uf)[1]||null;!T&&c.self&&c.self.location&&(T=c.self.location.protocol.slice(0,-1)),f=!jv.test(T?T.toLowerCase():"")}h=f}if(h)Me(o,"complete"),Me(o,"success");else{o.m=6;try{var S=2<Dt(o)?o.g.statusText:""}catch{S=""}o.l=S+" ["+o.Z()+"]",vf(o)}}finally{Ns(o)}}}}function Ns(o,l){if(o.g){wf(o);let h=o.g,f=o.v[0]?()=>{}:null;o.g=null,o.v=null,l||Me(o,"ready");try{h.onreadystatechange=f}catch{}}}function wf(o){o.I&&(c.clearTimeout(o.I),o.I=null)}n.isActive=function(){return!!this.g};function Dt(o){return o.g?o.g.readyState:0}n.Z=function(){try{return 2<Dt(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(o){if(this.g){var l=this.g.responseText;return o&&l.indexOf(o)==0&&(l=l.substring(o.length)),Ev(l)}};function Ef(o){try{if(!o.g)return null;if("response"in o.g)return o.g.response;switch(o.H){case"":case"text":return o.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in o.g)return o.g.mozResponseArrayBuffer}return null}catch{return null}}function qv(o){let l={};o=(o.g&&2<=Dt(o)&&o.g.getAllResponseHeaders()||"").split(`\r
`);for(let f=0;f<o.length;f++){if(z(o[f]))continue;var h=I(o[f]);let T=h[0];if(h=h[1],typeof h!="string")continue;h=h.trim();let S=l[T]||[];l[T]=S,S.push(h)}E(l,function(f){return f.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ei(o,l,h){return h&&h.internalChannelParams&&h.internalChannelParams[o]||l}function If(o){this.Aa=0,this.i=[],this.j=new Wr,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ei("failFast",!1,o),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ei("baseRetryDelayMs",5e3,o),this.cb=ei("retryDelaySeedMs",1e4,o),this.Wa=ei("forwardChannelMaxRetries",2,o),this.wa=ei("forwardChannelRequestTimeoutMs",2e4,o),this.pa=o&&o.xmlHttpFactory||void 0,this.Xa=o&&o.Tb||void 0,this.Ca=o&&o.useFetchStreams||!1,this.L=void 0,this.J=o&&o.supportsCrossDomainXhr||!1,this.K="",this.h=new nf(o&&o.concurrentRequestLimit),this.Da=new Bv,this.P=o&&o.fastHandshake||!1,this.O=o&&o.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=o&&o.Rb||!1,o&&o.xa&&this.j.xa(),o&&o.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&o&&o.detectBufferingProxy||!1,this.ja=void 0,o&&o.longPollingTimeout&&0<o.longPollingTimeout&&(this.ja=o.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=If.prototype,n.la=8,n.G=1,n.connect=function(o,l,h,f){xe(0),this.W=o,this.H=l||{},h&&f!==void 0&&(this.H.OSID=h,this.H.OAID=f),this.F=this.X,this.I=Nf(this,null,this.W),ks(this)};function tc(o){if(Tf(o),o.G==3){var l=o.U++,h=At(o.I);if(ce(h,"SID",o.K),ce(h,"RID",l),ce(h,"TYPE","terminate"),ti(o,h),l=new $t(o,o.j,l),l.L=2,l.v=Rs(At(h)),h=!1,c.navigator&&c.navigator.sendBeacon)try{h=c.navigator.sendBeacon(l.v.toString(),"")}catch{}!h&&c.Image&&(new Image().src=l.v,h=!0),h||(l.g=Of(l.j,null),l.g.ea(l.v)),l.F=Date.now(),bs(l)}Pf(o)}function Os(o){o.g&&(rc(o),o.g.cancel(),o.g=null)}function Tf(o){Os(o),o.u&&(c.clearTimeout(o.u),o.u=null),Ms(o),o.h.cancel(),o.s&&(typeof o.s=="number"&&c.clearTimeout(o.s),o.s=null)}function ks(o){if(!rf(o.h)&&!o.s){o.s=!0;var l=o.Ga;Vr||Md(),Ur||(Vr(),Ur=!0),Ma.add(l,o),o.B=0}}function Gv(o,l){return sf(o.h)>=o.h.j-(o.s?1:0)?!1:o.s?(o.i=l.D.concat(o.i),!0):o.G==1||o.G==2||o.B>=(o.Va?0:o.Wa)?!1:(o.s=Gr(w(o.Ga,o,l),Rf(o,o.B)),o.B++,!0)}n.Ga=function(o){if(this.s)if(this.s=null,this.G==1){if(!o){this.U=Math.floor(1e5*Math.random()),o=this.U++;let T=new $t(this,this.j,o),S=this.o;if(this.S&&(S?(S=g(S),_(S,this.S)):S=this.S),this.m!==null||this.O||(T.H=S,S=null),this.P)e:{for(var l=0,h=0;h<this.i.length;h++){t:{var f=this.i[h];if("__data__"in f.map&&(f=f.map.__data__,typeof f=="string")){f=f.length;break t}f=void 0}if(f===void 0)break;if(l+=f,4096<l){l=h;break e}if(l===4096||h===this.i.length-1){l=h+1;break e}}l=1e3}else l=1e3;l=Df(this,T,l),h=At(this.I),ce(h,"RID",o),ce(h,"CVER",22),this.D&&ce(h,"X-HTTP-Session-Id",this.D),ti(this,h),S&&(this.O?l="headers="+encodeURIComponent(String(mf(S)))+"&"+l:this.m&&ec(h,this.m,S)),Za(this.h,T),this.Ua&&ce(h,"TYPE","init"),this.P?(ce(h,"$req",l),ce(h,"SID","null"),T.T=!0,Qa(T,h,null)):Qa(T,h,l),this.G=2}}else this.G==3&&(o?Af(this,o):this.i.length==0||rf(this.h)||Af(this))};function Af(o,l){var h;l?h=l.l:h=o.U++;let f=At(o.I);ce(f,"SID",o.K),ce(f,"RID",h),ce(f,"AID",o.T),ti(o,f),o.m&&o.o&&ec(f,o.m,o.o),h=new $t(o,o.j,h,o.B+1),o.m===null&&(h.H=o.o),l&&(o.i=l.D.concat(o.i)),l=Df(o,h,1e3),h.I=Math.round(.5*o.wa)+Math.round(.5*o.wa*Math.random()),Za(o.h,h),Qa(h,f,l)}function ti(o,l){o.H&&X(o.H,function(h,f){ce(l,f,h)}),o.l&&cf({},function(h,f){ce(l,f,h)})}function Df(o,l,h){h=Math.min(o.i.length,h);var f=o.l?w(o.l.Na,o.l,o):null;e:{var T=o.i;let S=-1;for(;;){let k=["count="+h];S==-1?0<h?(S=T[0].g,k.push("ofs="+S)):S=0:k.push("ofs="+S);let ae=!0;for(let Ie=0;Ie<h;Ie++){let ee=T[Ie].g,Ce=T[Ie].map;if(ee-=S,0>ee)S=Math.max(0,T[Ie].g-100),ae=!1;else try{$v(Ce,k,"req"+ee+"_")}catch{f&&f(Ce)}}if(ae){f=k.join("&");break e}}}return o=o.i.splice(0,h),l.D=o,f}function bf(o){if(!o.g&&!o.u){o.Y=1;var l=o.Fa;Vr||Md(),Ur||(Vr(),Ur=!0),Ma.add(l,o),o.v=0}}function nc(o){return o.g||o.u||3<=o.v?!1:(o.Y++,o.u=Gr(w(o.Fa,o),Rf(o,o.v)),o.v++,!0)}n.Fa=function(){if(this.u=null,Sf(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var o=2*this.R;this.j.info("BP detection timer enabled: "+o),this.A=Gr(w(this.ab,this),o)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,xe(10),Os(this),Sf(this))};function rc(o){o.A!=null&&(c.clearTimeout(o.A),o.A=null)}function Sf(o){o.g=new $t(o,o.j,"rpc",o.Y),o.m===null&&(o.g.H=o.o),o.g.O=0;var l=At(o.qa);ce(l,"RID","rpc"),ce(l,"SID",o.K),ce(l,"AID",o.T),ce(l,"CI",o.F?"0":"1"),!o.F&&o.ja&&ce(l,"TO",o.ja),ce(l,"TYPE","xmlhttp"),ti(o,l),o.m&&o.o&&ec(l,o.m,o.o),o.L&&(o.g.I=o.L);var h=o.g;o=o.ia,h.L=1,h.v=Rs(At(l)),h.m=null,h.P=!0,Zd(h,o)}n.Za=function(){this.C!=null&&(this.C=null,Os(this),nc(this),xe(19))};function Ms(o){o.C!=null&&(c.clearTimeout(o.C),o.C=null)}function Cf(o,l){var h=null;if(o.g==l){Ms(o),rc(o),o.g=null;var f=2}else if(Xa(o.h,l))h=l.D,of(o.h,l),f=1;else return;if(o.G!=0){if(l.o)if(f==1){h=l.m?l.m.length:0,l=Date.now()-l.F;var T=o.B;f=Ts(),Me(f,new Qd(f,h)),ks(o)}else bf(o);else if(T=l.s,T==3||T==0&&0<l.X||!(f==1&&Gv(o,l)||f==2&&nc(o)))switch(h&&0<h.length&&(l=o.h,l.i=l.i.concat(h)),T){case 1:dn(o,5);break;case 4:dn(o,10);break;case 3:dn(o,6);break;default:dn(o,2)}}}function Rf(o,l){let h=o.Ta+Math.floor(Math.random()*o.cb);return o.isActive()||(h*=2),h*l}function dn(o,l){if(o.j.info("Error code "+l),l==2){var h=w(o.fb,o),f=o.Xa;let T=!f;f=new hn(f||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Ss(f,"https"),Rs(f),T?Vv(f.toString(),h):Uv(f.toString(),h)}else xe(2);o.G=0,o.l&&o.l.sa(l),Pf(o),Tf(o)}n.fb=function(o){o?(this.j.info("Successfully pinged google.com"),xe(2)):(this.j.info("Failed to ping google.com"),xe(1))};function Pf(o){if(o.G=0,o.ka=[],o.l){let l=af(o.h);(l.length!=0||o.i.length!=0)&&(C(o.ka,l),C(o.ka,o.i),o.h.i.length=0,N(o.i),o.i.length=0),o.l.ra()}}function Nf(o,l,h){var f=h instanceof hn?At(h):new hn(h);if(f.g!="")l&&(f.g=l+"."+f.g),Cs(f,f.s);else{var T=c.location;f=T.protocol,l=l?l+"."+T.hostname:T.hostname,T=+T.port;var S=new hn(null);f&&Ss(S,f),l&&(S.g=l),T&&Cs(S,T),h&&(S.l=h),f=S}return h=o.D,l=o.ya,h&&l&&ce(f,h,l),ce(f,"VER",o.la),ti(o,f),f}function Of(o,l,h){if(l&&!o.J)throw Error("Can't create secondary domain capable XhrIo object.");return l=o.Ca&&!o.pa?new de(new Jr({eb:h})):new de(o.pa),l.Ha(o.J),l}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function kf(){}n=kf.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function xs(){}xs.prototype.g=function(o,l){return new Ve(o,l)};function Ve(o,l){Se.call(this),this.g=new If(l),this.l=o,this.h=l&&l.messageUrlParams||null,o=l&&l.messageHeaders||null,l&&l.clientProtocolHeaderRequired&&(o?o["X-Client-Protocol"]="webchannel":o={"X-Client-Protocol":"webchannel"}),this.g.o=o,o=l&&l.initMessageHeaders||null,l&&l.messageContentType&&(o?o["X-WebChannel-Content-Type"]=l.messageContentType:o={"X-WebChannel-Content-Type":l.messageContentType}),l&&l.va&&(o?o["X-WebChannel-Client-Profile"]=l.va:o={"X-WebChannel-Client-Profile":l.va}),this.g.S=o,(o=l&&l.Sb)&&!z(o)&&(this.g.m=o),this.v=l&&l.supportsCrossDomainXhr||!1,this.u=l&&l.sendRawJson||!1,(l=l&&l.httpSessionIdParam)&&!z(l)&&(this.g.D=l,o=this.h,o!==null&&l in o&&(o=this.h,l in o&&delete o[l])),this.j=new zn(this)}P(Ve,Se),Ve.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ve.prototype.close=function(){tc(this.g)},Ve.prototype.o=function(o){var l=this.g;if(typeof o=="string"){var h={};h.__data__=o,o=h}else this.u&&(h={},h.__data__=za(o),o=h);l.i.push(new Cv(l.Ya++,o)),l.G==3&&ks(l)},Ve.prototype.N=function(){this.g.l=null,delete this.j,tc(this.g),delete this.g,Ve.aa.N.call(this)};function Mf(o){Ga.call(this),o.__headers__&&(this.headers=o.__headers__,this.statusCode=o.__status__,delete o.__headers__,delete o.__status__);var l=o.__sm__;if(l){e:{for(let h in l){o=h;break e}o=void 0}(this.i=o)&&(o=this.i,l=l!==null&&o in l?l[o]:void 0),this.data=l}else this.data=o}P(Mf,Ga);function xf(){Wa.call(this),this.status=1}P(xf,Wa);function zn(o){this.g=o}P(zn,kf),zn.prototype.ua=function(){Me(this.g,"a")},zn.prototype.ta=function(o){Me(this.g,new Mf(o))},zn.prototype.sa=function(o){Me(this.g,new xf)},zn.prototype.ra=function(){Me(this.g,"b")},xs.prototype.createWebChannel=xs.prototype.g,Ve.prototype.send=Ve.prototype.o,Ve.prototype.open=Ve.prototype.m,Ve.prototype.close=Ve.prototype.close,Mu=Ot.createWebChannelTransport=function(){return new xs},ku=Ot.getStatEventTarget=function(){return Ts()},Ou=Ot.Event=un,To=Ot.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},As.NO_ERROR=0,As.TIMEOUT=8,As.HTTP_ERROR=6,Ci=Ot.ErrorCode=As,Yd.COMPLETE="complete",Nu=Ot.EventType=Yd,Gd.EventType=zr,zr.OPEN="a",zr.CLOSE="b",zr.ERROR="c",zr.MESSAGE="d",Se.prototype.listen=Se.prototype.K,sr=Ot.WebChannel=Gd,QI=Ot.FetchXmlHttpFactory=Jr,de.prototype.listenOnce=de.prototype.L,de.prototype.getLastError=de.prototype.Ka,de.prototype.getLastErrorCode=de.prototype.Ba,de.prototype.getStatus=de.prototype.Z,de.prototype.getResponseJson=de.prototype.Oa,de.prototype.getResponseText=de.prototype.oa,de.prototype.send=de.prototype.ea,de.prototype.setWithCredentials=de.prototype.Ha,Pu=Ot.XhrIo=de}).apply(typeof Io<"u"?Io:typeof self<"u"?self:typeof window<"u"?window:{});var Ng="@firebase/firestore";var Ee=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Ee.UNAUTHENTICATED=new Ee(null),Ee.GOOGLE_CREDENTIALS=new Ee("google-credentials-uid"),Ee.FIRST_PARTY=new Ee("first-party-uid"),Ee.MOCK_USER=new Ee("mock-user");var Dr="10.14.0";var bn=new Jt("@firebase/firestore");function Ri(){return bn.logLevel}function F(n,...e){if(bn.logLevel<=Y.DEBUG){let t=e.map(Ih);bn.debug(`Firestore (${Dr}): ${n}`,...t)}}function xt(n,...e){if(bn.logLevel<=Y.ERROR){let t=e.map(Ih);bn.error(`Firestore (${Dr}): ${n}`,...t)}}function dr(n,...e){if(bn.logLevel<=Y.WARN){let t=e.map(Ih);bn.warn(`Firestore (${Dr}): ${n}`,...t)}}function Ih(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function j(n="Unexpected state"){let e=`FIRESTORE (${Dr}) INTERNAL ASSERTION FAILED: `+n;throw xt(e),new Error(e)}function oe(n,e){n||j()}function G(n,e){return n}var R={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},M=class extends Je{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var kt=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var Co=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Bu=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Ee.UNAUTHENTICATED))}shutdown(){}},$u=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},ju=class{constructor(e){this.t=e,this.currentUser=Ee.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){oe(this.o===void 0);let r=this.i,i=u=>this.i!==r?(r=this.i,t(u)):Promise.resolve(),s=new kt;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new kt,e.enqueueRetryable(()=>i(this.currentUser))};let a=()=>{let u=s;e.enqueueRetryable(()=>D(this,null,function*(){yield u.promise,yield i(this.currentUser)}))},c=u=>{F("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?c(u):(F("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new kt)}},0),a()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(F("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(oe(typeof r.accessToken=="string"),new Co(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return oe(e===null||typeof e=="string"),new Ee(e)}},zu=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=Ee.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},qu=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new zu(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Ee.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Gu=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Wu=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){oe(this.o===void 0);let r=s=>{s.error!=null&&F("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let a=s.token!==this.R;return this.R=s.token,F("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{F("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.A.getImmediate({optional:!0});s?i(s):F("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(oe(typeof t.token=="string"),this.R=t.token,new Gu(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function YI(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var Ro=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=YI(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%e.length))}return r}};function te(n,e){return n<e?-1:n>e?1:0}function fr(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var Ae=class n{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new M(R.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new M(R.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new M(R.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new M(R.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new n(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?te(this.nanoseconds,e.nanoseconds):te(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var H=class n{constructor(e){this.timestamp=e}static fromTimestamp(e){return new n(e)}static min(){return new n(new Ae(0,0))}static max(){return new n(new Ae(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Po=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&j(),r===void 0?r=e.length-t:r>e.length-t&&j(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let s=e.get(i),a=t.get(i);if(s<a)return-1;if(s>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}},he=class n extends Po{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new M(R.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},JI=/^[_a-zA-Z][_a-zA-Z0-9]*$/,$e=class n extends Po{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return JI.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new n(["__name__"])}static fromServerFormat(e){let t=[],r="",i=0,s=()=>{if(r.length===0)throw new M(R.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},a=!1;for(;i<e.length;){let c=e[i];if(c==="\\"){if(i+1===e.length)throw new M(R.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new M(R.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else c==="`"?(a=!a,i++):c!=="."||a?(r+=c,i++):(s(),i++)}if(s(),a)throw new M(R.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var B=class n{constructor(e){this.path=e}static fromPath(e){return new n(he.fromString(e))}static fromName(e){return new n(he.fromString(e).popFirst(5))}static empty(){return new n(he.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&he.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return he.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new he(e.slice()))}};var Hu=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};Hu.UNKNOWN_ID=-1;function XI(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=H.fromTimestamp(r===1e9?new Ae(t+1,0):new Ae(t,r));return new Sn(i,B.empty(),e)}function ZI(n){return new Sn(n.readTime,n.key,-1)}var Sn=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(H.min(),B.empty(),-1)}static max(){return new n(H.max(),B.empty(),-1)}};function e0(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=B.comparator(n.documentKey,e.documentKey),t!==0?t:te(n.largestBatchId,e.largestBatchId))}var t0="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Ku=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Qi(n){return D(this,null,function*(){if(n.code!==R.FAILED_PRECONDITION||n.message!==t0)throw n;F("LocalStore","Unexpectedly lost primary lease")})}var O=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&j(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,s=0,a=!1;e.forEach(c=>{++i,c.next(()=>{++s,a&&s===i&&t()},u=>r(u))}),a=!0,s===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let s=e.length,a=new Array(s),c=0;for(let u=0;u<s;u++){let d=u;t(e[d]).next(p=>{a[d]=p,++c,c===s&&r(a)},p=>i(p))}})}static doWhile(e,t){return new n((r,i)=>{let s=()=>{e()===!0?t().next(()=>{s()},i):r()};s()})}};function n0(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Yi(n){return n.name==="IndexedDbTransactionError"}var fm=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function sa(n){return n==null}function Fi(n){return n===0&&1/n==-1/0}function r0(n){return typeof n=="number"&&Number.isInteger(n)&&!Fi(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var i0=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],RR=[...i0,"documentOverlays"],s0=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],o0=s0,a0=[...o0,"indexConfiguration","indexState","indexEntries"];var PR=[...a0,"globals"];function Og(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Mn(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function pm(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var pe=class n{constructor(e,t){this.comparator=e,this.root=t||yt.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,yt.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,yt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ur(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ur(this.root,e,this.comparator,!1)}getReverseIterator(){return new ur(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ur(this.root,e,this.comparator,!0)}},ur=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},yt=class n{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=s??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new n(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw j();let e=this.left.check();if(e!==this.right.check())throw j();return e+(this.isRed()?0:1)}};yt.EMPTY=null,yt.RED=!0,yt.BLACK=!1;yt.EMPTY=new class{constructor(){this.size=0}get key(){throw j()}get value(){throw j()}get color(){throw j()}get left(){throw j()}get right(){throw j()}copy(e,t,r,i,s){return this}insert(e,t,r){return new yt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Oe=class n{constructor(e){this.comparator=e,this.data=new pe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new No(this.data.getIterator())}getIteratorFrom(e){return new No(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},No=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Ze=class n{constructor(e){this.fields=e,e.sort($e.comparator)}static empty(){return new n([])}unionWith(e){let t=new Oe($e.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return fr(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var Oo=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var ke=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Oo("Invalid base64 string: "+s):s}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let s="";for(let a=0;a<i.length;++a)s+=String.fromCharCode(i[a]);return s}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return te(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};ke.EMPTY_BYTE_STRING=new ke("");var c0=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ft(n){if(oe(!!n),typeof n=="string"){let e=0,t=c0.exec(n);if(oe(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ue(n.seconds),nanos:ue(n.nanos)}}function ue(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function rn(n){return typeof n=="string"?ke.fromBase64String(n):ke.fromUint8Array(n)}function Th(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function Ah(n){let e=n.mapValue.fields.__previous_value__;return Th(e)?Ah(e):e}function Li(n){let e=Ft(n.mapValue.fields.__local_write_time__.timestampValue);return new Ae(e.seconds,e.nanos)}var Qu=class{constructor(e,t,r,i,s,a,c,u,d){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=a,this.autoDetectLongPolling=c,this.longPollingOptions=u,this.useFetchStreams=d}},ko=class n{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new n("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var Ao={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Cn(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Th(n)?4:mm(n)?9007199254740991:gm(n)?10:11:j()}function wt(n,e){if(n===e)return!0;let t=Cn(n);if(t!==Cn(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Li(n).isEqual(Li(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let a=Ft(i.timestampValue),c=Ft(s.timestampValue);return a.seconds===c.seconds&&a.nanos===c.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,s){return rn(i.bytesValue).isEqual(rn(s.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,s){return ue(i.geoPointValue.latitude)===ue(s.geoPointValue.latitude)&&ue(i.geoPointValue.longitude)===ue(s.geoPointValue.longitude)}(n,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return ue(i.integerValue)===ue(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let a=ue(i.doubleValue),c=ue(s.doubleValue);return a===c?Fi(a)===Fi(c):isNaN(a)&&isNaN(c)}return!1}(n,e);case 9:return fr(n.arrayValue.values||[],e.arrayValue.values||[],wt);case 10:case 11:return function(i,s){let a=i.mapValue.fields||{},c=s.mapValue.fields||{};if(Og(a)!==Og(c))return!1;for(let u in a)if(a.hasOwnProperty(u)&&(c[u]===void 0||!wt(a[u],c[u])))return!1;return!0}(n,e);default:return j()}}function Vi(n,e){return(n.values||[]).find(t=>wt(t,e))!==void 0}function pr(n,e){if(n===e)return 0;let t=Cn(n),r=Cn(e);if(t!==r)return te(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return te(n.booleanValue,e.booleanValue);case 2:return function(s,a){let c=ue(s.integerValue||s.doubleValue),u=ue(a.integerValue||a.doubleValue);return c<u?-1:c>u?1:c===u?0:isNaN(c)?isNaN(u)?0:-1:1}(n,e);case 3:return kg(n.timestampValue,e.timestampValue);case 4:return kg(Li(n),Li(e));case 5:return te(n.stringValue,e.stringValue);case 6:return function(s,a){let c=rn(s),u=rn(a);return c.compareTo(u)}(n.bytesValue,e.bytesValue);case 7:return function(s,a){let c=s.split("/"),u=a.split("/");for(let d=0;d<c.length&&d<u.length;d++){let p=te(c[d],u[d]);if(p!==0)return p}return te(c.length,u.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,a){let c=te(ue(s.latitude),ue(a.latitude));return c!==0?c:te(ue(s.longitude),ue(a.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return Mg(n.arrayValue,e.arrayValue);case 10:return function(s,a){var c,u,d,p;let m=s.fields||{},w=a.fields||{},b=(c=m.value)===null||c===void 0?void 0:c.arrayValue,P=(u=w.value)===null||u===void 0?void 0:u.arrayValue,N=te(((d=b?.values)===null||d===void 0?void 0:d.length)||0,((p=P?.values)===null||p===void 0?void 0:p.length)||0);return N!==0?N:Mg(b,P)}(n.mapValue,e.mapValue);case 11:return function(s,a){if(s===Ao.mapValue&&a===Ao.mapValue)return 0;if(s===Ao.mapValue)return 1;if(a===Ao.mapValue)return-1;let c=s.fields||{},u=Object.keys(c),d=a.fields||{},p=Object.keys(d);u.sort(),p.sort();for(let m=0;m<u.length&&m<p.length;++m){let w=te(u[m],p[m]);if(w!==0)return w;let b=pr(c[u[m]],d[p[m]]);if(b!==0)return b}return te(u.length,p.length)}(n.mapValue,e.mapValue);default:throw j()}}function kg(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return te(n,e);let t=Ft(n),r=Ft(e),i=te(t.seconds,r.seconds);return i!==0?i:te(t.nanos,r.nanos)}function Mg(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let s=pr(t[i],r[i]);if(s)return s}return te(t.length,r.length)}function gr(n){return Yu(n)}function Yu(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=Ft(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return rn(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return B.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let s of t.values||[])i?i=!1:r+=",",r+=Yu(s);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",s=!0;for(let a of r)s?s=!1:i+=",",i+=`${a}:${Yu(t.fields[a])}`;return i+"}"}(n.mapValue):j()}function xg(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Ju(n){return!!n&&"integerValue"in n}function Dh(n){return!!n&&"arrayValue"in n}function Fg(n){return!!n&&"nullValue"in n}function Lg(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function bo(n){return!!n&&"mapValue"in n}function gm(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function Ni(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return Mn(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Ni(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Ni(n.arrayValue.values[t]);return e}return Object.assign({},n)}function mm(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var Be=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!bo(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ni(t)}setAll(e){let t=$e.emptyPath(),r={},i=[];e.forEach((a,c)=>{if(!t.isImmediateParentOf(c)){let u=this.getFieldsMap(t);this.applyChanges(u,r,i),r={},i=[],t=c.popLast()}a?r[c.lastSegment()]=Ni(a):i.push(c.lastSegment())});let s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){let t=this.field(e.popLast());bo(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return wt(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];bo(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Mn(t,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new n(Ni(this.value))}};function ym(n){let e=[];return Mn(n.fields,(t,r)=>{let i=new $e([t]);if(bo(r)){let s=ym(r.mapValue).fields;if(s.length===0)e.push(i);else for(let a of s)e.push(i.child(a))}else e.push(i)}),new Ze(e)}var ot=class n{constructor(e,t,r,i,s,a,c){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=a,this.documentState=c}static newInvalidDocument(e){return new n(e,0,H.min(),H.min(),H.min(),Be.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,H.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,H.min(),H.min(),Be.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,H.min(),H.min(),Be.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(H.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Be.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Be.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=H.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var mr=class{constructor(e,t){this.position=e,this.inclusive=t}};function Vg(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let s=e[i],a=n.position[i];if(s.field.isKeyField()?r=B.comparator(B.fromName(a.referenceValue),t.key):r=pr(a,t.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function Ug(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!wt(n.position[t],e.position[t]))return!1;return!0}var Rn=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function u0(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var Mo=class{},ve=class n extends Mo{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new Zu(e,t,r):t==="array-contains"?new nl(e,r):t==="in"?new rl(e,r):t==="not-in"?new il(e,r):t==="array-contains-any"?new sl(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new el(e,r):new tl(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(pr(t,this.value)):t!==null&&Cn(this.value)===Cn(t)&&this.matchesComparison(pr(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return j()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},at=class n extends Mo{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new n(e,t)}matches(e){return vm(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function vm(n){return n.op==="and"}function _m(n){return l0(n)&&vm(n)}function l0(n){for(let e of n.filters)if(e instanceof at)return!1;return!0}function Xu(n){if(n instanceof ve)return n.field.canonicalString()+n.op.toString()+gr(n.value);if(_m(n))return n.filters.map(e=>Xu(e)).join(",");{let e=n.filters.map(t=>Xu(t)).join(",");return`${n.op}(${e})`}}function wm(n,e){return n instanceof ve?function(r,i){return i instanceof ve&&r.op===i.op&&r.field.isEqual(i.field)&&wt(r.value,i.value)}(n,e):n instanceof at?function(r,i){return i instanceof at&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,a,c)=>s&&wm(a,i.filters[c]),!0):!1}(n,e):void j()}function Em(n){return n instanceof ve?function(t){return`${t.field.canonicalString()} ${t.op} ${gr(t.value)}`}(n):n instanceof at?function(t){return t.op.toString()+" {"+t.getFilters().map(Em).join(" ,")+"}"}(n):"Filter"}var Zu=class extends ve{constructor(e,t,r){super(e,t,r),this.key=B.fromName(r.referenceValue)}matches(e){let t=B.comparator(e.key,this.key);return this.matchesComparison(t)}},el=class extends ve{constructor(e,t){super(e,"in",t),this.keys=Im("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},tl=class extends ve{constructor(e,t){super(e,"not-in",t),this.keys=Im("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function Im(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>B.fromName(r.referenceValue))}var nl=class extends ve{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return Dh(t)&&Vi(t.arrayValue,this.value)}},rl=class extends ve{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&Vi(this.value.arrayValue,t)}},il=class extends ve{constructor(e,t){super(e,"not-in",t)}matches(e){if(Vi(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&!Vi(this.value.arrayValue,t)}},sl=class extends ve{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!Dh(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Vi(this.value.arrayValue,r))}};var ol=class{constructor(e,t=null,r=[],i=[],s=null,a=null,c=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=a,this.endAt=c,this.ue=null}};function Bg(n,e=null,t=[],r=[],i=null,s=null,a=null){return new ol(n,e,t,r,i,s,a)}function bh(n){let e=G(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Xu(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),sa(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>gr(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>gr(r)).join(",")),e.ue=t}return e.ue}function Sh(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!u0(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!wm(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Ug(n.startAt,e.startAt)&&Ug(n.endAt,e.endAt)}function al(n){return B.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var sn=class{constructor(e,t=null,r=[],i=[],s=null,a="F",c=null,u=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=a,this.startAt=c,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function h0(n,e,t,r,i,s,a,c){return new sn(n,e,t,r,i,s,a,c)}function Ch(n){return new sn(n)}function $g(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function Tm(n){return n.collectionGroup!==null}function Oi(n){let e=G(n);if(e.ce===null){e.ce=[];let t=new Set;for(let s of e.explicitOrderBy)e.ce.push(s),t.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let c=new Oe($e.comparator);return a.filters.forEach(u=>{u.getFlattenedFilters().forEach(d=>{d.isInequality()&&(c=c.add(d.field))})}),c})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Rn(s,r))}),t.has($e.keyField().canonicalString())||e.ce.push(new Rn($e.keyField(),r))}return e.ce}function vt(n){let e=G(n);return e.le||(e.le=d0(e,Oi(n))),e.le}function d0(n,e){if(n.limitType==="F")return Bg(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new Rn(i.field,s)});let t=n.endAt?new mr(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new mr(n.startAt.position,n.startAt.inclusive):null;return Bg(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function cl(n,e){let t=n.filters.concat([e]);return new sn(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function ul(n,e,t){return new sn(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function oa(n,e){return Sh(vt(n),vt(e))&&n.limitType===e.limitType}function Am(n){return`${bh(vt(n))}|lt:${n.limitType}`}function or(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>Em(i)).join(", ")}]`),sa(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>gr(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>gr(i)).join(",")),`Target(${r})`}(vt(n))}; limitType=${n.limitType})`}function aa(n,e){return e.isFoundDocument()&&function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):B.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(n,e)&&function(r,i){for(let s of Oi(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(a,c,u){let d=Vg(a,c,u);return a.inclusive?d<=0:d<0}(r.startAt,Oi(r),i)||r.endAt&&!function(a,c,u){let d=Vg(a,c,u);return a.inclusive?d>=0:d>0}(r.endAt,Oi(r),i))}(n,e)}function f0(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Dm(n){return(e,t)=>{let r=!1;for(let i of Oi(n)){let s=p0(i,e,t);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function p0(n,e,t){let r=n.field.isKeyField()?B.comparator(e.key,t.key):function(s,a,c){let u=a.data.field(s),d=c.data.field(s);return u!==null&&d!==null?pr(u,d):j()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return j()}}var on=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Mn(this.inner,(t,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return pm(this.inner)}size(){return this.innerSize}};var g0=new pe(B.comparator);function Lt(){return g0}var bm=new pe(B.comparator);function Pi(...n){let e=bm;for(let t of n)e=e.insert(t.key,t);return e}function Sm(n){let e=bm;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Tn(){return ki()}function Cm(){return ki()}function ki(){return new on(n=>n.toString(),(n,e)=>n.isEqual(e))}var m0=new pe(B.comparator),y0=new Oe(B.comparator);function J(...n){let e=y0;for(let t of n)e=e.add(t);return e}var v0=new Oe(te);function _0(){return v0}function Rh(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Fi(e)?"-0":e}}function Rm(n){return{integerValue:""+n}}function w0(n,e){return r0(e)?Rm(e):Rh(n,e)}var yr=class{constructor(){this._=void 0}};function E0(n,e,t){return n instanceof vr?function(i,s){let a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Th(s)&&(s=Ah(s)),s&&(a.fields.__previous_value__=s),{mapValue:a}}(t,e):n instanceof Pn?Nm(n,e):n instanceof Nn?Om(n,e):function(i,s){let a=Pm(i,s),c=jg(a)+jg(i.Pe);return Ju(a)&&Ju(i.Pe)?Rm(c):Rh(i.serializer,c)}(n,e)}function I0(n,e,t){return n instanceof Pn?Nm(n,e):n instanceof Nn?Om(n,e):t}function Pm(n,e){return n instanceof _r?function(r){return Ju(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}var vr=class extends yr{},Pn=class extends yr{constructor(e){super(),this.elements=e}};function Nm(n,e){let t=km(e);for(let r of n.elements)t.some(i=>wt(i,r))||t.push(r);return{arrayValue:{values:t}}}var Nn=class extends yr{constructor(e){super(),this.elements=e}};function Om(n,e){let t=km(e);for(let r of n.elements)t=t.filter(i=>!wt(i,r));return{arrayValue:{values:t}}}var _r=class extends yr{constructor(e,t){super(),this.serializer=e,this.Pe=t}};function jg(n){return ue(n.integerValue||n.doubleValue)}function km(n){return Dh(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function T0(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof Pn&&i instanceof Pn||r instanceof Nn&&i instanceof Nn?fr(r.elements,i.elements,wt):r instanceof _r&&i instanceof _r?wt(r.Pe,i.Pe):r instanceof vr&&i instanceof vr}(n.transform,e.transform)}var ll=class{constructor(e,t){this.version=e,this.transformResults=t}},Mt=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function So(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var wr=class{};function Mm(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Ui(n.key,Mt.none()):new On(n.key,n.data,Mt.none());{let t=n.data,r=Be.empty(),i=new Oe($e.comparator);for(let s of e.fields)if(!i.has(s)){let a=t.field(s);a===null&&s.length>1&&(s=s.popLast(),a=t.field(s)),a===null?r.delete(s):r.set(s,a),i=i.add(s)}return new Et(n.key,r,new Ze(i.toArray()),Mt.none())}}function A0(n,e,t){n instanceof On?function(i,s,a){let c=i.value.clone(),u=qg(i.fieldTransforms,s,a.transformResults);c.setAll(u),s.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(n,e,t):n instanceof Et?function(i,s,a){if(!So(i.precondition,s))return void s.convertToUnknownDocument(a.version);let c=qg(i.fieldTransforms,s,a.transformResults),u=s.data;u.setAll(xm(i)),u.setAll(c),s.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(n,e,t):function(i,s,a){s.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,t)}function Mi(n,e,t,r){return n instanceof On?function(s,a,c,u){if(!So(s.precondition,a))return c;let d=s.value.clone(),p=Gg(s.fieldTransforms,u,a);return d.setAll(p),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),null}(n,e,t,r):n instanceof Et?function(s,a,c,u){if(!So(s.precondition,a))return c;let d=Gg(s.fieldTransforms,u,a),p=a.data;return p.setAll(xm(s)),p.setAll(d),a.convertToFoundDocument(a.version,p).setHasLocalMutations(),c===null?null:c.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(m=>m.field))}(n,e,t,r):function(s,a,c){return So(s.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):c}(n,e,t)}function D0(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),s=Pm(r.transform,i||null);s!=null&&(t===null&&(t=Be.empty()),t.set(r.field,s))}return t||null}function zg(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&fr(r,i,(s,a)=>T0(s,a))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var On=class extends wr{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Et=class extends wr{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function xm(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function qg(n,e,t){let r=new Map;oe(n.length===t.length);for(let i=0;i<t.length;i++){let s=n[i],a=s.transform,c=e.data.field(s.field);r.set(s.field,I0(a,c,t[i]))}return r}function Gg(n,e,t){let r=new Map;for(let i of n){let s=i.transform,a=t.data.field(i.field);r.set(i.field,E0(s,a,e))}return r}var Ui=class extends wr{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},hl=class extends wr{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var dl=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&A0(s,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=Mi(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=Mi(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=Cm();return this.mutations.forEach(i=>{let s=e.get(i.key),a=s.overlayedDocument,c=this.applyToLocalView(a,s.mutatedFields);c=t.has(i.key)?null:c;let u=Mm(a,c);u!==null&&r.set(i.key,u),a.isValidDocument()||a.convertToNoDocument(H.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),J())}isEqual(e){return this.batchId===e.batchId&&fr(this.mutations,e.mutations,(t,r)=>zg(t,r))&&fr(this.baseMutations,e.baseMutations,(t,r)=>zg(t,r))}},fl=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){oe(e.mutations.length===r.length);let i=function(){return m0}(),s=e.mutations;for(let a=0;a<s.length;a++)i=i.insert(s[a].key,r[a].version);return new n(e,t,r,i)}};var pl=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var gl=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var me,Z;function b0(n){switch(n){default:return j();case R.CANCELLED:case R.UNKNOWN:case R.DEADLINE_EXCEEDED:case R.RESOURCE_EXHAUSTED:case R.INTERNAL:case R.UNAVAILABLE:case R.UNAUTHENTICATED:return!1;case R.INVALID_ARGUMENT:case R.NOT_FOUND:case R.ALREADY_EXISTS:case R.PERMISSION_DENIED:case R.FAILED_PRECONDITION:case R.ABORTED:case R.OUT_OF_RANGE:case R.UNIMPLEMENTED:case R.DATA_LOSS:return!0}}function Fm(n){if(n===void 0)return xt("GRPC error has no .code"),R.UNKNOWN;switch(n){case me.OK:return R.OK;case me.CANCELLED:return R.CANCELLED;case me.UNKNOWN:return R.UNKNOWN;case me.DEADLINE_EXCEEDED:return R.DEADLINE_EXCEEDED;case me.RESOURCE_EXHAUSTED:return R.RESOURCE_EXHAUSTED;case me.INTERNAL:return R.INTERNAL;case me.UNAVAILABLE:return R.UNAVAILABLE;case me.UNAUTHENTICATED:return R.UNAUTHENTICATED;case me.INVALID_ARGUMENT:return R.INVALID_ARGUMENT;case me.NOT_FOUND:return R.NOT_FOUND;case me.ALREADY_EXISTS:return R.ALREADY_EXISTS;case me.PERMISSION_DENIED:return R.PERMISSION_DENIED;case me.FAILED_PRECONDITION:return R.FAILED_PRECONDITION;case me.ABORTED:return R.ABORTED;case me.OUT_OF_RANGE:return R.OUT_OF_RANGE;case me.UNIMPLEMENTED:return R.UNIMPLEMENTED;case me.DATA_LOSS:return R.DATA_LOSS;default:return j()}}(Z=me||(me={}))[Z.OK=0]="OK",Z[Z.CANCELLED=1]="CANCELLED",Z[Z.UNKNOWN=2]="UNKNOWN",Z[Z.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Z[Z.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Z[Z.NOT_FOUND=5]="NOT_FOUND",Z[Z.ALREADY_EXISTS=6]="ALREADY_EXISTS",Z[Z.PERMISSION_DENIED=7]="PERMISSION_DENIED",Z[Z.UNAUTHENTICATED=16]="UNAUTHENTICATED",Z[Z.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Z[Z.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Z[Z.ABORTED=10]="ABORTED",Z[Z.OUT_OF_RANGE=11]="OUT_OF_RANGE",Z[Z.UNIMPLEMENTED=12]="UNIMPLEMENTED",Z[Z.INTERNAL=13]="INTERNAL",Z[Z.UNAVAILABLE=14]="UNAVAILABLE",Z[Z.DATA_LOSS=15]="DATA_LOSS";var Wg=null;function S0(){return new TextEncoder}var C0=new tn([4294967295,4294967295],0);function Hg(n){let e=S0().encode(n),t=new Ru;return t.update(e),new Uint8Array(t.digest())}function Kg(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new tn([t,r],0),new tn([i,s],0)]}var ml=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new An(`Invalid padding: ${t}`);if(r<0)throw new An(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new An(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new An(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=tn.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(tn.fromNumber(r)));return i.compare(C0)===1&&(i=new tn([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let t=Hg(e),[r,i]=Kg(t);for(let s=0;s<this.hashCount;s++){let a=this.Ee(r,i,s);if(!this.de(a))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),a=new n(s,i,t);return r.forEach(c=>a.insert(c)),a}insert(e){if(this.Ie===0)return;let t=Hg(e),[r,i]=Kg(t);for(let s=0;s<this.hashCount;s++){let a=this.Ee(r,i,s);this.Ae(a)}}Ae(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},An=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var xo=class n{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,Bi.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(H.min(),i,new pe(te),Lt(),J())}},Bi=class n{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,J(),J(),J())}};var lr=class{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}},Fo=class{constructor(e,t){this.targetId=e,this.me=t}},Lo=class{constructor(e,t,r=ke.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},Vo=class{constructor(){this.fe=0,this.ge=Yg(),this.pe=ke.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=J(),t=J(),r=J();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:j()}}),new Bi(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=Yg()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,oe(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},yl=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=Lt(),this.qe=Qg(),this.Qe=new pe(te)}Ke(e){for(let t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(let t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{let r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:j()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){let t=e.targetId,r=e.me.count,i=this.Je(t);if(i){let s=i.target;if(al(s))if(r===0){let a=new B(s.path);this.Ue(t,a,ot.newNoDocument(a,H.min()))}else oe(r===1);else{let a=this.Ye(t);if(a!==r){let c=this.Ze(e),u=c?this.Xe(c,e,a):1;if(u!==0){this.je(t);let d=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,d)}Wg?.et(function(p,m,w,b,P){var N,C,U,z,L,ne;let le={localCacheCount:p,existenceFilterCount:m.count,databaseId:w.database,projectId:w.projectId},X=m.unchangedNames;return X&&(le.bloomFilter={applied:P===0,hashCount:(N=X?.hashCount)!==null&&N!==void 0?N:0,bitmapLength:(z=(U=(C=X?.bits)===null||C===void 0?void 0:C.bitmap)===null||U===void 0?void 0:U.length)!==null&&z!==void 0?z:0,padding:(ne=(L=X?.bits)===null||L===void 0?void 0:L.padding)!==null&&ne!==void 0?ne:0,mightContain:E=>{var g;return(g=b?.mightContain(E))!==null&&g!==void 0&&g}}),le}(a,e.me,this.Le.tt(),c,u))}}}}Ze(e){let t=e.me.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t,a,c;try{a=rn(r).toUint8Array()}catch(u){if(u instanceof Oo)return dr("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{c=new ml(a,i,s)}catch(u){return dr(u instanceof An?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return c.Ie===0?null:c}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){let r=this.Le.getRemoteKeysForTarget(t),i=0;return r.forEach(s=>{let a=this.Le.tt(),c=`projects/${a.projectId}/databases/${a.database}/documents/${s.path.canonicalString()}`;e.mightContain(c)||(this.Ue(t,s,null),i++)}),i}rt(e){let t=new Map;this.Be.forEach((s,a)=>{let c=this.Je(a);if(c){if(s.current&&al(c.target)){let u=new B(c.target.path);this.ke.get(u)!==null||this.it(a,u)||this.Ue(a,u,ot.newNoDocument(u,e))}s.be&&(t.set(a,s.ve()),s.Ce())}});let r=J();this.qe.forEach((s,a)=>{let c=!0;a.forEachWhile(u=>{let d=this.Je(u);return!d||d.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(s))}),this.ke.forEach((s,a)=>a.setReadTime(e));let i=new xo(e,t,this.Qe,this.ke,r);return this.ke=Lt(),this.qe=Qg(),this.Qe=new pe(te),i}$e(e,t){if(!this.ze(e))return;let r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new Vo,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Oe(te),this.qe=this.qe.insert(e,t)),t}ze(e){let t=this.Je(e)!==null;return t||F("WatchChangeAggregator","Detected inactive target",e),t}Je(e){let t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Vo),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}};function Qg(){return new pe(B.comparator)}function Yg(){return new pe(B.comparator)}var R0={asc:"ASCENDING",desc:"DESCENDING"},P0={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},N0={and:"AND",or:"OR"},vl=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function _l(n,e){return n.useProto3Json||sa(e)?e:{value:e}}function Uo(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Lm(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function O0(n,e){return Uo(n,e.toTimestamp())}function _t(n){return oe(!!n),H.fromTimestamp(function(t){let r=Ft(t);return new Ae(r.seconds,r.nanos)}(n))}function Ph(n,e){return wl(n,e).canonicalString()}function wl(n,e){let t=function(i){return new he(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function Vm(n){let e=he.fromString(n);return oe(zm(e)),e}function El(n,e){return Ph(n.databaseId,e.path)}function xu(n,e){let t=Vm(e);if(t.get(1)!==n.databaseId.projectId)throw new M(R.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new M(R.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new B(Bm(t))}function Um(n,e){return Ph(n.databaseId,e)}function k0(n){let e=Vm(n);return e.length===4?he.emptyPath():Bm(e)}function Il(n){return new he(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Bm(n){return oe(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function Jg(n,e,t){return{name:El(n,e),fields:t.value.mapValue.fields}}function M0(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:j()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(d,p){return d.useProto3Json?(oe(p===void 0||typeof p=="string"),ke.fromBase64String(p||"")):(oe(p===void 0||p instanceof Buffer||p instanceof Uint8Array),ke.fromUint8Array(p||new Uint8Array))}(n,e.targetChange.resumeToken),a=e.targetChange.cause,c=a&&function(d){let p=d.code===void 0?R.UNKNOWN:Fm(d.code);return new M(p,d.message||"")}(a);t=new Lo(r,i,s,c||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=xu(n,r.document.name),s=_t(r.document.updateTime),a=r.document.createTime?_t(r.document.createTime):H.min(),c=new Be({mapValue:{fields:r.document.fields}}),u=ot.newFoundDocument(i,s,a,c),d=r.targetIds||[],p=r.removedTargetIds||[];t=new lr(d,p,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=xu(n,r.document),s=r.readTime?_t(r.readTime):H.min(),a=ot.newNoDocument(i,s),c=r.removedTargetIds||[];t=new lr([],c,a.key,a)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=xu(n,r.document),s=r.removedTargetIds||[];t=new lr([],s,i,null)}else{if(!("filter"in e))return j();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:s}=r,a=new gl(i,s),c=r.targetId;t=new Fo(c,a)}}return t}function x0(n,e){let t;if(e instanceof On)t={update:Jg(n,e.key,e.value)};else if(e instanceof Ui)t={delete:El(n,e.key)};else if(e instanceof Et)t={update:Jg(n,e.key,e.data),updateMask:q0(e.fieldMask)};else{if(!(e instanceof hl))return j();t={verify:El(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,a){let c=a.transform;if(c instanceof vr)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Pn)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Nn)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof _r)return{fieldPath:a.field.canonicalString(),increment:c.Pe};throw j()}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:O0(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:j()}(n,e.precondition)),t}function F0(n,e){return n&&n.length>0?(oe(e!==void 0),n.map(t=>function(i,s){let a=i.updateTime?_t(i.updateTime):_t(s);return a.isEqual(H.min())&&(a=_t(s)),new ll(a,i.transformResults||[])}(t,e))):[]}function L0(n,e){return{documents:[Um(n,e.path)]}}function V0(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=Um(n,i);let s=function(d){if(d.length!==0)return jm(at.create(d,"and"))}(e.filters);s&&(t.structuredQuery.where=s);let a=function(d){if(d.length!==0)return d.map(p=>function(w){return{field:ar(w.field),direction:$0(w.dir)}}(p))}(e.orderBy);a&&(t.structuredQuery.orderBy=a);let c=_l(n,e.limit);return c!==null&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{_t:t,parent:i}}function U0(n){let e=k0(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){oe(r===1);let p=t.from[0];p.allDescendants?i=p.collectionId:e=e.child(p.collectionId)}let s=[];t.where&&(s=function(m){let w=$m(m);return w instanceof at&&_m(w)?w.getFilters():[w]}(t.where));let a=[];t.orderBy&&(a=function(m){return m.map(w=>function(P){return new Rn(cr(P.field),function(C){switch(C){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(P.direction))}(w))}(t.orderBy));let c=null;t.limit&&(c=function(m){let w;return w=typeof m=="object"?m.value:m,sa(w)?null:w}(t.limit));let u=null;t.startAt&&(u=function(m){let w=!!m.before,b=m.values||[];return new mr(b,w)}(t.startAt));let d=null;return t.endAt&&(d=function(m){let w=!m.before,b=m.values||[];return new mr(b,w)}(t.endAt)),h0(e,i,a,s,c,"F",u,d)}function B0(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return j()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function $m(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=cr(t.unaryFilter.field);return ve.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=cr(t.unaryFilter.field);return ve.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=cr(t.unaryFilter.field);return ve.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let a=cr(t.unaryFilter.field);return ve.create(a,"!=",{nullValue:"NULL_VALUE"});default:return j()}}(n):n.fieldFilter!==void 0?function(t){return ve.create(cr(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return j()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return at.create(t.compositeFilter.filters.map(r=>$m(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return j()}}(t.compositeFilter.op))}(n):j()}function $0(n){return R0[n]}function j0(n){return P0[n]}function z0(n){return N0[n]}function ar(n){return{fieldPath:n.canonicalString()}}function cr(n){return $e.fromServerFormat(n.fieldPath)}function jm(n){return n instanceof ve?function(t){if(t.op==="=="){if(Lg(t.value))return{unaryFilter:{field:ar(t.field),op:"IS_NAN"}};if(Fg(t.value))return{unaryFilter:{field:ar(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Lg(t.value))return{unaryFilter:{field:ar(t.field),op:"IS_NOT_NAN"}};if(Fg(t.value))return{unaryFilter:{field:ar(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ar(t.field),op:j0(t.op),value:t.value}}}(n):n instanceof at?function(t){let r=t.getFilters().map(i=>jm(i));return r.length===1?r[0]:{compositeFilter:{op:z0(t.op),filters:r}}}(n):j()}function q0(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function zm(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var $i=class n{constructor(e,t,r,i,s=H.min(),a=H.min(),c=ke.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=c,this.expectedCount=u}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var Tl=class{constructor(e){this.ct=e}};function G0(n){let e=U0({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?ul(e,e.limit,"L"):e}var Bo=class{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(ue(e.integerValue));else if("doubleValue"in e){let r=ue(e.doubleValue);isNaN(r)?this.dt(t,13):(this.dt(t,15),Fi(r)?t.At(0):t.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(t,20),typeof r=="string"&&(r=Ft(r)),t.Rt(`${r.seconds||""}`),t.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(rn(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.dt(t,45),t.At(r.latitude||0),t.At(r.longitude||0)}else"mapValue"in e?mm(e)?this.dt(t,Number.MAX_SAFE_INTEGER):gm(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):j()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){let r=e.fields||{};this.dt(t,55);for(let i of Object.keys(r))this.Vt(i,t),this.Tt(r[i],t)}wt(e,t){var r,i;let s=e.fields||{};this.dt(t,53);let a="value",c=((i=(r=s[a].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(t,15),t.At(ue(c)),this.Vt(a,t),this.Tt(s[a],t)}bt(e,t){let r=e.values||[];this.dt(t,50);for(let i of r)this.Tt(i,t)}yt(e,t){this.dt(t,37),B.fromName(e).path.forEach(r=>{this.dt(t,60),this.Dt(r,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}};Bo.vt=new Bo;var Al=class{constructor(){this.un=new Dl}addToCollectionParentIndex(e,t){return this.un.add(t),O.resolve()}getCollectionParents(e,t){return O.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return O.resolve()}deleteFieldIndex(e,t){return O.resolve()}deleteAllFieldIndexes(e){return O.resolve()}createTargetIndexes(e,t){return O.resolve()}getDocumentsMatchingTarget(e,t){return O.resolve(null)}getIndexType(e,t){return O.resolve(0)}getFieldIndexes(e,t){return O.resolve([])}getNextCollectionGroupToUpdate(e){return O.resolve(null)}getMinOffset(e,t){return O.resolve(Sn.min())}getMinOffsetFromCollectionGroup(e,t){return O.resolve(Sn.min())}updateCollectionGroup(e,t,r){return O.resolve()}updateIndexEntries(e,t){return O.resolve()}},Dl=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Oe(he.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Oe(he.comparator)).toArray()}};var OR=new Uint8Array(0);var mt=class n{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};mt.DEFAULT_COLLECTION_PERCENTILE=10,mt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,mt.DEFAULT=new mt(41943040,mt.DEFAULT_COLLECTION_PERCENTILE,mt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),mt.DISABLED=new mt(-1,0,0);var ji=class n{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new n(0)}static kn(){return new n(-1)}};var bl=class{constructor(){this.changes=new on(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ot.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?O.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var Sl=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var Cl=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&Mi(r.mutation,i,Ze.empty(),Ae.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,J()).next(()=>r))}getLocalViewOfDocuments(e,t,r=J()){let i=Tn();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let a=Pi();return s.forEach((c,u)=>{a=a.insert(c,u.overlayedDocument)}),a}))}getOverlayedDocuments(e,t){let r=Tn();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,J()))}populateOverlays(e,t,r){let i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((a,c)=>{t.set(a,c)})})}computeViews(e,t,r,i){let s=Lt(),a=ki(),c=function(){return ki()}();return t.forEach((u,d)=>{let p=r.get(d.key);i.has(d.key)&&(p===void 0||p.mutation instanceof Et)?s=s.insert(d.key,d):p!==void 0?(a.set(d.key,p.mutation.getFieldMask()),Mi(p.mutation,d,p.mutation.getFieldMask(),Ae.now())):a.set(d.key,Ze.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((d,p)=>a.set(d,p)),t.forEach((d,p)=>{var m;return c.set(d,new Sl(p,(m=a.get(d))!==null&&m!==void 0?m:null))}),c))}recalculateAndSaveOverlays(e,t){let r=ki(),i=new pe((a,c)=>a-c),s=J();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(a=>{for(let c of a)c.keys().forEach(u=>{let d=t.get(u);if(d===null)return;let p=r.get(u)||Ze.empty();p=c.applyToLocalView(d,p),r.set(u,p);let m=(i.get(c.batchId)||J()).add(u);i=i.insert(c.batchId,m)})}).next(()=>{let a=[],c=i.getReverseIterator();for(;c.hasNext();){let u=c.getNext(),d=u.key,p=u.value,m=Cm();p.forEach(w=>{if(!s.has(w)){let b=Mm(t.get(w),r.get(w));b!==null&&m.set(w,b),s=s.add(w)}}),a.push(this.documentOverlayCache.saveOverlays(e,d,m))}return O.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(a){return B.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Tm(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{let a=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):O.resolve(Tn()),c=-1,u=s;return a.next(d=>O.forEach(d,(p,m)=>(c<m.largestBatchId&&(c=m.largestBatchId),s.get(p)?O.resolve():this.remoteDocumentCache.getEntry(e,p).next(w=>{u=u.insert(p,w)}))).next(()=>this.populateOverlays(e,d,s)).next(()=>this.computeViews(e,u,d,J())).next(p=>({batchId:c,changes:Sm(p)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new B(t)).next(r=>{let i=Pi();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let s=t.collectionGroup,a=Pi();return this.indexManager.getCollectionParents(e,s).next(c=>O.forEach(c,u=>{let d=function(m,w){return new sn(w,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(t,u.child(s));return this.getDocumentsMatchingCollectionQuery(e,d,r,i).next(p=>{p.forEach((m,w)=>{a=a.insert(m,w)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(a=>(s=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(a=>{s.forEach((u,d)=>{let p=d.getKey();a.get(p)===null&&(a=a.insert(p,ot.newInvalidDocument(p)))});let c=Pi();return a.forEach((u,d)=>{let p=s.get(u);p!==void 0&&Mi(p.mutation,d,Ze.empty(),Ae.now()),aa(t,d)&&(c=c.insert(u,d))}),c})}};var Rl=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return O.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:_t(i.createTime)}}(t)),O.resolve()}getNamedQuery(e,t){return O.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(i){return{name:i.name,query:G0(i.bundledQuery),readTime:_t(i.readTime)}}(t)),O.resolve()}};var Pl=class{constructor(){this.overlays=new pe(B.comparator),this.Ir=new Map}getOverlay(e,t){return O.resolve(this.overlays.get(t))}getOverlays(e,t){let r=Tn();return O.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.ht(e,t,s)}),O.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),O.resolve()}getOverlaysForCollection(e,t,r){let i=Tn(),s=t.length+1,a=new B(t.child("")),c=this.overlays.getIteratorFrom(a);for(;c.hasNext();){let u=c.getNext().value,d=u.getKey();if(!t.isPrefixOf(d.path))break;d.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return O.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new pe((d,p)=>d-p),a=this.overlays.getIterator();for(;a.hasNext();){let d=a.getNext().value;if(d.getKey().getCollectionGroup()===t&&d.largestBatchId>r){let p=s.get(d.largestBatchId);p===null&&(p=Tn(),s=s.insert(d.largestBatchId,p)),p.set(d.getKey(),d)}}let c=Tn(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((d,p)=>c.set(d,p)),!(c.size()>=i)););return O.resolve(c)}ht(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let a=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new pl(t,r));let s=this.Ir.get(t);s===void 0&&(s=J(),this.Ir.set(t,s)),this.Ir.set(t,s.add(r.key))}};var Nl=class{constructor(){this.sessionToken=ke.EMPTY_BYTE_STRING}getSessionToken(e){return O.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,O.resolve()}};var zi=class{constructor(){this.Tr=new Oe(ye.Er),this.dr=new Oe(ye.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){let r=new ye(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Vr(new ye(e,t))}mr(e,t){e.forEach(r=>this.removeReference(r,t))}gr(e){let t=new B(new he([])),r=new ye(t,e),i=new ye(t,e+1),s=[];return this.dr.forEachInRange([r,i],a=>{this.Vr(a),s.push(a.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let t=new B(new he([])),r=new ye(t,e),i=new ye(t,e+1),s=J();return this.dr.forEachInRange([r,i],a=>{s=s.add(a.key)}),s}containsKey(e){let t=new ye(e,0),r=this.Tr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},ye=class{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return B.comparator(e.key,t.key)||te(e.wr,t.wr)}static Ar(e,t){return te(e.wr,t.wr)||B.comparator(e.key,t.key)}};var Ol=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new Oe(ye.Er)}checkEmpty(e){return O.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let a=new dl(s,t,r,i);this.mutationQueue.push(a);for(let c of i)this.br=this.br.add(new ye(c.key,s)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return O.resolve(a)}lookupMutationBatch(e,t){return O.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.vr(r),s=i<0?0:i;return O.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return O.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return O.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new ye(t,0),i=new ye(t,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],a=>{let c=this.Dr(a.wr);s.push(c)}),O.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Oe(te);return t.forEach(i=>{let s=new ye(i,0),a=new ye(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,a],c=>{r=r.add(c.wr)})}),O.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,s=r;B.isDocumentKey(s)||(s=s.child(""));let a=new ye(new B(s),0),c=new Oe(te);return this.br.forEachWhile(u=>{let d=u.key.path;return!!r.isPrefixOf(d)&&(d.length===i&&(c=c.add(u.wr)),!0)},a),O.resolve(this.Cr(c))}Cr(e){let t=[];return e.forEach(r=>{let i=this.Dr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){oe(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return O.forEach(t.mutations,i=>{let s=new ye(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,t){let r=new ye(t,0),i=this.br.firstAfterOrEqual(r);return O.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,O.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var kl=class{constructor(e){this.Mr=e,this.docs=function(){return new pe(B.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),s=i?i.size:0,a=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:a}),this.size+=a-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return O.resolve(r?r.document.mutableCopy():ot.newInvalidDocument(t))}getEntries(e,t){let r=Lt();return t.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():ot.newInvalidDocument(i))}),O.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=Lt(),a=t.path,c=new B(a.child("")),u=this.docs.getIteratorFrom(c);for(;u.hasNext();){let{key:d,value:{document:p}}=u.getNext();if(!a.isPrefixOf(d.path))break;d.path.length>a.length+1||e0(ZI(p),r)<=0||(i.has(p.key)||aa(t,p))&&(s=s.insert(p.key,p.mutableCopy()))}return O.resolve(s)}getAllFromCollectionGroup(e,t,r,i){j()}Or(e,t){return O.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new Ml(this)}getSize(e){return O.resolve(this.size)}},Ml=class extends bl{constructor(e){super(),this.cr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),O.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}};var xl=class{constructor(e){this.persistence=e,this.Nr=new on(t=>bh(t),Sh),this.lastRemoteSnapshotVersion=H.min(),this.highestTargetId=0,this.Lr=0,this.Br=new zi,this.targetCount=0,this.kr=ji.Bn()}forEachTarget(e,t){return this.Nr.forEach((r,i)=>t(i)),O.resolve()}getLastRemoteSnapshotVersion(e){return O.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return O.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),O.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),O.resolve()}Kn(e){this.Nr.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.kr=new ji(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,O.resolve()}updateTargetData(e,t){return this.Kn(t),O.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,O.resolve()}removeTargets(e,t,r){let i=0,s=[];return this.Nr.forEach((a,c)=>{c.sequenceNumber<=t&&r.get(c.targetId)===null&&(this.Nr.delete(a),s.push(this.removeMatchingKeysForTargetId(e,c.targetId)),i++)}),O.waitFor(s).next(()=>i)}getTargetCount(e){return O.resolve(this.targetCount)}getTargetData(e,t){let r=this.Nr.get(t)||null;return O.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),O.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);let i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(a=>{s.push(i.markPotentiallyOrphaned(e,a))}),O.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),O.resolve()}getMatchingKeysForTargetId(e,t){let r=this.Br.yr(t);return O.resolve(r)}containsKey(e,t){return O.resolve(this.Br.containsKey(t))}};var Fl=class{constructor(e,t){this.qr={},this.overlays={},this.Qr=new fm(0),this.Kr=!1,this.Kr=!0,this.$r=new Nl,this.referenceDelegate=e(this),this.Ur=new xl(this),this.indexManager=new Al,this.remoteDocumentCache=function(i){return new kl(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new Tl(t),this.Gr=new Rl(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Pl,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new Ol(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){F("MemoryPersistence","Starting transaction:",e);let i=new Ll(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,t){return O.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,t)))}},Ll=class extends Ku{constructor(e){super(),this.currentSequenceNumber=e}},Vl=class n{constructor(e){this.persistence=e,this.Jr=new zi,this.Yr=null}static Zr(e){return new n(e)}get Xr(){if(this.Yr)return this.Yr;throw j()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),O.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),O.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),O.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(i=>this.Xr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return O.forEach(this.Xr,r=>{let i=B.fromPath(r);return this.ei(e,i).next(s=>{s||t.removeEntry(i,H.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return O.or([()=>O.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}};var Ul=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=i}static Wi(e,t){let r=J(),i=J();for(let s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new n(e,t.fromCache,r,i)}};var Bl=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var $l=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return Kp()?8:n0(Ue())>0?6:4}()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,i){let s={result:null};return this.Yi(e,t).next(a=>{s.result=a}).next(()=>{if(!s.result)return this.Zi(e,t,i,r).next(a=>{s.result=a})}).next(()=>{if(s.result)return;let a=new Bl;return this.Xi(e,t,a).next(c=>{if(s.result=c,this.zi)return this.es(e,t,a,c.size)})}).next(()=>s.result)}es(e,t,r,i){return r.documentReadCount<this.ji?(Ri()<=Y.DEBUG&&F("QueryEngine","SDK will not create cache indexes for query:",or(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),O.resolve()):(Ri()<=Y.DEBUG&&F("QueryEngine","Query:",or(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Ri()<=Y.DEBUG&&F("QueryEngine","The SDK decides to create cache indexes for query:",or(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,vt(t))):O.resolve())}Yi(e,t){if($g(t))return O.resolve(null);let r=vt(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=ul(t,null,"F"),r=vt(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let a=J(...s);return this.Ji.getDocuments(e,a).next(c=>this.indexManager.getMinOffset(e,r).next(u=>{let d=this.ts(t,c);return this.ns(t,d,a,u.readTime)?this.Yi(e,ul(t,null,"F")):this.rs(e,d,t,u)}))})))}Zi(e,t,r,i){return $g(t)||i.isEqual(H.min())?O.resolve(null):this.Ji.getDocuments(e,r).next(s=>{let a=this.ts(t,s);return this.ns(t,a,r,i)?O.resolve(null):(Ri()<=Y.DEBUG&&F("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),or(t)),this.rs(e,a,t,XI(i,-1)).next(c=>c))})}ts(e,t){let r=new Oe(Dm(e));return t.forEach((i,s)=>{aa(e,s)&&(r=r.add(s))}),r}ns(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,t,r){return Ri()<=Y.DEBUG&&F("QueryEngine","Using full collection scan to execute query:",or(t)),this.Ji.getDocumentsMatchingQuery(e,t,Sn.min(),r)}rs(e,t,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(a=>{s=s.insert(a.key,a)}),s))}};var jl=class{constructor(e,t,r,i){this.persistence=e,this.ss=t,this.serializer=i,this.os=new pe(te),this._s=new on(s=>bh(s),Sh),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Cl(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}};function W0(n,e,t,r){return new jl(n,e,t,r)}function qm(n,e){return D(this,null,function*(){let t=G(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.ls(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{let a=[],c=[],u=J();for(let d of i){a.push(d.batchId);for(let p of d.mutations)u=u.add(p.key)}for(let d of s){c.push(d.batchId);for(let p of d.mutations)u=u.add(p.key)}return t.localDocuments.getDocuments(r,u).next(d=>({hs:d,removedBatchIds:a,addedBatchIds:c}))})})})}function H0(n,e){let t=G(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),s=t.cs.newChangeBuffer({trackRemovals:!0});return function(c,u,d,p){let m=d.batch,w=m.keys(),b=O.resolve();return w.forEach(P=>{b=b.next(()=>p.getEntry(u,P)).next(N=>{let C=d.docVersions.get(P);oe(C!==null),N.version.compareTo(C)<0&&(m.applyToRemoteDocument(N,d),N.isValidDocument()&&(N.setReadTime(d.commitVersion),p.addEntry(N)))})}),b.next(()=>c.mutationQueue.removeMutationBatch(u,m))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let u=J();for(let d=0;d<c.mutationResults.length;++d)c.mutationResults[d].transformResults.length>0&&(u=u.add(c.batch.mutations[d].key));return u}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function Gm(n){let e=G(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function K0(n,e){let t=G(n),r=e.snapshotVersion,i=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let a=t.cs.newChangeBuffer({trackRemovals:!0});i=t.os;let c=[];e.targetChanges.forEach((p,m)=>{let w=i.get(m);if(!w)return;c.push(t.Ur.removeMatchingKeys(s,p.removedDocuments,m).next(()=>t.Ur.addMatchingKeys(s,p.addedDocuments,m)));let b=w.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(m)!==null?b=b.withResumeToken(ke.EMPTY_BYTE_STRING,H.min()).withLastLimboFreeSnapshotVersion(H.min()):p.resumeToken.approximateByteSize()>0&&(b=b.withResumeToken(p.resumeToken,r)),i=i.insert(m,b),function(N,C,U){return N.resumeToken.approximateByteSize()===0||C.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=3e8?!0:U.addedDocuments.size+U.modifiedDocuments.size+U.removedDocuments.size>0}(w,b,p)&&c.push(t.Ur.updateTargetData(s,b))});let u=Lt(),d=J();if(e.documentUpdates.forEach(p=>{e.resolvedLimboDocuments.has(p)&&c.push(t.persistence.referenceDelegate.updateLimboDocument(s,p))}),c.push(Q0(s,a,e.documentUpdates).next(p=>{u=p.Ps,d=p.Is})),!r.isEqual(H.min())){let p=t.Ur.getLastRemoteSnapshotVersion(s).next(m=>t.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));c.push(p)}return O.waitFor(c).next(()=>a.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,u,d)).next(()=>u)}).then(s=>(t.os=i,s))}function Q0(n,e,t){let r=J(),i=J();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let a=Lt();return t.forEach((c,u)=>{let d=s.get(c);u.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(c)),u.isNoDocument()&&u.version.isEqual(H.min())?(e.removeEntry(c,u.readTime),a=a.insert(c,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||u.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(u),a=a.insert(c,u)):F("LocalStore","Ignoring outdated watch update for ",c,". Current version:",d.version," Watch version:",u.version)}),{Ps:a,Is:i}})}function Y0(n,e){let t=G(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function J0(n,e){let t=G(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ur.getTargetData(r,e).next(s=>s?(i=s,O.resolve(i)):t.Ur.allocateTargetId(r).next(a=>(i=new $i(e,a,"TargetPurposeListen",r.currentSequenceNumber),t.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.os=t.os.insert(r.targetId,r),t._s.set(e,r.targetId)),r})}function zl(n,e,t){return D(this,null,function*(){let r=G(n),i=r.os.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",s,a=>r.persistence.referenceDelegate.removeTarget(a,i)))}catch(a){if(!Yi(a))throw a;F("LocalStore",`Failed to update sequence numbers for target ${e}: ${a}`)}r.os=r.os.remove(e),r._s.delete(i.target)})}function Xg(n,e,t){let r=G(n),i=H.min(),s=J();return r.persistence.runTransaction("Execute query","readwrite",a=>function(u,d,p){let m=G(u),w=m._s.get(p);return w!==void 0?O.resolve(m.os.get(w)):m.Ur.getTargetData(d,p)}(r,a,vt(e)).next(c=>{if(c)return i=c.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(a,c.targetId).next(u=>{s=u})}).next(()=>r.ss.getDocumentsMatchingQuery(a,e,t?i:H.min(),t?s:J())).next(c=>(X0(r,f0(e),c),{documents:c,Ts:s})))}function X0(n,e,t){let r=n.us.get(e)||H.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.us.set(e,r)}var $o=class{constructor(){this.activeTargetIds=_0()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var ql=class{constructor(){this.so=new $o,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new $o,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var Gl=class{_o(e){}shutdown(){}};var jo=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){F("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){F("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Do=null;function Fu(){return Do===null?Do=function(){return 268435456+Math.round(2147483648*Math.random())}():Do++,"0x"+Do.toString(16)}var Z0={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var Wl=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var Ne="WebChannelConnection",Hl=class extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;let r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(t,r,i,s,a){let c=Fu(),u=this.xo(t,r.toUriEncodedString());F("RestConnection",`Sending RPC '${t}' ${c}:`,u,i);let d={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(d,s,a),this.No(t,u,d,i).then(p=>(F("RestConnection",`Received RPC '${t}' ${c}: `,p),p),p=>{throw dr("RestConnection",`RPC '${t}' ${c} failed with error: `,p,"url: ",u,"request:",i),p})}Lo(t,r,i,s,a,c){return this.Mo(t,r,i,s,a)}Oo(t,r,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Dr}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,a)=>t[a]=s),i&&i.headers.forEach((s,a)=>t[a]=s)}xo(t,r){let i=Z0[t];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,i){let s=Fu();return new Promise((a,c)=>{let u=new Pu;u.setWithCredentials(!0),u.listenOnce(Nu.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Ci.NO_ERROR:let p=u.getResponseJson();F(Ne,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(p)),a(p);break;case Ci.TIMEOUT:F(Ne,`RPC '${e}' ${s} timed out`),c(new M(R.DEADLINE_EXCEEDED,"Request time out"));break;case Ci.HTTP_ERROR:let m=u.getStatus();if(F(Ne,`RPC '${e}' ${s} failed with status:`,m,"response text:",u.getResponseText()),m>0){let w=u.getResponseJson();Array.isArray(w)&&(w=w[0]);let b=w?.error;if(b&&b.status&&b.message){let P=function(C){let U=C.toLowerCase().replace(/_/g,"-");return Object.values(R).indexOf(U)>=0?U:R.UNKNOWN}(b.status);c(new M(P,b.message))}else c(new M(R.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new M(R.UNAVAILABLE,"Connection failed."));break;default:j()}}finally{F(Ne,`RPC '${e}' ${s} completed.`)}});let d=JSON.stringify(i);F(Ne,`RPC '${e}' ${s} sending request:`,i),u.send(t,"POST",d,r,15)})}Bo(e,t,r){let i=Fu(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=Mu(),c=ku(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,t,r),u.encodeInitMessageHeaders=!0;let p=s.join("");F(Ne,`Creating RPC '${e}' stream ${i}: ${p}`,u);let m=a.createWebChannel(p,u),w=!1,b=!1,P=new Wl({Io:C=>{b?F(Ne,`Not sending because RPC '${e}' stream ${i} is closed:`,C):(w||(F(Ne,`Opening RPC '${e}' stream ${i} transport.`),m.open(),w=!0),F(Ne,`RPC '${e}' stream ${i} sending:`,C),m.send(C))},To:()=>m.close()}),N=(C,U,z)=>{C.listen(U,L=>{try{z(L)}catch(ne){setTimeout(()=>{throw ne},0)}})};return N(m,sr.EventType.OPEN,()=>{b||(F(Ne,`RPC '${e}' stream ${i} transport opened.`),P.yo())}),N(m,sr.EventType.CLOSE,()=>{b||(b=!0,F(Ne,`RPC '${e}' stream ${i} transport closed`),P.So())}),N(m,sr.EventType.ERROR,C=>{b||(b=!0,dr(Ne,`RPC '${e}' stream ${i} transport errored:`,C),P.So(new M(R.UNAVAILABLE,"The operation could not be completed")))}),N(m,sr.EventType.MESSAGE,C=>{var U;if(!b){let z=C.data[0];oe(!!z);let L=z,ne=L.error||((U=L[0])===null||U===void 0?void 0:U.error);if(ne){F(Ne,`RPC '${e}' stream ${i} received error:`,ne);let le=ne.status,X=function(v){let _=me[v];if(_!==void 0)return Fm(_)}(le),E=ne.message;X===void 0&&(X=R.INTERNAL,E="Unknown error status: "+le+" with message "+ne.message),b=!0,P.So(new M(X,E)),m.close()}else F(Ne,`RPC '${e}' stream ${i} received:`,z),P.bo(z)}}),N(c,Ou.STAT_EVENT,C=>{C.stat===To.PROXY?F(Ne,`RPC '${e}' stream ${i} detected buffering proxy`):C.stat===To.NOPROXY&&F(Ne,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{P.wo()},0),P}};function Lu(){return typeof document<"u"?document:null}function ca(n){return new vl(n,!0)}var zo=class{constructor(e,t,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,t-r);i>0&&F("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var qo=class{constructor(e,t,r,i,s,a,c,u){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=c,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new zo(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return D(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return D(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,t){return D(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===R.RESOURCE_EXHAUSTED?(xt(t.toString()),xt("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===R.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(t)})}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===t&&this.P_(r,i)},r=>{e(()=>{let i=new M(R.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,t){let r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(()=>D(this,null,function*(){this.state=0,this.start()}))}I_(e){return F("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(F("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},Kl=class extends qo{constructor(e,t,r,i,s,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,a),this.serializer=s}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();let t=M0(this.serializer,e),r=function(s){if(!("targetChange"in s))return H.min();let a=s.targetChange;return a.targetIds&&a.targetIds.length?H.min():a.readTime?_t(a.readTime):H.min()}(e);return this.listener.d_(t,r)}A_(e){let t={};t.database=Il(this.serializer),t.addTarget=function(s,a){let c,u=a.target;if(c=al(u)?{documents:L0(s,u)}:{query:V0(s,u)._t},c.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){c.resumeToken=Lm(s,a.resumeToken);let d=_l(s,a.expectedCount);d!==null&&(c.expectedCount=d)}else if(a.snapshotVersion.compareTo(H.min())>0){c.readTime=Uo(s,a.snapshotVersion.toTimestamp());let d=_l(s,a.expectedCount);d!==null&&(c.expectedCount=d)}return c}(this.serializer,e);let r=B0(this.serializer,e);r&&(t.labels=r),this.a_(t)}R_(e){let t={};t.database=Il(this.serializer),t.removeTarget=e,this.a_(t)}},Ql=class extends qo{constructor(e,t,r,i,s,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,a),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return oe(!!e.streamToken),this.lastStreamToken=e.streamToken,oe(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){oe(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();let t=F0(e.writeResults,e.commitTime),r=_t(e.commitTime);return this.listener.g_(r,t)}p_(){let e={};e.database=Il(this.serializer),this.a_(e)}m_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>x0(this.serializer,r))};this.a_(t)}};var Yl=class extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new M(R.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Mo(e,wl(t,r),i,s,a)).catch(s=>{throw s.name==="FirebaseError"?(s.code===R.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new M(R.UNKNOWN,s.toString())})}Lo(e,t,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,c])=>this.connection.Lo(e,wl(t,r),i,a,c,s)).catch(a=>{throw a.name==="FirebaseError"?(a.code===R.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new M(R.UNKNOWN,a.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},Jl=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(xt(t),this.D_=!1):F("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var Xl=class{constructor(e,t,r,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(a=>{r.enqueueAndForget(()=>D(this,null,function*(){xn(this)&&(F("RemoteStore","Restarting streams for network reachability change."),yield function(u){return D(this,null,function*(){let d=G(u);d.L_.add(4),yield Ji(d),d.q_.set("Unknown"),d.L_.delete(4),yield ua(d)})}(this))}))}),this.q_=new Jl(r,i)}};function ua(n){return D(this,null,function*(){if(xn(n))for(let e of n.B_)yield e(!0)})}function Ji(n){return D(this,null,function*(){for(let e of n.B_)yield e(!1)})}function Wm(n,e){let t=G(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),Mh(t)?kh(t):br(t).r_()&&Oh(t,e))}function Nh(n,e){let t=G(n),r=br(t);t.N_.delete(e),r.r_()&&Hm(t,e),t.N_.size===0&&(r.r_()?r.o_():xn(t)&&t.q_.set("Unknown"))}function Oh(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(H.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}br(n).A_(e)}function Hm(n,e){n.Q_.xe(e),br(n).R_(e)}function kh(n){n.Q_=new yl({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),br(n).start(),n.q_.v_()}function Mh(n){return xn(n)&&!br(n).n_()&&n.N_.size>0}function xn(n){return G(n).L_.size===0}function Km(n){n.Q_=void 0}function eT(n){return D(this,null,function*(){n.q_.set("Online")})}function tT(n){return D(this,null,function*(){n.N_.forEach((e,t)=>{Oh(n,e)})})}function nT(n,e){return D(this,null,function*(){Km(n),Mh(n)?(n.q_.M_(e),kh(n)):n.q_.set("Unknown")})}function rT(n,e,t){return D(this,null,function*(){if(n.q_.set("Online"),e instanceof Lo&&e.state===2&&e.cause)try{yield function(i,s){return D(this,null,function*(){let a=s.cause;for(let c of s.targetIds)i.N_.has(c)&&(yield i.remoteSyncer.rejectListen(c,a),i.N_.delete(c),i.Q_.removeTarget(c))})}(n,e)}catch(r){F("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Go(n,r)}else if(e instanceof lr?n.Q_.Ke(e):e instanceof Fo?n.Q_.He(e):n.Q_.We(e),!t.isEqual(H.min()))try{let r=yield Gm(n.localStore);t.compareTo(r)>=0&&(yield function(s,a){let c=s.Q_.rt(a);return c.targetChanges.forEach((u,d)=>{if(u.resumeToken.approximateByteSize()>0){let p=s.N_.get(d);p&&s.N_.set(d,p.withResumeToken(u.resumeToken,a))}}),c.targetMismatches.forEach((u,d)=>{let p=s.N_.get(u);if(!p)return;s.N_.set(u,p.withResumeToken(ke.EMPTY_BYTE_STRING,p.snapshotVersion)),Hm(s,u);let m=new $i(p.target,u,d,p.sequenceNumber);Oh(s,m)}),s.remoteSyncer.applyRemoteEvent(c)}(n,t))}catch(r){F("RemoteStore","Failed to raise snapshot:",r),yield Go(n,r)}})}function Go(n,e,t){return D(this,null,function*(){if(!Yi(e))throw e;n.L_.add(1),yield Ji(n),n.q_.set("Offline"),t||(t=()=>Gm(n.localStore)),n.asyncQueue.enqueueRetryable(()=>D(this,null,function*(){F("RemoteStore","Retrying IndexedDB access"),yield t(),n.L_.delete(1),yield ua(n)}))})}function Qm(n,e){return e().catch(t=>Go(n,t,e))}function la(n){return D(this,null,function*(){let e=G(n),t=an(e),r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;iT(e);)try{let i=yield Y0(e.localStore,r);if(i===null){e.O_.length===0&&t.o_();break}r=i.batchId,sT(e,i)}catch(i){yield Go(e,i)}Ym(e)&&Jm(e)})}function iT(n){return xn(n)&&n.O_.length<10}function sT(n,e){n.O_.push(e);let t=an(n);t.r_()&&t.V_&&t.m_(e.mutations)}function Ym(n){return xn(n)&&!an(n).n_()&&n.O_.length>0}function Jm(n){an(n).start()}function oT(n){return D(this,null,function*(){an(n).p_()})}function aT(n){return D(this,null,function*(){let e=an(n);for(let t of n.O_)e.m_(t.mutations)})}function cT(n,e,t){return D(this,null,function*(){let r=n.O_.shift(),i=fl.from(r,e,t);yield Qm(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield la(n)})}function uT(n,e){return D(this,null,function*(){e&&an(n).V_&&(yield function(r,i){return D(this,null,function*(){if(function(a){return b0(a)&&a!==R.ABORTED}(i.code)){let s=r.O_.shift();an(r).s_(),yield Qm(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),yield la(r)}})}(n,e)),Ym(n)&&Jm(n)})}function Zg(n,e){return D(this,null,function*(){let t=G(n);t.asyncQueue.verifyOperationInProgress(),F("RemoteStore","RemoteStore received new credentials");let r=xn(t);t.L_.add(3),yield Ji(t),r&&t.q_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),yield ua(t)})}function lT(n,e){return D(this,null,function*(){let t=G(n);e?(t.L_.delete(2),yield ua(t)):e||(t.L_.add(2),yield Ji(t),t.q_.set("Unknown"))})}function br(n){return n.K_||(n.K_=function(t,r,i){let s=G(t);return s.w_(),new Kl(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Eo:eT.bind(null,n),Ro:tT.bind(null,n),mo:nT.bind(null,n),d_:rT.bind(null,n)}),n.B_.push(e=>D(this,null,function*(){e?(n.K_.s_(),Mh(n)?kh(n):n.q_.set("Unknown")):(yield n.K_.stop(),Km(n))}))),n.K_}function an(n){return n.U_||(n.U_=function(t,r,i){let s=G(t);return s.w_(),new Ql(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:oT.bind(null,n),mo:uT.bind(null,n),f_:aT.bind(null,n),g_:cT.bind(null,n)}),n.B_.push(e=>D(this,null,function*(){e?(n.U_.s_(),yield la(n)):(yield n.U_.stop(),n.O_.length>0&&(F("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))}))),n.U_}var Zl=class n{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new kt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){let a=Date.now()+r,c=new n(e,t,a,i,s);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new M(R.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function xh(n,e){if(xt("AsyncQueue",`${e}: ${n}`),Yi(n))return new M(R.UNAVAILABLE,`${e}: ${n}`);throw n}var Wo=class n{constructor(e){this.comparator=e?(t,r)=>e(t,r)||B.comparator(t.key,r.key):(t,r)=>B.comparator(t.key,r.key),this.keyedMap=Pi(),this.sortedSet=new pe(this.comparator)}static emptySet(e){return new n(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var Ho=class{constructor(){this.W_=new pe(B.comparator)}track(e){let t=e.doc.key,r=this.W_.get(t);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(t,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(t):e.type===1&&r.type===2?this.W_=this.W_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):j():this.W_=this.W_.insert(t,e)}G_(){let e=[];return this.W_.inorderTraversal((t,r)=>{e.push(r)}),e}},Er=class n{constructor(e,t,r,i,s,a,c,u,d){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=c,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,t,r,i,s){let a=[];return t.forEach(c=>{a.push({type:0,doc:c})}),new n(e,t,Wo.emptySet(t),a,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&oa(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var eh=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}},th=class{constructor(){this.queries=em(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,r){let i=G(t),s=i.queries;i.queries=em(),s.forEach((a,c)=>{for(let u of c.j_)u.onError(r)})})(this,new M(R.ABORTED,"Firestore shutting down"))}};function em(){return new on(n=>Am(n),oa)}function hT(n,e){return D(this,null,function*(){let t=G(n),r=3,i=e.query,s=t.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new eh,r=e.J_()?0:1);try{switch(r){case 0:s.z_=yield t.onListen(i,!0);break;case 1:s.z_=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(a){let c=xh(a,`Initialization of query '${or(e.query)}' failed`);return void e.onError(c)}t.queries.set(i,s),s.j_.push(e),e.Z_(t.onlineState),s.z_&&e.X_(s.z_)&&Fh(t)})}function dT(n,e){return D(this,null,function*(){let t=G(n),r=e.query,i=3,s=t.queries.get(r);if(s){let a=s.j_.indexOf(e);a>=0&&(s.j_.splice(a,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function fT(n,e){let t=G(n),r=!1;for(let i of e){let s=i.query,a=t.queries.get(s);if(a){for(let c of a.j_)c.X_(i)&&(r=!0);a.z_=i}}r&&Fh(t)}function pT(n,e,t){let r=G(n),i=r.queries.get(e);if(i)for(let s of i.j_)s.onError(t);r.queries.delete(e)}function Fh(n){n.Y_.forEach(e=>{e.next()})}var nh,tm;(tm=nh||(nh={})).ea="default",tm.Cache="cache";var rh=class{constructor(e,t,r){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Er(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;let r=t!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;let t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=Er.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==nh.Cache}};var Ko=class{constructor(e){this.key=e}},Qo=class{constructor(e){this.key=e}},ih=class{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=J(),this.mutatedKeys=J(),this.Aa=Dm(e),this.Ra=new Wo(this.Aa)}get Va(){return this.Ta}ma(e,t){let r=t?t.fa:new Ho,i=t?t.Ra:this.Ra,s=t?t.mutatedKeys:this.mutatedKeys,a=i,c=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,d=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((p,m)=>{let w=i.get(p),b=aa(this.query,m)?m:null,P=!!w&&this.mutatedKeys.has(w.key),N=!!b&&(b.hasLocalMutations||this.mutatedKeys.has(b.key)&&b.hasCommittedMutations),C=!1;w&&b?w.data.isEqual(b.data)?P!==N&&(r.track({type:3,doc:b}),C=!0):this.ga(w,b)||(r.track({type:2,doc:b}),C=!0,(u&&this.Aa(b,u)>0||d&&this.Aa(b,d)<0)&&(c=!0)):!w&&b?(r.track({type:0,doc:b}),C=!0):w&&!b&&(r.track({type:1,doc:w}),C=!0,(u||d)&&(c=!0)),C&&(b?(a=a.add(b),s=N?s.add(p):s.delete(p)):(a=a.delete(p),s=s.delete(p)))}),this.query.limit!==null)for(;a.size>this.query.limit;){let p=this.query.limitType==="F"?a.last():a.first();a=a.delete(p.key),s=s.delete(p.key),r.track({type:1,doc:p})}return{Ra:a,fa:r,ns:c,mutatedKeys:s}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;let a=e.fa.G_();a.sort((p,m)=>function(b,P){let N=C=>{switch(C){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return j()}};return N(b)-N(P)}(p.type,m.type)||this.Aa(p.doc,m.doc)),this.pa(r),i=i!=null&&i;let c=t&&!i?this.ya():[],u=this.da.size===0&&this.current&&!i?1:0,d=u!==this.Ea;return this.Ea=u,a.length!==0||d?{snapshot:new Er(this.query,e.Ra,s,a,e.mutatedKeys,u===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:c}:{wa:c}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Ho,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];let e=this.da;this.da=J(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});let t=[];return e.forEach(r=>{this.da.has(r)||t.push(new Qo(r))}),this.da.forEach(r=>{e.has(r)||t.push(new Ko(r))}),t}ba(e){this.Ta=e.Ts,this.da=J();let t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return Er.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},sh=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},oh=class{constructor(e){this.key=e,this.va=!1}},ah=class{constructor(e,t,r,i,s,a){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.Ca={},this.Fa=new on(c=>Am(c),oa),this.Ma=new Map,this.xa=new Set,this.Oa=new pe(B.comparator),this.Na=new Map,this.La=new zi,this.Ba={},this.ka=new Map,this.qa=ji.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function gT(n,e,t=!0){return D(this,null,function*(){let r=ry(n),i,s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=yield Xm(r,e,t,!0),i})}function mT(n,e){return D(this,null,function*(){let t=ry(n);yield Xm(t,e,!0,!1)})}function Xm(n,e,t,r){return D(this,null,function*(){let i=yield J0(n.localStore,vt(e)),s=i.targetId,a=n.sharedClientState.addLocalQueryTarget(s,t),c;return r&&(c=yield yT(n,e,s,a==="current",i.resumeToken)),n.isPrimaryClient&&t&&Wm(n.remoteStore,i),c})}function yT(n,e,t,r,i){return D(this,null,function*(){n.Ka=(m,w,b)=>function(N,C,U,z){return D(this,null,function*(){let L=C.view.ma(U);L.ns&&(L=yield Xg(N.localStore,C.query,!1).then(({documents:E})=>C.view.ma(E,L)));let ne=z&&z.targetChanges.get(C.targetId),le=z&&z.targetMismatches.get(C.targetId)!=null,X=C.view.applyChanges(L,N.isPrimaryClient,ne,le);return rm(N,C.targetId,X.wa),X.snapshot})}(n,m,w,b);let s=yield Xg(n.localStore,e,!0),a=new ih(e,s.Ts),c=a.ma(s.documents),u=Bi.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),d=a.applyChanges(c,n.isPrimaryClient,u);rm(n,t,d.wa);let p=new sh(e,t,a);return n.Fa.set(e,p),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),d.snapshot})}function vT(n,e,t){return D(this,null,function*(){let r=G(n),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(a=>!oa(a,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield zl(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&Nh(r.remoteStore,i.targetId),ch(r,i.targetId)}).catch(Qi))):(ch(r,i.targetId),yield zl(r.localStore,i.targetId,!0))})}function _T(n,e){return D(this,null,function*(){let t=G(n),r=t.Fa.get(e),i=t.Ma.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Nh(t.remoteStore,r.targetId))})}function wT(n,e,t){return D(this,null,function*(){let r=ST(n);try{let i=yield function(a,c){let u=G(a),d=Ae.now(),p=c.reduce((b,P)=>b.add(P.key),J()),m,w;return u.persistence.runTransaction("Locally write mutations","readwrite",b=>{let P=Lt(),N=J();return u.cs.getEntries(b,p).next(C=>{P=C,P.forEach((U,z)=>{z.isValidDocument()||(N=N.add(U))})}).next(()=>u.localDocuments.getOverlayedDocuments(b,P)).next(C=>{m=C;let U=[];for(let z of c){let L=D0(z,m.get(z.key).overlayedDocument);L!=null&&U.push(new Et(z.key,L,ym(L.value.mapValue),Mt.exists(!0)))}return u.mutationQueue.addMutationBatch(b,d,U,c)}).next(C=>{w=C;let U=C.applyToLocalDocumentSet(m,N);return u.documentOverlayCache.saveOverlays(b,C.batchId,U)})}).then(()=>({batchId:w.batchId,changes:Sm(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,c,u){let d=a.Ba[a.currentUser.toKey()];d||(d=new pe(te)),d=d.insert(c,u),a.Ba[a.currentUser.toKey()]=d}(r,i.batchId,t),yield Xi(r,i.changes),yield la(r.remoteStore)}catch(i){let s=xh(i,"Failed to persist write");t.reject(s)}})}function Zm(n,e){return D(this,null,function*(){let t=G(n);try{let r=yield K0(t.localStore,e);e.targetChanges.forEach((i,s)=>{let a=t.Na.get(s);a&&(oe(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?a.va=!0:i.modifiedDocuments.size>0?oe(a.va):i.removedDocuments.size>0&&(oe(a.va),a.va=!1))}),yield Xi(t,r,e)}catch(r){yield Qi(r)}})}function nm(n,e,t){let r=G(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Fa.forEach((s,a)=>{let c=a.view.Z_(e);c.snapshot&&i.push(c.snapshot)}),function(a,c){let u=G(a);u.onlineState=c;let d=!1;u.queries.forEach((p,m)=>{for(let w of m.j_)w.Z_(c)&&(d=!0)}),d&&Fh(u)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function ET(n,e,t){return D(this,null,function*(){let r=G(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Na.get(e),s=i&&i.key;if(s){let a=new pe(B.comparator);a=a.insert(s,ot.newNoDocument(s,H.min()));let c=J().add(s),u=new xo(H.min(),new Map,new pe(te),a,c);yield Zm(r,u),r.Oa=r.Oa.remove(s),r.Na.delete(e),Lh(r)}else yield zl(r.localStore,e,!1).then(()=>ch(r,e,t)).catch(Qi)})}function IT(n,e){return D(this,null,function*(){let t=G(n),r=e.batch.batchId;try{let i=yield H0(t.localStore,e);ty(t,r,null),ey(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Xi(t,i)}catch(i){yield Qi(i)}})}function TT(n,e,t){return D(this,null,function*(){let r=G(n);try{let i=yield function(a,c){let u=G(a);return u.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let p;return u.mutationQueue.lookupMutationBatch(d,c).next(m=>(oe(m!==null),p=m.keys(),u.mutationQueue.removeMutationBatch(d,m))).next(()=>u.mutationQueue.performConsistencyCheck(d)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(d,p,c)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,p)).next(()=>u.localDocuments.getDocuments(d,p))})}(r.localStore,e);ty(r,e,t),ey(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Xi(r,i)}catch(i){yield Qi(i)}})}function ey(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function ty(n,e,t){let r=G(n),i=r.Ba[r.currentUser.toKey()];if(i){let s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function ch(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Ma.get(e))n.Fa.delete(r),t&&n.Ca.$a(r,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(r=>{n.La.containsKey(r)||ny(n,r)})}function ny(n,e){n.xa.delete(e.path.canonicalString());let t=n.Oa.get(e);t!==null&&(Nh(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),Lh(n))}function rm(n,e,t){for(let r of t)r instanceof Ko?(n.La.addReference(r.key,e),AT(n,r)):r instanceof Qo?(F("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,e),n.La.containsKey(r.key)||ny(n,r.key)):j()}function AT(n,e){let t=e.key,r=t.path.canonicalString();n.Oa.get(t)||n.xa.has(r)||(F("SyncEngine","New document in limbo: "+t),n.xa.add(r),Lh(n))}function Lh(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){let e=n.xa.values().next().value;n.xa.delete(e);let t=new B(he.fromString(e)),r=n.qa.next();n.Na.set(r,new oh(t)),n.Oa=n.Oa.insert(t,r),Wm(n.remoteStore,new $i(vt(Ch(t.path)),r,"TargetPurposeLimboResolution",fm.oe))}}function Xi(n,e,t){return D(this,null,function*(){let r=G(n),i=[],s=[],a=[];r.Fa.isEmpty()||(r.Fa.forEach((c,u)=>{a.push(r.Ka(u,e,t).then(d=>{var p;if((d||t)&&r.isPrimaryClient){let m=d?!d.fromCache:(p=t?.targetChanges.get(u.targetId))===null||p===void 0?void 0:p.current;r.sharedClientState.updateQueryState(u.targetId,m?"current":"not-current")}if(d){i.push(d);let m=Ul.Wi(u.targetId,d);s.push(m)}}))}),yield Promise.all(a),r.Ca.d_(i),yield function(u,d){return D(this,null,function*(){let p=G(u);try{yield p.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>O.forEach(d,w=>O.forEach(w.$i,b=>p.persistence.referenceDelegate.addReference(m,w.targetId,b)).next(()=>O.forEach(w.Ui,b=>p.persistence.referenceDelegate.removeReference(m,w.targetId,b)))))}catch(m){if(!Yi(m))throw m;F("LocalStore","Failed to update sequence numbers: "+m)}for(let m of d){let w=m.targetId;if(!m.fromCache){let b=p.os.get(w),P=b.snapshotVersion,N=b.withLastLimboFreeSnapshotVersion(P);p.os=p.os.insert(w,N)}}})}(r.localStore,s))})}function DT(n,e){return D(this,null,function*(){let t=G(n);if(!t.currentUser.isEqual(e)){F("SyncEngine","User change. New user:",e.toKey());let r=yield qm(t.localStore,e);t.currentUser=e,function(s,a){s.ka.forEach(c=>{c.forEach(u=>{u.reject(new M(R.CANCELLED,a))})}),s.ka.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Xi(t,r.hs)}})}function bT(n,e){let t=G(n),r=t.Na.get(e);if(r&&r.va)return J().add(r.key);{let i=J(),s=t.Ma.get(e);if(!s)return i;for(let a of s){let c=t.Fa.get(a);i=i.unionWith(c.view.Va)}return i}}function ry(n){let e=G(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Zm.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=bT.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=ET.bind(null,e),e.Ca.d_=fT.bind(null,e.eventManager),e.Ca.$a=pT.bind(null,e.eventManager),e}function ST(n){let e=G(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=IT.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=TT.bind(null,e),e}var im=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return D(this,null,function*(){this.serializer=ca(t.databaseInfo.databaseId),this.sharedClientState=this.Wa(t),this.persistence=this.Ga(t),yield this.persistence.start(),this.localStore=this.za(t),this.gcScheduler=this.ja(t,this.localStore),this.indexBackfillerScheduler=this.Ha(t,this.localStore)})}ja(t,r){return null}Ha(t,r){return null}za(t){return W0(this.persistence,new $l,t.initialUser,this.serializer)}Ga(t){return new Fl(Vl.Zr,this.serializer)}Wa(t){return new ql}terminate(){return D(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})();var CT=(()=>{class n{initialize(t,r){return D(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>nm(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=DT.bind(null,this.syncEngine),yield lT(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new th}()}createDatastore(t){let r=ca(t.databaseInfo.databaseId),i=function(a){return new Hl(a)}(t.databaseInfo);return function(a,c,u,d){return new Yl(a,c,u,d)}(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return function(i,s,a,c,u){return new Xl(i,s,a,c,u)}(this.localStore,this.datastore,t.asyncQueue,r=>nm(this.syncEngine,r,0),function(){return jo.D()?new jo:new Gl}())}createSyncEngine(t,r){return function(s,a,c,u,d,p,m){let w=new ah(s,a,c,u,d,p);return m&&(w.Qa=!0),w}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return D(this,null,function*(){var t,r;yield function(s){return D(this,null,function*(){let a=G(s);F("RemoteStore","RemoteStore shutting down."),a.L_.add(5),yield Ji(a),a.k_.shutdown(),a.q_.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();var uh=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):xt("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var lh=class{constructor(e,t,r,i,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Ee.UNAUTHENTICATED,this.clientId=Ro.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,a=>D(this,null,function*(){F("FirestoreClient","Received user=",a.uid),yield this.authCredentialListener(a),this.user=a})),this.appCheckCredentials.start(r,a=>(F("FirestoreClient","Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new kt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>D(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=xh(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function Vu(n,e){return D(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),F("FirestoreClient","Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>D(this,null,function*(){r.isEqual(i)||(yield qm(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function sm(n,e){return D(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield RT(n);F("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>Zg(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>Zg(e.remoteStore,i)),n._onlineComponents=e})}function RT(n){return D(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){F("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Vu(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(i){return i.name==="FirebaseError"?i.code===R.FAILED_PRECONDITION||i.code===R.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;dr("Error using user provided cache. Falling back to memory cache: "+t),yield Vu(n,new im)}}else F("FirestoreClient","Using default OfflineComponentProvider"),yield Vu(n,new im);return n._offlineComponents})}function iy(n){return D(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(F("FirestoreClient","Using user provided OnlineComponentProvider"),yield sm(n,n._uninitializedComponentsProvider._online)):(F("FirestoreClient","Using default OnlineComponentProvider"),yield sm(n,new CT))),n._onlineComponents})}function PT(n){return iy(n).then(e=>e.syncEngine)}function om(n){return D(this,null,function*(){let e=yield iy(n),t=e.eventManager;return t.onListen=gT.bind(null,e.syncEngine),t.onUnlisten=vT.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=mT.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=_T.bind(null,e.syncEngine),t})}function sy(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var am=new Map;function oy(n,e,t){if(!t)throw new M(R.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function NT(n,e,t,r){if(e===!0&&r===!0)throw new M(R.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function cm(n){if(!B.isDocumentKey(n))throw new M(R.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function um(n){if(B.isDocumentKey(n))throw new M(R.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function ha(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":j()}function xi(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new M(R.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=ha(n);throw new M(R.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}var Yo=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new M(R.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new M(R.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}NT("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=sy((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new M(R.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new M(R.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new M(R.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Ir=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Yo({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new M(R.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new M(R.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Yo(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Bu;switch(r.type){case"firstParty":return new qu(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new M(R.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return D(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=am.get(t);r&&(F("ComponentProvider","Removing Datastore"),am.delete(t),r.terminate())}(this),Promise.resolve()}};function ay(n,e,t,r={}){var i;let s=(n=xi(n,Ir))._getSettings(),a=`${e}:${t}`;if(s.host!=="firestore.googleapis.com"&&s.host!==a&&dr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:a,ssl:!1})),r.mockUserToken){let c,u;if(typeof r.mockUserToken=="string")c=r.mockUserToken,u=Ee.MOCK_USER;else{c=zp(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let d=r.mockUserToken.sub||r.mockUserToken.user_id;if(!d)throw new M(R.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Ee(d)}n._authCredentials=new $u(new Co(c,u))}}var kn=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},je=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new nn(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},nn=class n extends kn{constructor(e,t,r){super(e,t,Ch(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new je(this.firestore,null,new B(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function cy(n,e,...t){if(n=Te(n),oy("collection","path",e),n instanceof Ir){let r=he.fromString(e,...t);return um(r),new nn(n,null,r)}{if(!(n instanceof je||n instanceof nn))throw new M(R.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(he.fromString(e,...t));return um(r),new nn(n.firestore,null,r)}}function uy(n,e,...t){if(n=Te(n),arguments.length===1&&(e=Ro.newId()),oy("doc","path",e),n instanceof Ir){let r=he.fromString(e,...t);return cm(r),new je(n,null,new B(r))}{if(!(n instanceof je||n instanceof nn))throw new M(R.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(he.fromString(e,...t));return cm(r),new je(n.firestore,n instanceof nn?n.converter:null,new B(r))}}var Jo=class{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new zo(this,"async_queue_retry"),this.Vu=()=>{let r=Lu();r&&F("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;let t=Lu();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;let t=Lu();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});let t=new kt;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}pu(){return D(this,null,function*(){if(this.Pu.length!==0){try{yield this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Yi(e))throw e;F("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}})}gu(e){let t=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;let i=function(a){let c=a.message||"";return a.stack&&(c=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),c}(r);throw xt("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=t,t}enqueueAfterDelay(e,t,r){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);let i=Zl.createAndSchedule(this,e,t,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&j()}verifyOperationInProgress(){}wu(){return D(this,null,function*(){let e;do e=this.mu,yield e;while(e!==this.mu)})}Su(e){for(let t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){let t=this.Tu.indexOf(e);this.Tu.splice(t,1)}};function lm(n){return function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(n,["next","error","complete"])}var Tr=class extends Ir{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new Jo,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return D(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Jo(e),this._firestoreClient=void 0,yield e}})}};function ly(n,e){let t=typeof n=="object"?n:vi(),r=typeof n=="string"?n:e||"(default)",i=lu(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let s=$p("firestore");s&&ay(i,...s)}return i}function Vh(n){if(n._terminated)throw new M(R.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||OT(n),n._firestoreClient}function OT(n){var e,t,r;let i=n._freezeSettings(),s=function(c,u,d,p){return new Qu(c,u,d,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,sy(p.experimentalLongPollingOptions),p.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new lh(n._authCredentials,n._appCheckCredentials,n._queue,s,n._componentsProvider&&function(c){let u=c?._online.build();return{_offline:c?._offline.build(u),_online:u}}(n._componentsProvider))}var qi=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(ke.fromBase64String(e))}catch(t){throw new M(R.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(ke.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var Ar=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new M(R.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new $e(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Gi=class{constructor(e){this._methodName=e}};var Wi=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new M(R.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new M(R.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return te(this._lat,e._lat)||te(this._long,e._long)}};var Hi=class{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}};var kT=/^__.*__$/,hh=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Et(e,this.data,this.fieldMask,t,this.fieldTransforms):new On(e,this.data,t,this.fieldTransforms)}},Xo=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Et(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function hy(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw j()}}var dh=class n{constructor(e,t,r,i,s,a){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return ea(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(hy(this.Cu)&&kT.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}},fh=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||ca(e)}Qu(e,t,r,i=!1){return new dh({Cu:e,methodName:t,qu:r,path:$e.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function dy(n){let e=n._freezeSettings(),t=ca(n._databaseId);return new fh(n._databaseId,!!e.ignoreUndefinedProperties,t)}function MT(n,e,t,r,i,s={}){let a=n.Qu(s.merge||s.mergeFields?2:0,e,t,i);Uh("Data must be an object, but it was:",a,r);let c=fy(r,a),u,d;if(s.merge)u=new Ze(a.fieldMask),d=a.fieldTransforms;else if(s.mergeFields){let p=[];for(let m of s.mergeFields){let w=ph(e,m,t);if(!a.contains(w))throw new M(R.INVALID_ARGUMENT,`Field '${w}' is specified in your field mask but missing from your input data.`);gy(p,w)||p.push(w)}u=new Ze(p),d=a.fieldTransforms.filter(m=>u.covers(m.field))}else u=null,d=a.fieldTransforms;return new hh(new Be(c),u,d)}var Zo=class n extends Gi{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function xT(n,e,t,r){let i=n.Qu(1,e,t);Uh("Data must be an object, but it was:",i,r);let s=[],a=Be.empty();Mn(r,(u,d)=>{let p=Bh(e,u,t);d=Te(d);let m=i.Nu(p);if(d instanceof Zo)s.push(p);else{let w=Zi(d,m);w!=null&&(s.push(p),a.set(p,w))}});let c=new Ze(s);return new Xo(a,c,i.fieldTransforms)}function FT(n,e,t,r,i,s){let a=n.Qu(1,e,t),c=[ph(e,r,t)],u=[i];if(s.length%2!=0)throw new M(R.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let w=0;w<s.length;w+=2)c.push(ph(e,s[w])),u.push(s[w+1]);let d=[],p=Be.empty();for(let w=c.length-1;w>=0;--w)if(!gy(d,c[w])){let b=c[w],P=u[w];P=Te(P);let N=a.Nu(b);if(P instanceof Zo)d.push(b);else{let C=Zi(P,N);C!=null&&(d.push(b),p.set(b,C))}}let m=new Ze(d);return new Xo(p,m,a.fieldTransforms)}function LT(n,e,t,r=!1){return Zi(t,n.Qu(r?4:3,e))}function Zi(n,e){if(py(n=Te(n)))return Uh("Unsupported field value:",e,n),fy(n,e);if(n instanceof Gi)return function(r,i){if(!hy(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);let s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){let s=[],a=0;for(let c of r){let u=Zi(c,i.Lu(a));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),a++}return{arrayValue:{values:s}}}(n,e)}return function(r,i){if((r=Te(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return w0(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let s=Ae.fromDate(r);return{timestampValue:Uo(i.serializer,s)}}if(r instanceof Ae){let s=new Ae(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Uo(i.serializer,s)}}if(r instanceof Wi)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof qi)return{bytesValue:Lm(i.serializer,r._byteString)};if(r instanceof je){let s=i.databaseId,a=r.firestore._databaseId;if(!a.isEqual(s))throw i.Bu(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Ph(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Hi)return function(a,c){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:a.toArray().map(u=>{if(typeof u!="number")throw c.Bu("VectorValues must only contain numeric values.");return Rh(c.serializer,u)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${ha(r)}`)}(n,e)}function fy(n,e){let t={};return pm(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Mn(n,(r,i)=>{let s=Zi(i,e.Mu(r));s!=null&&(t[r]=s)}),{mapValue:{fields:t}}}function py(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Ae||n instanceof Wi||n instanceof qi||n instanceof je||n instanceof Gi||n instanceof Hi)}function Uh(n,e,t){if(!py(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){let r=ha(t);throw r==="an object"?e.Bu(n+" a custom object"):e.Bu(n+" "+r)}}function ph(n,e,t){if((e=Te(e))instanceof Ar)return e._internalPath;if(typeof e=="string")return Bh(n,e);throw ea("Field path arguments must be of type string or ",n,!1,void 0,t)}var VT=new RegExp("[~\\*/\\[\\]]");function Bh(n,e,t){if(e.search(VT)>=0)throw ea(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Ar(...e.split("."))._internalPath}catch{throw ea(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function ea(n,e,t,r,i){let s=r&&!r.isEmpty(),a=i!==void 0,c=`Function ${e}() called with invalid data`;t&&(c+=" (via `toFirestore()`)"),c+=". ";let u="";return(s||a)&&(u+=" (found",s&&(u+=` in field ${r}`),a&&(u+=` in document ${i}`),u+=")"),new M(R.INVALID_ARGUMENT,c+n+u)}function gy(n,e){return n.some(t=>t.isEqual(e))}var ta=class{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new je(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new gh(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field($h("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},gh=class extends ta{data(){return super.data()}};function $h(n,e){return typeof e=="string"?Bh(n,e):e instanceof Ar?e._internalPath:e._delegate._internalPath}function UT(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new M(R.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Ki=class{},na=class extends Ki{};function my(n,e,...t){let r=[];e instanceof Ki&&r.push(e),r=r.concat(t),function(s){let a=s.filter(u=>u instanceof yh).length,c=s.filter(u=>u instanceof mh).length;if(a>1||a>0&&c>0)throw new M(R.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)n=i._apply(n);return n}var mh=class n extends na{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return vy(e._query,t),new kn(e.firestore,e.converter,cl(e._query,t))}_parse(e){let t=dy(e.firestore);return function(s,a,c,u,d,p,m){let w;if(d.isKeyField()){if(p==="array-contains"||p==="array-contains-any")throw new M(R.INVALID_ARGUMENT,`Invalid Query. You can't perform '${p}' queries on documentId().`);if(p==="in"||p==="not-in"){dm(m,p);let b=[];for(let P of m)b.push(hm(u,s,P));w={arrayValue:{values:b}}}else w=hm(u,s,m)}else p!=="in"&&p!=="not-in"&&p!=="array-contains-any"||dm(m,p),w=LT(c,a,m,p==="in"||p==="not-in");return ve.create(d,p,w)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};var yh=class n extends Ki{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:at.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(i,s){let a=i,c=s.getFlattenedFilters();for(let u of c)vy(a,u),a=cl(a,u)}(e._query,t),new kn(e.firestore,e.converter,cl(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var vh=class n extends na{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=function(i,s,a){if(i.startAt!==null)throw new M(R.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new M(R.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Rn(s,a)}(e._query,this._field,this._direction);return new kn(e.firestore,e.converter,function(i,s){let a=i.explicitOrderBy.concat([s]);return new sn(i.path,i.collectionGroup,a,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}};function yy(n,e="asc"){let t=e,r=$h("orderBy",n);return vh._create(r,t)}function hm(n,e,t){if(typeof(t=Te(t))=="string"){if(t==="")throw new M(R.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Tm(e)&&t.indexOf("/")!==-1)throw new M(R.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(he.fromString(t));if(!B.isDocumentKey(r))throw new M(R.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return xg(n,new B(r))}if(t instanceof je)return xg(n,t._key);throw new M(R.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ha(t)}.`)}function dm(n,e){if(!Array.isArray(n)||n.length===0)throw new M(R.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function vy(n,e){let t=function(i,s){for(let a of i)for(let c of a.getFlattenedFilters())if(s.indexOf(c.op)>=0)return c.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new M(R.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new M(R.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var _h=class{convertValue(e,t="none"){switch(Cn(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ue(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(rn(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw j()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return Mn(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertVectorValue(e){var t,r,i;let s=(i=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(a=>ue(a.doubleValue));return new Hi(s)}convertGeoPoint(e){return new Wi(ue(e.latitude),ue(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=Ah(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Li(e));default:return null}}convertTimestamp(e){let t=Ft(e);return new Ae(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=he.fromString(e);oe(zm(r));let i=new ko(r.get(1),r.get(3)),s=new B(r.popFirst(5));return i.isEqual(t)||xt(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}};function BT(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var Dn=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},ra=class extends ta{constructor(e,t,r,i,s,a){super(e,t,r,i,a),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new hr(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field($h("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},hr=class extends ra{data(e={}){return super.data(e)}},wh=class{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Dn(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new hr(this._firestore,this._userDataWriter,r.key,r,new Dn(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new M(R.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let a=0;return i._snapshot.docChanges.map(c=>{let u=new hr(i._firestore,i._userDataWriter,c.doc.key,c.doc,new Dn(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);return c.doc,{type:"added",doc:u,oldIndex:-1,newIndex:a++}})}{let a=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(c=>s||c.type!==3).map(c=>{let u=new hr(i._firestore,i._userDataWriter,c.doc.key,c.doc,new Dn(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter),d=-1,p=-1;return c.type!==0&&(d=a.indexOf(c.doc.key),a=a.delete(c.doc.key)),c.type!==1&&(a=a.add(c.doc),p=a.indexOf(c.doc.key)),{type:$T(c.type),doc:u,oldIndex:d,newIndex:p}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function $T(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return j()}}var ia=class extends _h{constructor(e){super(),this.firestore=e}convertBytes(e){return new qi(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new je(this.firestore,null,t)}};function jh(n,...e){var t,r,i;n=Te(n);let s={includeMetadataChanges:!1,source:"default"},a=0;typeof e[a]!="object"||lm(e[a])||(s=e[a],a++);let c={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(lm(e[a])){let m=e[a];e[a]=(t=m.next)===null||t===void 0?void 0:t.bind(m),e[a+1]=(r=m.error)===null||r===void 0?void 0:r.bind(m),e[a+2]=(i=m.complete)===null||i===void 0?void 0:i.bind(m)}let u,d,p;if(n instanceof je)d=xi(n.firestore,Tr),p=Ch(n._key.path),u={next:m=>{e[a]&&e[a](zT(d,n,m))},error:e[a+1],complete:e[a+2]};else{let m=xi(n,kn);d=xi(m.firestore,Tr),p=m._query;let w=new ia(d);u={next:b=>{e[a]&&e[a](new wh(d,w,m,b))},error:e[a+1],complete:e[a+2]},UT(n._query)}return function(w,b,P,N){let C=new uh(N),U=new rh(b,C,P);return w.asyncQueue.enqueueAndForget(()=>D(this,null,function*(){return hT(yield om(w),U)})),()=>{C.Za(),w.asyncQueue.enqueueAndForget(()=>D(this,null,function*(){return dT(yield om(w),U)}))}}(Vh(d),p,c,u)}function jT(n,e){return function(r,i){let s=new kt;return r.asyncQueue.enqueueAndForget(()=>D(this,null,function*(){return wT(yield PT(r),i,s)})),s.promise}(Vh(n),e)}function zT(n,e,t){let r=t.docs.get(e._key),i=new ia(n);return new ra(n,i,e._key,r,new Dn(t.hasPendingWrites,t.fromCache),e.converter)}var Eh=class{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=dy(e)}set(e,t,r){this._verifyNotCommitted();let i=Uu(e,this._firestore),s=BT(i.converter,t,r),a=MT(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(a.toMutation(i._key,Mt.none())),this}update(e,t,r,...i){this._verifyNotCommitted();let s=Uu(e,this._firestore),a;return a=typeof(t=Te(t))=="string"||t instanceof Ar?FT(this._dataReader,"WriteBatch.update",s._key,t,r,i):xT(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(a.toMutation(s._key,Mt.exists(!0))),this}delete(e){this._verifyNotCommitted();let t=Uu(e,this._firestore);return this._mutations=this._mutations.concat(new Ui(t._key,Mt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new M(R.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function Uu(n,e){if((n=Te(n)).firestore!==e)throw new M(R.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}function _y(n){return Vh(n=xi(n,Tr)),new Eh(n,e=>jT(n,e))}(function(e,t=!0){(function(i){Dr=i})(nr),Zt(new Xe("firestore",(r,{instanceIdentifier:i,options:s})=>{let a=r.getProvider("app").getImmediate(),c=new Tr(new ju(r.getProvider("auth-internal")),new Wu(r.getProvider("app-check-internal")),function(d,p){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new M(R.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ko(d.options.projectId,p)}(a,i),a);return s=Object.assign({useFetchStreams:t},s),c._setSettings(s),c},"PUBLIC").setMultipleInstances(!0)),we(Ng,"4.7.3",e),we(Ng,"4.7.3","esm2017")})();var da=function(){return da=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},da.apply(this,arguments)};var WT={includeMetadataChanges:!1};function wy(n,e){return e===void 0&&(e=WT),new qt(function(t){var r=jh(n,e,{next:t.next.bind(t),error:t.error.bind(t),complete:t.complete.bind(t)});return{unsubscribe:r}})}function Ey(n,e){var t;e===void 0&&(e={});var r=n.data(e);return!n.exists()||typeof r!="object"||r===null||!e.idField?r:da(da({},r),(t={},t[e.idField]=n.id,t))}function Iy(n){return wy(n,{includeMetadataChanges:!0}).pipe(W(function(e){return e.docs}))}function Ty(n,e){return e===void 0&&(e={}),Iy(n).pipe(W(function(t){return t.map(function(r){return Ey(r,e)})}))}var Fn=class{constructor(e){return e}},Ay="firestore",zh=class{constructor(){return wi(Ay)}};var qh=new se("angularfire2.firestore-instances");function HT(n,e){let t=fu(Ay,n,e);return t&&new Fn(t)}function KT(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new Fn(r)}}var QT={provide:zh,deps:[[new Ye,qh]]},YT={provide:Fn,useFactory:HT,deps:[[new Ye,qh],wn]};function lN(n,...e){return we("angularfire",ir.full,"fst"),rt([YT,QT,{provide:qh,useFactory:KT(n),multi:!0,deps:[Fe,gn,Ei,Ii,[new Ye,Eo],[new Ye,_i],...e]}])}var Gh=st(Ty,!0);var Wh=st(cy,!0);var Hh=st(uy,!0);var hN=st(ly,!0);var Dy=st(yy,!0);var Kh=st(my,!0);var Qh=st(_y,!0);var fa=class n{firestore=x(Fn);http=x(hi);catsDataUrl="https://conseil.latelier.co/data/cats.json";catsCollection=Wh(this.firestore,"cats");appearancesCollection=Wh(this.firestore,"cat_appearances");fetchCatsData$(){return this.http.get(this.catsDataUrl).pipe(W(e=>e.images),Ke(()=>We(()=>"An error occurred while fetching cats data from the remote source.")))}fetchPersistedCats$(){let e=Kh(this.catsCollection);return Gh(e).pipe(nt(t=>!!t),Ke(()=>We(()=>new Error("An error occurred while fetching persisted cats."))))}fetchCatAppearances$(){let e=Kh(this.appearancesCollection,Dy("appearedAt","desc"));return Gh(e).pipe(nt(t=>!!t),Ke(()=>We(()=>new Error("An error occurred while fetching cat last appearances."))))}fetchCats$(){return Ls([this.fetchCatsData$(),this.fetchPersistedCats$()]).pipe(W(([e,t])=>this.mergeCats(e,t)))}mergeCats(e,t){return e.map(r=>{let i=t.find(s=>s.id===r.id);return i||{id:r.id,imageUrl:r.url,score:0,appearances:0}})}updateCats(e){return D(this,null,function*(){let t=Qh(this.firestore);e.forEach(r=>{let i=Hh(this.catsCollection,r.id);t.set(i,r)}),yield t.commit()})}updateCatAppearances(e){return D(this,null,function*(){let t=Qh(this.firestore);e.forEach(r=>{let i=Hh(this.appearancesCollection,r.catId);t.set(i,r)}),yield t.commit()})}static \u0275fac=function(t){return new(t||n)};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})};var by=class n{MAX_RECENT_HISTORY=8;catStorage=x(fa);getCatRanking$(){return this.catStorage.fetchCats$().pipe(W(e=>e.sort((t,r)=>r.score===t.score?t.appearances-r.appearances:r.score-t.score)))}selectCatOpponents$(){return Ls([this.catStorage.fetchCats$(),this.catStorage.fetchCatAppearances$()]).pipe(W(([e,t])=>this.selectCatOpponents(e,t)))}selectCatOpponents(e,t){let r=this.getUnseenCats(e,t),i=this.getLeastAppeared(r);if(i.length<2){let s=r[Math.floor(Math.random()*r.length)];return[i[0],s]}return i.sort(()=>Math.random()-.5),[i[0],i[1]]}getUnseenCats(e,t){let r=t.slice(0,this.MAX_RECENT_HISTORY);return e.filter(i=>!r.some(s=>s.catId===i.id))}getLeastAppeared(e){let t=Math.min(...e.map(r=>r.appearances));return e.filter(r=>r.appearances===t)}recordVote(r){return D(this,arguments,function*({winner:e,loser:t}){try{e.score+=1,e.appearances+=1,t.appearances+=1,yield this.catStorage.updateCats([e,t]);let i=[{catId:e.id,appearedAt:new Date().toISOString()},{catId:t.id,appearedAt:new Date().toISOString()}];yield this.catStorage.updateCatAppearances(i),this.countPlayedMatches()}catch(i){throw console.error("Error recording vote:",i),new Error("Failed to register the vote. Please try again later.")}})}getPlayedMatches(){let e=localStorage.getItem("playedMatches");return Number(e??"0")}countPlayedMatches(){let e=localStorage.getItem("playedMatches");e||localStorage.setItem("playedMatches","0");let t=parseInt(e??"0",10)+1;localStorage.setItem("playedMatches",t.toString())}static \u0275fac=function(t){return new(t||n)};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})};var K="primary",ms=Symbol("RouteTitle"),ed=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function Or(n){return new ed(n)}function JT(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let s=0;s<r.length;s++){let a=r[s],c=n[s];if(a[0]===":")i[a.substring(1)]=c;else if(a!==c.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function XT(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!It(n[t],e[t]))return!1;return!0}function It(n,e){let t=n?td(n):void 0,r=e?td(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!My(n[i],e[i]))return!1;return!0}function td(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function My(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}else return n===e}function xy(n){return n.length>0?n[n.length-1]:null}function cn(n){return Uf(n)?n:bc(n)?Le(Promise.resolve(n)):$(n)}var ZT={exact:Ly,subset:Vy},Fy={exact:eA,subset:tA,ignored:()=>!0};function Sy(n,e,t){return ZT[t.paths](n.root,e.root,t.matrixParams)&&Fy[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function eA(n,e){return It(n,e)}function Ly(n,e,t){if(!Vn(n.segments,e.segments)||!ma(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!Ly(n.children[r],e.children[r],t))return!1;return!0}function tA(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>My(n[t],e[t]))}function Vy(n,e,t){return Uy(n,e,e.segments,t)}function Uy(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!Vn(i,t)||e.hasChildren()||!ma(i,t,r))}else if(n.segments.length===t.length){if(!Vn(n.segments,t)||!ma(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!Vy(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!Vn(n.segments,i)||!ma(n.segments,i,r)||!n.children[K]?!1:Uy(n.children[K],e,s,r)}}function ma(n,e,t){return e.every((r,i)=>Fy[t](n[i].parameters,r.parameters))}var Ut=class{constructor(e=new ie([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Or(this.queryParams),this._queryParamMap}toString(){return iA.serialize(this)}},ie=class{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return ya(this)}},Ln=class{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Or(this.parameters),this._parameterMap}toString(){return $y(this)}};function nA(n,e){return Vn(n,e)&&n.every((t,r)=>It(t.parameters,e[r].parameters))}function Vn(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function rA(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===K&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==K&&(t=t.concat(e(i,r)))}),t}var Sd=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:()=>new os,providedIn:"root"})}}return n})(),os=class{parse(e){let t=new rd(e);return new Ut(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${es(e.root,!0)}`,r=aA(e.queryParams),i=typeof e.fragment=="string"?`#${sA(e.fragment)}`:"";return`${t}${r}${i}`}},iA=new os;function ya(n){return n.segments.map(e=>$y(e)).join("/")}function es(n,e){if(!n.hasChildren())return ya(n);if(e){let t=n.children[K]?es(n.children[K],!1):"",r=[];return Object.entries(n.children).forEach(([i,s])=>{i!==K&&r.push(`${i}:${es(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=rA(n,(r,i)=>i===K?[es(n.children[K],!1)]:[`${i}:${es(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[K]!=null?`${ya(n)}/${t[0]}`:`${ya(n)}/(${t.join("//")})`}}function By(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function pa(n){return By(n).replace(/%3B/gi,";")}function sA(n){return encodeURI(n)}function nd(n){return By(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function va(n){return decodeURIComponent(n)}function Cy(n){return va(n.replace(/\+/g,"%20"))}function $y(n){return`${nd(n.path)}${oA(n.parameters)}`}function oA(n){return Object.entries(n).map(([e,t])=>`;${nd(e)}=${nd(t)}`).join("")}function aA(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${pa(t)}=${pa(i)}`).join("&"):`${pa(t)}=${pa(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var cA=/^[^\/()?;#]+/;function Yh(n){let e=n.match(cA);return e?e[0]:""}var uA=/^[^\/()?;=#]+/;function lA(n){let e=n.match(uA);return e?e[0]:""}var hA=/^[^=?&#]+/;function dA(n){let e=n.match(hA);return e?e[0]:""}var fA=/^[^&#]+/;function pA(n){let e=n.match(fA);return e?e[0]:""}var rd=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new ie([],{}):new ie([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[K]=new ie(e,t)),r}parseSegment(){let e=Yh(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new fe(4009,!1);return this.capture(e),new Ln(va(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=lA(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=Yh(this.remaining);i&&(r=i,this.capture(r))}e[va(t)]=va(r)}parseQueryParam(e){let t=dA(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let a=pA(this.remaining);a&&(r=a,this.capture(r))}let i=Cy(t),s=Cy(r);if(e.hasOwnProperty(i)){let a=e[i];Array.isArray(a)||(a=[a],e[i]=a),a.push(s)}else e[i]=s}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Yh(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new fe(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=K);let a=this.parseChildren();t[s]=Object.keys(a).length===1?a[K]:new ie([],a),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new fe(4011,!1)}};function jy(n){return n.segments.length>0?new ie([],{[K]:n}):n}function zy(n){let e={};for(let[r,i]of Object.entries(n.children)){let s=zy(i);if(r===K&&s.segments.length===0&&s.hasChildren())for(let[a,c]of Object.entries(s.children))e[a]=c;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}let t=new ie(n.segments,e);return gA(t)}function gA(n){if(n.numberOfChildren===1&&n.children[K]){let e=n.children[K];return new ie(n.segments.concat(e.segments),e.children)}return n}function as(n){return n instanceof Ut}function mA(n,e,t=null,r=null){let i=qy(n);return Gy(i,e,t,r)}function qy(n){let e;function t(s){let a={};for(let u of s.children){let d=t(u);a[u.outlet]=d}let c=new ie(s.url,a);return s===n&&(e=c),c}let r=t(n.root),i=jy(r);return e??i}function Gy(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return Jh(i,i,i,t,r);let s=yA(e);if(s.toRoot())return Jh(i,i,new ie([],{}),t,r);let a=vA(s,i,n),c=a.processChildren?rs(a.segmentGroup,a.index,s.commands):Hy(a.segmentGroup,a.index,s.commands);return Jh(i,a.segmentGroup,c,t,r)}function _a(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function cs(n){return typeof n=="object"&&n!=null&&n.outlets}function Jh(n,e,t,r,i){let s={};r&&Object.entries(r).forEach(([u,d])=>{s[u]=Array.isArray(d)?d.map(p=>`${p}`):`${d}`});let a;n===e?a=t:a=Wy(n,e,t);let c=jy(zy(a));return new Ut(c,s,i)}function Wy(n,e,t){let r={};return Object.entries(n.children).forEach(([i,s])=>{s===e?r[i]=t:r[i]=Wy(s,e,t)}),new ie(n.segments,r)}var wa=class{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&_a(r[0]))throw new fe(4003,!1);let i=r.find(cs);if(i&&i!==xy(r))throw new fe(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function yA(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new wa(!0,0,n);let e=0,t=!1,r=n.reduce((i,s,a)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let c={};return Object.entries(s.outlets).forEach(([u,d])=>{c[u]=typeof d=="string"?d.split("/"):d}),[...i,{outlets:c}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:a===0?(s.split("/").forEach((c,u)=>{u==0&&c==="."||(u==0&&c===""?t=!0:c===".."?e++:c!=""&&i.push(c))}),i):[...i,s]},[]);return new wa(t,e,r)}var Rr=class{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function vA(n,e,t){if(n.isAbsolute)return new Rr(e,!0,0);if(!t)return new Rr(e,!1,NaN);if(t.parent===null)return new Rr(t,!0,0);let r=_a(n.commands[0])?0:1,i=t.segments.length-1+r;return _A(t,i,n.numberOfDoubleDots)}function _A(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new fe(4005,!1);i=r.segments.length}return new Rr(r,!1,i-s)}function wA(n){return cs(n[0])?n[0].outlets:{[K]:n}}function Hy(n,e,t){if(n??=new ie([],{}),n.segments.length===0&&n.hasChildren())return rs(n,e,t);let r=EA(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let s=new ie(n.segments.slice(0,r.pathIndex),{});return s.children[K]=new ie(n.segments.slice(r.pathIndex),n.children),rs(s,0,i)}else return r.match&&i.length===0?new ie(n.segments,{}):r.match&&!n.hasChildren()?id(n,e,t):r.match?rs(n,0,i):id(n,e,t)}function rs(n,e,t){if(t.length===0)return new ie(n.segments,{});{let r=wA(t),i={};if(Object.keys(r).some(s=>s!==K)&&n.children[K]&&n.numberOfChildren===1&&n.children[K].segments.length===0){let s=rs(n.children[K],e,t);return new ie(n.segments,s.children)}return Object.entries(r).forEach(([s,a])=>{typeof a=="string"&&(a=[a]),a!==null&&(i[s]=Hy(n.children[s],e,a))}),Object.entries(n.children).forEach(([s,a])=>{r[s]===void 0&&(i[s]=a)}),new ie(n.segments,i)}}function EA(n,e,t){let r=0,i=e,s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;let a=n.segments[i],c=t[r];if(cs(c))break;let u=`${c}`,d=r<t.length-1?t[r+1]:null;if(i>0&&u===void 0)break;if(u&&d&&typeof d=="object"&&d.outlets===void 0){if(!Py(u,d,a))return s;r+=2}else{if(!Py(u,{},a))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function id(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let s=t[i];if(cs(s)){let u=IA(s.outlets);return new ie(r,u)}if(i===0&&_a(t[0])){let u=n.segments[e];r.push(new Ln(u.path,Ry(t[0]))),i++;continue}let a=cs(s)?s.outlets[K]:`${s}`,c=i<t.length-1?t[i+1]:null;a&&c&&_a(c)?(r.push(new Ln(a,Ry(c))),i+=2):(r.push(new Ln(a,{})),i++)}return new ie(r,{})}function IA(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=id(new ie([],{}),0,r))}),e}function Ry(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function Py(n,e,t){return n==t.path&&It(e,t.parameters)}var is="imperative",De=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(De||{}),et=class{constructor(e,t){this.id=e,this.url=t}},us=class extends et{constructor(e,t,r="imperative",i=null){super(e,t),this.type=De.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Un=class extends et{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=De.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},qe=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(qe||{}),sd=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(sd||{}),Vt=class extends et{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=De.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Bn=class extends et{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=De.NavigationSkipped}},ls=class extends et{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=De.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Ea=class extends et{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=De.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},od=class extends et{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=De.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},ad=class extends et{constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=De.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},cd=class extends et{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=De.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},ud=class extends et{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=De.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},ld=class{constructor(e){this.route=e,this.type=De.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},hd=class{constructor(e){this.route=e,this.type=De.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},dd=class{constructor(e){this.snapshot=e,this.type=De.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},fd=class{constructor(e){this.snapshot=e,this.type=De.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},pd=class{constructor(e){this.snapshot=e,this.type=De.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},gd=class{constructor(e){this.snapshot=e,this.type=De.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var hs=class{},kr=class{constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function TA(n,e){return n.providers&&!n._injector&&(n._injector=ep(n.providers,e,`Route: ${n.path}`)),n._injector??e}function ct(n){return n.outlet||K}function AA(n,e){let t=n.filter(r=>ct(r)===e);return t.push(...n.filter(r=>ct(r)!==e)),t}function ys(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var md=class{get injector(){return ys(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new Ca(this.rootInjector),this.attachRef=null}},Ca=(()=>{class n{constructor(t){this.rootInjector=t,this.contexts=new Map}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new md(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static{this.\u0275fac=function(r){return new(r||n)(Q(Wn))}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Ia=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=yd(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=yd(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=vd(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return vd(e,this._root).map(t=>t.value)}};function yd(n,e){if(n===e.value)return e;for(let t of e.children){let r=yd(n,t);if(r)return r}return null}function vd(n,e){if(n===e.value)return[e];for(let t of e.children){let r=vd(n,t);if(r.length)return r.unshift(e),r}return[]}var ze=class{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function Cr(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var Ta=class extends Ia{constructor(e,t){super(e),this.snapshot=t,Cd(this,e)}toString(){return this.snapshot.toString()}};function Ky(n){let e=DA(n),t=new Ge([new Ln("",{})]),r=new Ge({}),i=new Ge({}),s=new Ge({}),a=new Ge(""),c=new Mr(t,r,s,a,i,K,n,e.root);return c.snapshot=e.root,new Ta(new ze(c,[]),e)}function DA(n){let e={},t={},r={},i="",s=new Pr([],e,r,i,t,K,n,null,{});return new Da("",new ze(s,[]))}var Mr=class{constructor(e,t,r,i,s,a,c,u){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=a,this.component=c,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(W(d=>d[ms]))??$(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(W(e=>Or(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(W(e=>Or(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Aa(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:V(V({},e.params),n.params),data:V(V({},e.data),n.data),resolve:V(V(V(V({},n.data),e.data),i?.data),n._resolvedData)}:r={params:V({},n.params),data:V({},n.data),resolve:V(V({},n.data),n._resolvedData??{})},i&&Yy(i)&&(r.resolve[ms]=i.title),r}var Pr=class{get title(){return this.data?.[ms]}constructor(e,t,r,i,s,a,c,u,d){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=a,this.component=c,this.routeConfig=u,this._resolve=d}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Or(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Or(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},Da=class extends Ia{constructor(e,t){super(t),this.url=e,Cd(this,t)}toString(){return Qy(this._root)}};function Cd(n,e){e.value._routerState=n,e.children.forEach(t=>Cd(n,t))}function Qy(n){let e=n.children.length>0?` { ${n.children.map(Qy).join(", ")} } `:"";return`${n.value}${e}`}function Xh(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,It(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),It(e.params,t.params)||n.paramsSubject.next(t.params),XT(e.url,t.url)||n.urlSubject.next(t.url),It(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function _d(n,e){let t=It(n.params,e.params)&&nA(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||_d(n.parent,e.parent))}function Yy(n){return typeof n.title=="string"||n.title===null}var bA=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=K,this.activateEvents=new mn,this.deactivateEvents=new mn,this.attachEvents=new mn,this.detachEvents=new mn,this.parentContexts=x(Ca),this.location=x(Ac),this.changeDetector=x(si),this.inputBinder=x(Rd,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new fe(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new fe(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new fe(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new fe(4013,!1);this._activatedRoute=t;let i=this.location,a=t.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,u=new wd(t,c,i.injector);this.activated=i.createComponent(a,{index:i.length,injector:u,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=Vs({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[_c]})}}return n})(),wd=class n{__ngOutletInjector(e){return new n(this.route,this.childContexts,e)}constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Mr?this.route:e===Ca?this.childContexts:this.parent.get(e,t)}},Rd=new se("");function SA(n,e,t){let r=ds(n,e._root,t?t._root:void 0);return new Ta(r,e)}function ds(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=CA(n,e,t);return new ze(r,i)}else{if(n.shouldAttach(e.value)){let s=n.retrieve(e.value);if(s!==null){let a=s.route;return a.value._futureSnapshot=e.value,a.children=e.children.map(c=>ds(n,c)),a}}let r=RA(e.value),i=e.children.map(s=>ds(n,s));return new ze(r,i)}}function CA(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return ds(n,r,i);return ds(n,r)})}function RA(n){return new Mr(new Ge(n.url),new Ge(n.params),new Ge(n.queryParams),new Ge(n.fragment),new Ge(n.data),n.outlet,n.component,n)}var fs=class{constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},Jy="ngNavigationCancelingError";function ba(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=as(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=Xy(!1,qe.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function Xy(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[Jy]=!0,t.cancellationCode=e,t}function PA(n){return Zy(n)&&as(n.url)}function Zy(n){return!!n&&n[Jy]}var NA=(n,e,t,r)=>W(i=>(new Ed(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),Ed=class{constructor(e,t,r,i,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Xh(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=Cr(t);e.children.forEach(s=>{let a=s.value.outlet;this.deactivateRoutes(s,i[a],r),delete i[a]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if(i===s)if(i.component){let a=r.getContext(i.outlet);a&&this.deactivateChildRoutes(e,t,a.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Cr(e);for(let a of Object.values(s))this.deactivateRouteAndItsChildren(a,i);if(r&&r.outlet){let a=r.outlet.detach(),c=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:a,route:e,contexts:c})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Cr(e);for(let a of Object.values(s))this.deactivateRouteAndItsChildren(a,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=Cr(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new gd(s.value.snapshot))}),e.children.length&&this.forwardEvent(new fd(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if(Xh(i),i===s)if(i.component){let a=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,a.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let a=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let c=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),a.children.onOutletReAttached(c.contexts),a.attachRef=c.componentRef,a.route=c.route.value,a.outlet&&a.outlet.attach(c.componentRef,c.route.value),Xh(c.route.value),this.activateChildRoutes(e,null,a.children)}else a.attachRef=null,a.route=i,a.outlet&&a.outlet.activateWith(i,a.injector),this.activateChildRoutes(e,null,a.children)}else this.activateChildRoutes(e,null,r)}},Sa=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Nr=class{constructor(e,t){this.component=e,this.route=t}};function OA(n,e,t){let r=n._root,i=e?e._root:null;return ts(r,i,t,[r.value])}function kA(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function Fr(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!Wf(n)?n:e.get(n):r}function ts(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=Cr(e);return n.children.forEach(a=>{MA(a,s[a.value.outlet],t,r.concat([a.value]),i),delete s[a.value.outlet]}),Object.entries(s).forEach(([a,c])=>ss(c,t.getContext(a),i)),i}function MA(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=n.value,a=e?e.value:null,c=t?t.getContext(n.value.outlet):null;if(a&&s.routeConfig===a.routeConfig){let u=xA(a,s,s.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new Sa(r)):(s.data=a.data,s._resolvedData=a._resolvedData),s.component?ts(n,e,c?c.children:null,r,i):ts(n,e,t,r,i),u&&c&&c.outlet&&c.outlet.isActivated&&i.canDeactivateChecks.push(new Nr(c.outlet.component,a))}else a&&ss(e,c,i),i.canActivateChecks.push(new Sa(r)),s.component?ts(n,null,c?c.children:null,r,i):ts(n,null,t,r,i);return i}function xA(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!Vn(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Vn(n.url,e.url)||!It(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!_d(n,e)||!It(n.queryParams,e.queryParams);case"paramsChange":default:return!_d(n,e)}}function ss(n,e,t){let r=Cr(n),i=n.value;Object.entries(r).forEach(([s,a])=>{i.component?e?ss(a,e.children.getContext(s),t):ss(a,null,t):ss(a,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new Nr(e.outlet.component,i)):t.canDeactivateChecks.push(new Nr(null,i)):t.canDeactivateChecks.push(new Nr(null,i))}function vs(n){return typeof n=="function"}function FA(n){return typeof n=="boolean"}function LA(n){return n&&vs(n.canLoad)}function VA(n){return n&&vs(n.canActivate)}function UA(n){return n&&vs(n.canActivateChild)}function BA(n){return n&&vs(n.canDeactivate)}function $A(n){return n&&vs(n.canMatch)}function ev(n){return n instanceof Bf||n?.name==="EmptyError"}var ga=Symbol("INITIAL_VALUE");function xr(){return Qe(n=>hc(n.map(e=>e.pipe(Gn(1),mc(ga)))).pipe(W(e=>{for(let t of e)if(t!==!0){if(t===ga)return ga;if(t===!1||jA(t))return t}return!0}),bt(e=>e!==ga),Gn(1)))}function jA(n){return as(n)||n instanceof fs}function zA(n,e){return He(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:a}}=t;return a.length===0&&s.length===0?$(_e(V({},t),{guardsResult:!0})):qA(a,r,i,n).pipe(He(c=>c&&FA(c)?GA(r,s,n,e):$(c)),W(c=>_e(V({},t),{guardsResult:c})))})}function qA(n,e,t,r){return Le(n).pipe(He(i=>YA(i.component,i.route,t,e,r)),nt(i=>i!==!0,!0))}function GA(n,e,t,r){return Le(e).pipe(pn(i=>$f(HA(i.route.parent,r),WA(i.route,r),QA(n,i.path,t),KA(n,i.route,t))),nt(i=>i!==!0,!0))}function WA(n,e){return n!==null&&e&&e(new pd(n)),$(!0)}function HA(n,e){return n!==null&&e&&e(new dd(n)),$(!0)}function KA(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return $(!0);let i=r.map(s=>dc(()=>{let a=ys(e)??t,c=Fr(s,a),u=VA(c)?c.canActivate(e,n):it(a,()=>c(e,n));return cn(u).pipe(nt())}));return $(i).pipe(xr())}function QA(n,e,t){let r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(a=>kA(a)).filter(a=>a!==null).map(a=>dc(()=>{let c=a.guards.map(u=>{let d=ys(a.node)??t,p=Fr(u,d),m=UA(p)?p.canActivateChild(r,n):it(d,()=>p(r,n));return cn(m).pipe(nt())});return $(c).pipe(xr())}));return $(s).pipe(xr())}function YA(n,e,t,r,i){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return $(!0);let a=s.map(c=>{let u=ys(e)??i,d=Fr(c,u),p=BA(d)?d.canDeactivate(n,e,t,r):it(u,()=>d(n,e,t,r));return cn(p).pipe(nt())});return $(a).pipe(xr())}function JA(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return $(!0);let s=i.map(a=>{let c=Fr(a,n),u=LA(c)?c.canLoad(e,t):it(n,()=>c(e,t));return cn(u)});return $(s).pipe(xr(),tv(r))}function tv(n){return sc(ge(e=>{if(typeof e!="boolean")throw ba(n,e)}),W(e=>e===!0))}function XA(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return $(!0);let s=i.map(a=>{let c=Fr(a,n),u=$A(c)?c.canMatch(e,t):it(n,()=>c(e,t));return cn(u)});return $(s).pipe(xr(),tv(r))}var ps=class{constructor(e){this.segmentGroup=e||null}},gs=class extends Error{constructor(e){super(),this.urlTree=e}};function Sr(n){return We(new ps(n))}function ZA(n){return We(new fe(4e3,!1))}function eD(n){return We(Xy(!1,qe.GuardRejected))}var Id=class{constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return $(r);if(i.numberOfChildren>1||!i.children[K])return ZA(`${e.redirectTo}`);i=i.children[K]}}applyRedirectCommands(e,t,r,i,s){if(typeof t!="string"){let c=t,{queryParams:u,fragment:d,routeConfig:p,url:m,outlet:w,params:b,data:P,title:N}=i,C=it(s,()=>c({params:b,data:P,queryParams:u,fragment:d,routeConfig:p,url:m,outlet:w,title:N}));if(C instanceof Ut)throw new gs(C);t=C}let a=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if(t[0]==="/")throw new gs(a);return a}applyRedirectCreateUrlTree(e,t,r,i){let s=this.createSegmentGroup(e,t.root,r,i);return new Ut(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,s])=>{if(typeof s=="string"&&s[0]===":"){let c=s.substring(1);r[i]=t[c]}else r[i]=s}),r}createSegmentGroup(e,t,r,i){let s=this.createSegments(e,t.segments,r,i),a={};return Object.entries(t.children).forEach(([c,u])=>{a[c]=this.createSegmentGroup(e,u,r,i)}),new ie(s,a)}createSegments(e,t,r,i){return t.map(s=>s.path[0]===":"?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new fe(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}},Td={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function tD(n,e,t,r,i){let s=nv(n,e,t);return s.matched?(r=TA(e,r),XA(r,e,t,i).pipe(W(a=>a===!0?s:V({},Td)))):$(s)}function nv(n,e,t){if(e.path==="**")return nD(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?V({},Td):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||JT)(t,n,e);if(!i)return V({},Td);let s={};Object.entries(i.posParams??{}).forEach(([c,u])=>{s[c]=u.path});let a=i.consumed.length>0?V(V({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:a,positionalParamSegments:i.posParams??{}}}function nD(n){return{matched:!0,parameters:n.length>0?xy(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function Ny(n,e,t,r){return t.length>0&&sD(n,t,r)?{segmentGroup:new ie(e,iD(r,new ie(t,n.children))),slicedSegments:[]}:t.length===0&&oD(n,t,r)?{segmentGroup:new ie(n.segments,rD(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new ie(n.segments,n.children),slicedSegments:t}}function rD(n,e,t,r){let i={};for(let s of t)if(Ra(n,e,s)&&!r[ct(s)]){let a=new ie([],{});i[ct(s)]=a}return V(V({},r),i)}function iD(n,e){let t={};t[K]=e;for(let r of n)if(r.path===""&&ct(r)!==K){let i=new ie([],{});t[ct(r)]=i}return t}function sD(n,e,t){return t.some(r=>Ra(n,e,r)&&ct(r)!==K)}function oD(n,e,t){return t.some(r=>Ra(n,e,r))}function Ra(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function aD(n,e,t){return e.length===0&&!n.children[t]}var Ad=class{};function cD(n,e,t,r,i,s,a="emptyOnly"){return new Dd(n,e,t,r,i,a,s).recognize()}var uD=31,Dd=class{constructor(e,t,r,i,s,a,c){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=a,this.urlSerializer=c,this.applyRedirects=new Id(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new fe(4002,`'${e.segmentGroup}'`)}recognize(){let e=Ny(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(W(({children:t,rootSnapshot:r})=>{let i=new ze(r,t),s=new Da("",i),a=mA(r,[],this.urlTree.queryParams,this.urlTree.fragment);return a.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(a),{state:s,tree:a}}))}match(e){let t=new Pr([],Object.freeze({}),Object.freeze(V({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),K,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,K,t).pipe(W(r=>({children:r,rootSnapshot:t})),Ke(r=>{if(r instanceof gs)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof ps?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,s){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,s):this.processSegment(e,t,r,r.segments,i,!0,s).pipe(W(a=>a instanceof ze?[a]:[]))}processChildren(e,t,r,i){let s=[];for(let a of Object.keys(r.children))a==="primary"?s.unshift(a):s.push(a);return Le(s).pipe(pn(a=>{let c=r.children[a],u=AA(t,a);return this.processSegmentGroup(e,u,c,a,i)}),gc((a,c)=>(a.push(...c),a)),fc(null),zf(),He(a=>{if(a===null)return Sr(r);let c=rv(a);return lD(c),$(c)}))}processSegment(e,t,r,i,s,a,c){return Le(t).pipe(pn(u=>this.processSegmentAgainstRoute(u._injector??e,t,u,r,i,s,a,c).pipe(Ke(d=>{if(d instanceof ps)return $(null);throw d}))),nt(u=>!!u),Ke(u=>{if(ev(u))return aD(r,i,s)?$(new Ad):Sr(r);throw u}))}processSegmentAgainstRoute(e,t,r,i,s,a,c,u){return ct(r)!==a&&(a===K||!Ra(i,s,r))?Sr(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,s,a,u):this.allowRedirects&&c?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,s,a,u):Sr(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,a,c){let{matched:u,parameters:d,consumedSegments:p,positionalParamSegments:m,remainingSegments:w}=nv(t,i,s);if(!u)return Sr(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>uD&&(this.allowRedirects=!1));let b=new Pr(s,d,Object.freeze(V({},this.urlTree.queryParams)),this.urlTree.fragment,Oy(i),ct(i),i.component??i._loadedComponent??null,i,ky(i)),P=Aa(b,c,this.paramsInheritanceStrategy);b.params=Object.freeze(P.params),b.data=Object.freeze(P.data);let N=this.applyRedirects.applyRedirectCommands(p,i.redirectTo,m,b,e);return this.applyRedirects.lineralizeSegments(i,N).pipe(He(C=>this.processSegment(e,r,t,C.concat(w),a,!1,c)))}matchSegmentAgainstRoute(e,t,r,i,s,a){let c=tD(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),c.pipe(Qe(u=>u.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(Qe(({routes:d})=>{let p=r._loadedInjector??e,{parameters:m,consumedSegments:w,remainingSegments:b}=u,P=new Pr(w,m,Object.freeze(V({},this.urlTree.queryParams)),this.urlTree.fragment,Oy(r),ct(r),r.component??r._loadedComponent??null,r,ky(r)),N=Aa(P,a,this.paramsInheritanceStrategy);P.params=Object.freeze(N.params),P.data=Object.freeze(N.data);let{segmentGroup:C,slicedSegments:U}=Ny(t,w,b,d);if(U.length===0&&C.hasChildren())return this.processChildren(p,d,C,P).pipe(W(L=>new ze(P,L)));if(d.length===0&&U.length===0)return $(new ze(P,[]));let z=ct(r)===s;return this.processSegment(p,d,C,U,z?K:s,!0,P).pipe(W(L=>new ze(P,L instanceof ze?[L]:[])))}))):Sr(t)))}getChildConfig(e,t,r){return t.children?$({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?$({routes:t._loadedRoutes,injector:t._loadedInjector}):JA(e,t,r,this.urlSerializer).pipe(He(i=>i?this.configLoader.loadChildren(e,t).pipe(ge(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):eD(t))):$({routes:[],injector:e})}};function lD(n){n.sort((e,t)=>e.value.outlet===K?-1:t.value.outlet===K?1:e.value.outlet.localeCompare(t.value.outlet))}function hD(n){let e=n.value.routeConfig;return e&&e.path===""}function rv(n){let e=[],t=new Set;for(let r of n){if(!hD(r)){e.push(r);continue}let i=e.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=rv(r.children);e.push(new ze(r.value,i))}return e.filter(r=>!t.has(r))}function Oy(n){return n.data||{}}function ky(n){return n.resolve||{}}function dD(n,e,t,r,i,s){return He(a=>cD(n,e,t,r,a.extractedUrl,i,s).pipe(W(({state:c,tree:u})=>_e(V({},a),{targetSnapshot:c,urlAfterRedirects:u}))))}function fD(n,e){return He(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return $(t);let s=new Set(i.map(u=>u.route)),a=new Set;for(let u of s)if(!a.has(u))for(let d of iv(u))a.add(d);let c=0;return Le(a).pipe(pn(u=>s.has(u)?pD(u,r,n,e):(u.data=Aa(u,u.parent,n).resolve,$(void 0))),ge(()=>c++),pc(1),He(u=>c===a.size?$(t):Gt))})}function iv(n){let e=n.children.map(t=>iv(t)).flat();return[n,...e]}function pD(n,e,t,r){let i=n.routeConfig,s=n._resolve;return i?.title!==void 0&&!Yy(i)&&(s[ms]=i.title),gD(s,n,e,r).pipe(W(a=>(n._resolvedData=a,n.data=Aa(n,n.parent,t).resolve,null)))}function gD(n,e,t,r){let i=td(n);if(i.length===0)return $({});let s={};return Le(i).pipe(He(a=>mD(n[a],e,t,r).pipe(nt(),ge(c=>{if(c instanceof fs)throw ba(new os,c);s[a]=c}))),pc(1),jf(s),Ke(a=>ev(a)?Gt:We(a)))}function mD(n,e,t,r){let i=ys(e)??r,s=Fr(n,i),a=s.resolve?s.resolve(e,t):it(i,()=>s(e,t));return cn(a)}function Zh(n){return Qe(e=>{let t=n(e);return t?Le(t).pipe(W(()=>e)):$(e)})}var sv=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===K);return r}getResolvedTitleForRoute(t){return t.data[ms]}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:()=>x(yD),providedIn:"root"})}}return n})(),yD=(()=>{class n extends sv{constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static{this.\u0275fac=function(r){return new(r||n)(Q(Fp))}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Pd=new se("",{providedIn:"root",factory:()=>({})}),vD=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=ut({type:n,selectors:[["ng-component"]],standalone:!0,features:[ft],decls:1,vars:0,template:function(r,i){r&1&&Ht(0,"router-outlet")},dependencies:[bA],encapsulation:2})}}return n})();function Nd(n){let e=n.children&&n.children.map(Nd),t=e?_e(V({},n),{children:e}):V({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==K&&(t.component=vD),t}var Od=new se(""),_D=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=x(Cc)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return $(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let r=cn(t.loadComponent()).pipe(W(ov),ge(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),Wt(()=>{this.componentLoaders.delete(t)})),i=new ac(r,()=>new fn).pipe(oc());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return $({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let s=wD(r,this.compiler,t,this.onLoadEndListener).pipe(Wt(()=>{this.childrenLoaders.delete(r)})),a=new ac(s,()=>new fn).pipe(oc());return this.childrenLoaders.set(r,a),a}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function wD(n,e,t,r){return cn(n.loadChildren()).pipe(W(ov),He(i=>i instanceof Zf||Array.isArray(i)?$(i):Le(e.compileModuleAsync(i))),W(i=>{r&&r(n);let s,a,c=!1;return Array.isArray(i)?(a=i,c=!0):(s=i.create(t).injector,a=s.get(Od,[],{optional:!0,self:!0}).flat()),{routes:a.map(Nd),injector:s}}))}function ED(n){return n&&typeof n=="object"&&"default"in n}function ov(n){return ED(n)?n.default:n}var kd=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:()=>x(ID),providedIn:"root"})}}return n})(),ID=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),TD=new se("");var AD=new se(""),DD=(()=>{class n{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new fn,this.transitionAbortSubject=new fn,this.configLoader=x(_D),this.environmentInjector=x(Wn),this.urlSerializer=x(Sd),this.rootContexts=x(Ca),this.location=x(oi),this.inputBindingEnabled=x(Rd,{optional:!0})!==null,this.titleStrategy=x(sv),this.options=x(Pd,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=x(kd),this.createViewTransition=x(TD,{optional:!0}),this.navigationErrorHandler=x(AD,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>$(void 0),this.rootComponentType=null;let t=i=>this.events.next(new ld(i)),r=i=>this.events.next(new hd(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;this.transitions?.next(_e(V(V({},this.transitions.value),t),{id:r}))}setupNavigations(t,r,i){return this.transitions=new Ge({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:is,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(bt(s=>s.id!==0),W(s=>_e(V({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),Qe(s=>{let a=!1,c=!1;return $(s).pipe(Qe(u=>{if(this.navigationId>s.id)return this.cancelNavigationTransition(s,"",qe.SupersededByNewNavigation),Gt;this.currentTransition=s,this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,targetBrowserUrl:typeof u.extras.browserUrl=="string"?this.urlSerializer.parse(u.extras.browserUrl):u.extras.browserUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?_e(V({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let d=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),p=u.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!d&&p!=="reload"){let m="";return this.events.next(new Bn(u.id,this.urlSerializer.serialize(u.rawUrl),m,sd.IgnoredSameUrlNavigation)),u.resolve(!1),Gt}if(this.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return $(u).pipe(Qe(m=>{let w=this.transitions?.getValue();return this.events.next(new us(m.id,this.urlSerializer.serialize(m.extractedUrl),m.source,m.restoredState)),w!==this.transitions?.getValue()?Gt:Promise.resolve(m)}),dD(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),ge(m=>{s.targetSnapshot=m.targetSnapshot,s.urlAfterRedirects=m.urlAfterRedirects,this.currentNavigation=_e(V({},this.currentNavigation),{finalUrl:m.urlAfterRedirects});let w=new Ea(m.id,this.urlSerializer.serialize(m.extractedUrl),this.urlSerializer.serialize(m.urlAfterRedirects),m.targetSnapshot);this.events.next(w)}));if(d&&this.urlHandlingStrategy.shouldProcessUrl(u.currentRawUrl)){let{id:m,extractedUrl:w,source:b,restoredState:P,extras:N}=u,C=new us(m,this.urlSerializer.serialize(w),b,P);this.events.next(C);let U=Ky(this.rootComponentType).snapshot;return this.currentTransition=s=_e(V({},u),{targetSnapshot:U,urlAfterRedirects:w,extras:_e(V({},N),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=w,$(s)}else{let m="";return this.events.next(new Bn(u.id,this.urlSerializer.serialize(u.extractedUrl),m,sd.IgnoredByUrlHandlingStrategy)),u.resolve(!1),Gt}}),ge(u=>{let d=new od(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}),W(u=>(this.currentTransition=s=_e(V({},u),{guards:OA(u.targetSnapshot,u.currentSnapshot,this.rootContexts)}),s)),zA(this.environmentInjector,u=>this.events.next(u)),ge(u=>{if(s.guardsResult=u.guardsResult,u.guardsResult&&typeof u.guardsResult!="boolean")throw ba(this.urlSerializer,u.guardsResult);let d=new ad(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.events.next(d)}),bt(u=>u.guardsResult?!0:(this.cancelNavigationTransition(u,"",qe.GuardRejected),!1)),Zh(u=>{if(u.guards.canActivateChecks.length)return $(u).pipe(ge(d=>{let p=new cd(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(p)}),Qe(d=>{let p=!1;return $(d).pipe(fD(this.paramsInheritanceStrategy,this.environmentInjector),ge({next:()=>p=!0,complete:()=>{p||this.cancelNavigationTransition(d,"",qe.NoDataFromResolver)}}))}),ge(d=>{let p=new ud(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(p)}))}),Zh(u=>{let d=p=>{let m=[];p.routeConfig?.loadComponent&&!p.routeConfig._loadedComponent&&m.push(this.configLoader.loadComponent(p.routeConfig).pipe(ge(w=>{p.component=w}),W(()=>{})));for(let w of p.children)m.push(...d(w));return m};return hc(d(u.targetSnapshot.root)).pipe(fc(null),Gn(1))}),Zh(()=>this.afterPreactivation()),Qe(()=>{let{currentSnapshot:u,targetSnapshot:d}=s,p=this.createViewTransition?.(this.environmentInjector,u.root,d.root);return p?Le(p).pipe(W(()=>s)):$(s)}),W(u=>{let d=SA(t.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return this.currentTransition=s=_e(V({},u),{targetRouterState:d}),this.currentNavigation.targetRouterState=d,s}),ge(()=>{this.events.next(new hs)}),NA(this.rootContexts,t.routeReuseStrategy,u=>this.events.next(u),this.inputBindingEnabled),Gn(1),ge({next:u=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Un(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects))),this.titleStrategy?.updateTitle(u.targetRouterState.snapshot),u.resolve(!0)},complete:()=>{a=!0}}),Gf(this.transitionAbortSubject.pipe(ge(u=>{throw u}))),Wt(()=>{!a&&!c&&this.cancelNavigationTransition(s,"",qe.SupersededByNewNavigation),this.currentTransition?.id===s.id&&(this.currentNavigation=null,this.currentTransition=null)}),Ke(u=>{if(c=!0,Zy(u))this.events.next(new Vt(s.id,this.urlSerializer.serialize(s.extractedUrl),u.message,u.cancellationCode)),PA(u)?this.events.next(new kr(u.url,u.navigationBehaviorOptions)):s.resolve(!1);else{let d=new ls(s.id,this.urlSerializer.serialize(s.extractedUrl),u,s.targetSnapshot??void 0);try{let p=it(this.environmentInjector,()=>this.navigationErrorHandler?.(d));if(p instanceof fs){let{message:m,cancellationCode:w}=ba(this.urlSerializer,p);this.events.next(new Vt(s.id,this.urlSerializer.serialize(s.extractedUrl),m,w)),this.events.next(new kr(p.redirectTo,p.navigationBehaviorOptions))}else{this.events.next(d);let m=t.errorHandler(u);s.resolve(!!m)}}catch(p){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(p)}}return Gt}))}))}cancelNavigationTransition(t,r,i){let s=new Vt(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(s),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function bD(n){return n!==is}var SD=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:()=>x(CD),providedIn:"root"})}}return n})(),bd=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},CD=(()=>{class n extends bd{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=wc(n)))(i||n)}})()}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),av=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:()=>x(RD),providedIn:"root"})}}return n})(),RD=(()=>{class n extends av{constructor(){super(...arguments),this.location=x(oi),this.urlSerializer=x(Sd),this.options=x(Pd,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=x(kd),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Ut,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=Ky(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&t(r.url,r.state)})}handleRouterEvent(t,r){if(t instanceof us)this.stateMemento=this.createStateMemento();else if(t instanceof Bn)this.rawUrlTree=r.initialUrl;else if(t instanceof Ea){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(r.targetBrowserUrl??i,r)}}else t instanceof hs?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(r.targetBrowserUrl??this.rawUrlTree,r)):t instanceof Vt&&(t.code===qe.GuardRejected||t.code===qe.NoDataFromResolver)?this.restoreHistory(r):t instanceof ls?this.restoreHistory(r,!0):t instanceof Un&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,r){let i=t instanceof Ut?this.urlSerializer.serialize(t):t;if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){let s=this.browserPageId,a=V(V({},r.extras.state),this.generateNgRouterState(r.id,s));this.location.replaceState(i,"",a)}else{let s=V(V({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(i,"",s)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,s=this.currentPageId-i;s!==0?this.location.historyGo(s):this.currentUrlTree===t.finalUrl&&s===0&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=wc(n)))(i||n)}})()}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),ns=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(ns||{});function PD(n,e){n.events.pipe(bt(t=>t instanceof Un||t instanceof Vt||t instanceof ls||t instanceof Bn),W(t=>t instanceof Un||t instanceof Bn?ns.COMPLETE:(t instanceof Vt?t.code===qe.Redirect||t.code===qe.SupersededByNewNavigation:!1)?ns.REDIRECTING:ns.FAILED),bt(t=>t!==ns.REDIRECTING),Gn(1)).subscribe(()=>{e()})}function ND(n){throw n}var OD={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},kD={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Pa=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=x(zs),this.stateManager=x(av),this.options=x(Pd,{optional:!0})||{},this.pendingTasks=x(Us),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=x(DD),this.urlSerializer=x(Sd),this.location=x(oi),this.urlHandlingStrategy=x(kd),this._events=new fn,this.errorHandler=this.options.errorHandler||ND,this.navigated=!1,this.routeReuseStrategy=x(SD),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=x(Od,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!x(Rd,{optional:!0}),this.eventsSubscription=new Ff,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(i!==null&&s!==null){if(this.stateManager.handleRouterEvent(r,s),r instanceof Vt&&r.code!==qe.Redirect&&r.code!==qe.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Un)this.navigated=!0;else if(r instanceof kr){let a=r.navigationBehaviorOptions,c=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),u=V({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||bD(i.source)},a);this.scheduleNavigation(c,is,null,u,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}xD(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),is,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",r)},0)})}navigateToSyncWithBrowser(t,r,i){let s={replaceUrl:!0},a=i?.navigationId?i:null;if(i){let u=V({},i);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(s.state=u)}let c=this.parseUrl(t);this.scheduleNavigation(c,r,a,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(Nd),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:s,fragment:a,queryParamsHandling:c,preserveFragment:u}=r,d=u?this.currentUrlTree.fragment:a,p=null;switch(c??this.options.defaultQueryParamsHandling){case"merge":p=V(V({},this.currentUrlTree.queryParams),s);break;case"preserve":p=this.currentUrlTree.queryParams;break;default:p=s||null}p!==null&&(p=this.removeEmptyProps(p));let m;try{let w=i?i.snapshot:this.routerState.snapshot.root;m=qy(w)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),m=this.currentUrlTree.root}return Gy(m,t,p,d??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=as(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,is,null,r)}navigate(t,r={skipLocationChange:!1}){return MD(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=V({},OD):r===!1?i=V({},kD):i=r,as(t))return Sy(this.currentUrlTree,t,i);let s=this.parseUrl(t);return Sy(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,s])=>(s!=null&&(r[i]=s),r),{})}scheduleNavigation(t,r,i,s,a){if(this.disposed)return Promise.resolve(!1);let c,u,d;a?(c=a.resolve,u=a.reject,d=a.promise):d=new Promise((m,w)=>{c=m,u=w});let p=this.pendingTasks.add();return PD(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(p))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:s,resolve:c,reject:u,promise:d,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),d.catch(m=>Promise.reject(m))}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function MD(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new fe(4008,!1)}function xD(n){return!(n instanceof hs)&&!(n instanceof kr)}var FD=new se("");function oO(n,...e){return rt([{provide:Od,multi:!0,useValue:n},[],{provide:Mr,useFactory:LD,deps:[Pa]},{provide:Sc,multi:!0,useFactory:VD},e.map(t=>t.\u0275providers)])}function LD(n){return n.routerState.root}function VD(){let n=x(gn);return e=>{let t=n.get(qs);if(e!==t.components[0])return;let r=n.get(Pa),i=n.get(UD);n.get(BD)===1&&r.initialNavigation(),n.get($D,null,yc.Optional)?.setUpPreloading(),n.get(FD,null,yc.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var UD=new se("",{factory:()=>new fn}),BD=new se("",{providedIn:"root",factory:()=>1});var $D=new se("");var jD=["*"],_s=class{},zD=(()=>{class n extends _s{constructor(t){super(),this.http=t}getSvg(t){return this.http.get(t,{responseType:"text"})}static{this.\u0275fac=function(r){return new(r||n)(Q(hi))}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac})}}return n})(),qD=new se("SERVER_URL"),Na=(()=>{class n{constructor(){this.loader=x(_s),this.serverUrl=x(qD,{optional:!0}),this.document=x(Pe),this.iconsByUrl=new Map,this.iconsLoadingByUrl=new Map}addSvg(t,r){if(!this.iconsByUrl.has(t)){let i=this.document.createElement("DIV");i.innerHTML=r;let s=i.querySelector("svg");this.iconsByUrl.set(t,s)}}loadSvg(t,r=t){if(this.serverUrl&&t.match(/^(http(s)?):/)===null&&(t=this.serverUrl+t,r=t),this.iconsByUrl.has(r))return $(this.iconsByUrl.get(r));if(this.iconsLoadingByUrl.has(r))return this.iconsLoadingByUrl.get(r);let i=this.loader.getSvg(t).pipe(W(s=>{let a=this.document.createElement("DIV");return a.innerHTML=s,a.querySelector("svg")}),ge(s=>this.iconsByUrl.set(r,s)),Ke(s=>(console.error(s),We(s))),Wt(()=>this.iconsLoadingByUrl.delete(r)),qf());return this.iconsLoadingByUrl.set(r,i),i}getSvgByName(t){return this.iconsByUrl.has(t)?$(this.iconsByUrl.get(t)):this.iconsLoadingByUrl.has(t)?this.iconsLoadingByUrl.get(t):We(`No svg with name '${t}' has been loaded`)}unloadSvg(t){this.iconsByUrl.has(t)&&this.iconsByUrl.delete(t)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac})}}return n})();function GD(n){return n||new Na}var WD={provide:Na,deps:[[new Ye,new vc,Na]],useFactory:GD},Oa=class{constructor(){this.loaded=!1}},cv=(()=>{class n{constructor(){this.element=x(Hn),this.differs=x(Rc),this.renderer=x(Yn),this.iconReg=x(Na),this.src=lt(),this.name=lt(),this.stretch=lt(!1),this.applyClass=lt(!1),this.svgClass=lt(),this.klass=lt(void 0,{alias:"class"}),this.viewBox=lt(),this.svgAriaLabel=lt(),this.svg=Xf(0),this.svgStyle=lt(),this.helper=new Oa,Ct(()=>{(this.src()||this.name())&&(this.destroy(),this.init(this.src(),this.name()))},{allowSignalWrites:!0}),Ct(()=>{let i=this.viewBox();this.svg()&&this.updateViewBox(i)}),Ct(()=>{let i=this.svgStyle()||{};this.svg()&&this.applyChanges(this.helper.differ.diff(i))}),Ct(()=>{let i=this.svg();this.applyClass()?this.setClass(this.elemSvg,null,this.klass()):this.setClass(this.elemSvg,this.klass(),null)});let t;Ct(()=>{let i=this.svg();this.setClass(this.elemSvg,t,this.svgClass()),t=this.svgClass()});let r;Ct(()=>{let i=this.svg(),s=this.element.nativeElement;this.setClass(s,r,this.klass()),this.setClass(this.elemSvg,r,this.applyClass()?this.klass():null),r=this.klass()}),Ct(()=>{let i=this.svg();this.doAria(this.svgAriaLabel())}),Ct(()=>{let i=this.svg();this.stylize(this.stretch())})}ngOnDestroy(){this.destroy()}get elemSvg(){return this.element.nativeElement.firstChild}init(t,r){if(t&&r){let i=this.iconReg.loadSvg(t,r);i&&(this.helper.icnSub=i.subscribe(s=>this.initSvg(s)))}else if(r){let i=this.iconReg.getSvgByName(r);i&&(this.helper.icnSub=i.subscribe(s=>this.initSvg(s)))}else if(t){let i=this.iconReg.loadSvg(t);i&&(this.helper.icnSub=i.subscribe(s=>this.initSvg(s)))}else this.element.nativeElement.innerHTML="",this.svg.set(0)}initSvg(t){!this.helper.loaded&&t&&this.setSvg(t)}destroy(){this.helper.icnSub?.unsubscribe(),this.helper=new Oa,this.helper.differ=this.differs.find({}).create()}setSvg(t){if(!this.helper.loaded&&t){this.helper.svg=t;let r=t.cloneNode(!0),i=this.element.nativeElement;i.innerHTML="",this.renderer.appendChild(i,r),this.helper.loaded=!0,this.copyNgContentAttribute(i,r),this.svg.update(s=>s+1)}}updateViewBox(t){if(t){let r=this.elemSvg;if(t==="auto"){let i=r.getAttribute("width"),s=r.getAttribute("height");if(s&&i){let a=`0 0 ${i} ${s}`;this.renderer.setAttribute(r,"viewBox",a),this.renderer.removeAttribute(r,"width"),this.renderer.removeAttribute(r,"height")}}else t!==""&&(this.renderer.setAttribute(r,"viewBox",t),this.renderer.removeAttribute(r,"width"),this.renderer.removeAttribute(r,"height"))}}copyNgContentAttribute(t,r){let i=t.attributes,s=i.length;for(let a=0;a<s;a+=1){let c=i.item(a);if(c&&c.name.startsWith("_ngcontent")){this.setNgContentAttribute(r,c.name);break}}}setNgContentAttribute(t,r){this.renderer.setAttribute(t,r,"");let i=t.childNodes.length;for(let s=0;s<i;s+=1){let a=t.childNodes[s];a instanceof Element&&this.setNgContentAttribute(a,r)}}stylize(t){if(this.helper.svg){let r=this.element.nativeElement.firstChild;t===!0?this.renderer.setAttribute(r,"preserveAspectRatio","none"):t===!1&&this.renderer.removeAttribute(r,"preserveAspectRatio")}}applyChanges(t){t&&(t.forEachRemovedItem(r=>this.setStyle(r.key,null)),t.forEachAddedItem(r=>this.setStyle(r.key,r.currentValue)),t.forEachChangedItem(r=>this.setStyle(r.key,r.currentValue)))}setStyle(t,r){let[i,s]=t.split(".");r=r!==null&&s?`${r}${s}`:r;let a=this.elemSvg;r!==null?this.renderer.setStyle(a,i,r):this.renderer.removeStyle(a,i)}setClass(t,r,i){if(t){if(r){let s=(Array.isArray(r)?r:r.split(" ")).filter(a=>a);for(let a of s)this.renderer.removeClass(t,a)}if(i){let s=(Array.isArray(i)?i:i.split(" ")).filter(a=>a);for(let a of s)this.renderer.addClass(t,a)}}}doAria(t){if(t!==void 0){let r=this.element.nativeElement.firstChild;r&&!r.hasAttribute("aria-label")&&(t===""?(this.renderer.setAttribute(r,"aria-hidden","true"),this.renderer.removeAttribute(r,"aria-label")):(this.renderer.removeAttribute(r,"aria-hidden"),this.renderer.setAttribute(r,"aria-label",t)))}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=ut({type:n,selectors:[["svg-icon"]],inputs:{src:[1,"src"],name:[1,"name"],stretch:[1,"stretch"],applyClass:[1,"applyClass"],svgClass:[1,"svgClass"],klass:[1,"class","klass"],viewBox:[1,"viewBox"],svgAriaLabel:[1,"svgAriaLabel"],svgStyle:[1,"svgStyle"]},standalone:!0,features:[ft],ngContentSelectors:jD,decls:1,vars:0,template:function(r,i){r&1&&($s(),js(0))},encapsulation:2,changeDetection:0})}}return n})();function yO(n={}){return rt([WD,n.loader||{provide:_s,useClass:zD}])}var HD=()=>({"width.px":14,"height.px":14}),uv=class n{router=x(Pa);item;navigate(){return D(this,null,function*(){yield this.router.navigate([this.item.route])})}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=ut({type:n,selectors:[["app-bottom-nav"]],inputs:{item:"item"},standalone:!0,features:[ft],decls:6,vars:4,consts:[["tabindex","0",1,"bottom-nav",3,"click","keydown.enter"],["src","assets/svg/up.svg",3,"svgStyle"],[1,"nav-button"],[1,"nav-info"]],template:function(t,r){t&1&&(dt(0,"div",0),Dc("click",function(){return r.navigate()})("keydown.enter",function(){return r.navigate()}),Ht(1,"svg-icon",1),dt(2,"p",2),Jn(3),St(),dt(4,"span",3),Jn(5),St()()),t&2&&(Qn(),np("svgStyle",op(3,HD)),Qn(2),ri(r.item.label),Qn(2),ri(r.item.info))},dependencies:[cv],styles:[".bottom-nav[_ngcontent-%COMP%]{position:fixed;bottom:0;left:50%;transform:translate(-50%);width:33%;height:64px;padding:12px 0;cursor:pointer;border:1px solid #133167;border-radius:6px 6px 0 0;border-bottom:none;background-color:#fff;display:flex;flex-direction:column;align-items:center;justify-content:center}.bottom-nav[_ngcontent-%COMP%]   .nav-button[_ngcontent-%COMP%]{font-size:14px;font-weight:600}.bottom-nav[_ngcontent-%COMP%]   .nav-info[_ngcontent-%COMP%]{font-size:12px;font-weight:400}"]})};var ka=class n{size="sm";theme="light";get loadingClass(){let e="la-ball-grid-pulse";return e+=this.size?` la-${this.size}`:"",e+=this.theme==="dark"?" la-dark":"",e}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=ut({type:n,selectors:[["app-loading"]],inputs:{size:"size",theme:"theme"},standalone:!0,features:[ft],decls:10,vars:2,template:function(t,r){t&1&&(dt(0,"div"),Ht(1,"div")(2,"div")(3,"div")(4,"div")(5,"div")(6,"div")(7,"div")(8,"div")(9,"div"),St()),t&2&&rp(r.loadingClass)},styles:[`.la-ball-grid-pulse[_ngcontent-%COMP%], .la-ball-grid-pulse[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{position:relative;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}.la-ball-grid-pulse[_ngcontent-%COMP%]{display:block;font-size:0;color:#fff}.la-ball-grid-pulse.la-dark[_ngcontent-%COMP%]{color:#333}.la-ball-grid-pulse[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:inline-block;float:none;background-color:currentColor;border:0 solid currentColor}.la-ball-grid-pulse[_ngcontent-%COMP%]{width:36px;height:36px}.la-ball-grid-pulse[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{width:8px;height:8px;margin:2px;border-radius:100%;-webkit-animation-name:_ngcontent-%COMP%_ball-grid-pulse;-moz-animation-name:ball-grid-pulse;-o-animation-name:ball-grid-pulse;animation-name:_ngcontent-%COMP%_ball-grid-pulse;-webkit-animation-iteration-count:infinite;-moz-animation-iteration-count:infinite;-o-animation-iteration-count:infinite;animation-iteration-count:infinite}.la-ball-grid-pulse[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(1){-webkit-animation-duration:.65s;-moz-animation-duration:.65s;-o-animation-duration:.65s;animation-duration:.65s;-webkit-animation-delay:.03s;-moz-animation-delay:.03s;-o-animation-delay:.03s;animation-delay:.03s}.la-ball-grid-pulse[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2){-webkit-animation-duration:1.02s;-moz-animation-duration:1.02s;-o-animation-duration:1.02s;animation-duration:1.02s;-webkit-animation-delay:.09s;-moz-animation-delay:.09s;-o-animation-delay:.09s;animation-delay:.09s}.la-ball-grid-pulse[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(3){-webkit-animation-duration:1.06s;-moz-animation-duration:1.06s;-o-animation-duration:1.06s;animation-duration:1.06s;-webkit-animation-delay:-.69s;-moz-animation-delay:-.69s;-o-animation-delay:-.69s;animation-delay:-.69s}.la-ball-grid-pulse[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(4){-webkit-animation-duration:1.5s;-moz-animation-duration:1.5s;-o-animation-duration:1.5s;animation-duration:1.5s;-webkit-animation-delay:-.41s;-moz-animation-delay:-.41s;-o-animation-delay:-.41s;animation-delay:-.41s}.la-ball-grid-pulse[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(5){-webkit-animation-duration:1.6s;-moz-animation-duration:1.6s;-o-animation-duration:1.6s;animation-duration:1.6s;-webkit-animation-delay:.04s;-moz-animation-delay:.04s;-o-animation-delay:.04s;animation-delay:.04s}.la-ball-grid-pulse[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(6){-webkit-animation-duration:.84s;-moz-animation-duration:.84s;-o-animation-duration:.84s;animation-duration:.84s;-webkit-animation-delay:.07s;-moz-animation-delay:.07s;-o-animation-delay:.07s;animation-delay:.07s}.la-ball-grid-pulse[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(7){-webkit-animation-duration:.68s;-moz-animation-duration:.68s;-o-animation-duration:.68s;animation-duration:.68s;-webkit-animation-delay:-.66s;-moz-animation-delay:-.66s;-o-animation-delay:-.66s;animation-delay:-.66s}.la-ball-grid-pulse[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(8){-webkit-animation-duration:.93s;-moz-animation-duration:.93s;-o-animation-duration:.93s;animation-duration:.93s;-webkit-animation-delay:-.76s;-moz-animation-delay:-.76s;-o-animation-delay:-.76s;animation-delay:-.76s}.la-ball-grid-pulse[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(9){-webkit-animation-duration:1.24s;-moz-animation-duration:1.24s;-o-animation-duration:1.24s;animation-duration:1.24s;-webkit-animation-delay:-.76s;-moz-animation-delay:-.76s;-o-animation-delay:-.76s;animation-delay:-.76s}.la-ball-grid-pulse.la-sm[_ngcontent-%COMP%]{width:18px;height:18px}.la-ball-grid-pulse.la-sm[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{width:4px;height:4px;margin:1px}.la-ball-grid-pulse.la-2x[_ngcontent-%COMP%]{width:72px;height:72px}.la-ball-grid-pulse.la-2x[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{width:16px;height:16px;margin:4px}.la-ball-grid-pulse.la-3x[_ngcontent-%COMP%]{width:108px;height:108px}.la-ball-grid-pulse.la-3x[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{width:24px;height:24px;margin:6px}@-webkit-keyframes _ngcontent-%COMP%_ball-grid-pulse{0%{opacity:1;-webkit-transform:scale(1);transform:scale(1)}50%{opacity:.35;-webkit-transform:scale(.45);transform:scale(.45)}to{opacity:1;-webkit-transform:scale(1);transform:scale(1)}}@-moz-keyframes ball-grid-pulse{0%{opacity:1;-moz-transform:scale(1);transform:scale(1)}50%{opacity:.35;-moz-transform:scale(.45);transform:scale(.45)}to{opacity:1;-moz-transform:scale(1);transform:scale(1)}}@-o-keyframes ball-grid-pulse{0%{opacity:1;-o-transform:scale(1);transform:scale(1)}50%{opacity:.35;-o-transform:scale(.45);transform:scale(.45)}to{opacity:1;-o-transform:scale(1);transform:scale(1)}}@keyframes _ngcontent-%COMP%_ball-grid-pulse{0%{opacity:1;-webkit-transform:scale(1);-moz-transform:scale(1);-o-transform:scale(1);transform:scale(1)}50%{opacity:.35;-webkit-transform:scale(.45);-moz-transform:scale(.45);-o-transform:scale(.45);transform:scale(.45)}to{opacity:1;-webkit-transform:scale(1);-moz-transform:scale(1);-o-transform:scale(1);transform:scale(1)}}





`]})};var KD=["*"];function QD(n,e){n&1&&(dt(0,"div",0),Ht(1,"app-loading",2),St())}function YD(n,e){if(n&1&&(dt(0,"div",1)(1,"h1"),Jn(2,"Une erreur est survenue."),St(),dt(3,"p"),Jn(4),St()()),n&2){let t=sp();Qn(4),ri(t.error)}}function JD(n,e){n&1&&js(0)}var hv=class n{loading;error;static \u0275fac=function(t){return new(t||n)};static \u0275cmp=ut({type:n,selectors:[["app-state-wrapper"]],inputs:{loading:"loading",error:"error"},standalone:!0,features:[ft],ngContentSelectors:KD,decls:3,vars:1,consts:[[1,"loading-container"],[1,"error-container"],["size","2x","theme","dark",1,"loading"]],template:function(t,r){t&1&&($s(),tp(0,QD,2,0,"div",0)(1,YD,5,1,"div",1)(2,JD,1,0)),t&2&&ip(r.loading?0:r.error?1:2)},dependencies:[ka],styles:[".loading-container[_ngcontent-%COMP%], .error-container[_ngcontent-%COMP%]{height:80vh;display:flex;justify-content:center;align-items:center}.loading-container[_ngcontent-%COMP%]   .loading[_ngcontent-%COMP%]{display:block;margin:0 auto}.error-container[_ngcontent-%COMP%]{flex-direction:column;color:#ff4d4f}.error-container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.5rem;margin-bottom:.5rem}.error-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem}"]})};export{Sb as a,Cb as b,jb as c,wS as d,bA as e,oO as f,cC as g,uC as h,lN as i,hN as j,cv as k,yO as l,by as m,uv as n,hv as o};
