import{a as L,c as j,d as z,e as B,f as H,g as R,h as K,i as X,j as J,k as W,l as Z}from"./chunk-7UWTTQ75.js";import{Ca as v,Da as m,Fa as _,Ia as o,Ja as a,Ka as l,La as E,Ma as d,Na as f,Oa as N,Pa as T,Qa as F,Ra as g,Sa as h,Ua as s,Va as A,W as D,Z as c,c as w,fa as I,fb as U,ga as k,ka as u,ta as C,va as r}from"./chunk-CKQT6GPN.js";var Q=["*"],b=class t{clicked=new u;onClick(n){this.clicked.emit(n)}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=c({type:t,selectors:[["app-button"]],outputs:{clicked:"clicked"},standalone:!0,features:[s],ngContentSelectors:Q,decls:2,vars:0,consts:[[1,"button",3,"click"]],template:function(e,i){e&1&&(N(),o(0,"button",0),d("click",function(V){return i.onClick(V)}),T(1),a())},styles:[".button[_ngcontent-%COMP%]{background-color:#133167;color:#fff;border:none;padding:6px 12px;border-radius:4px;transition:background-color .3s ease;cursor:pointer}.button[_ngcontent-%COMP%]:hover{background-color:#0f254e}"]})};var Y=t=>({hidden:t});function ee(t,n){t&1&&l(0,"div",1)}var M=class t{label;imageUrl;vote=new u;isImageLoaded=!1;onVote(n){n.stopPropagation(),this.vote.emit()}onImageLoad(){this.isImageLoaded=!0}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=c({type:t,selectors:[["app-voting-card"]],inputs:{label:"label",imageUrl:"imageUrl"},outputs:{vote:"vote"},standalone:!0,features:[s],decls:7,vars:7,consts:[[1,"vote-card"],[1,"skeleton-loader"],[1,"vote-card-image",3,"load","ngClass","src","alt"],[1,"vote-card-label"],[3,"clicked"]],template:function(e,i){e&1&&(o(0,"div",0),v(1,ee,1,0,"div",1),o(2,"img",2),d("load",function(){return i.onImageLoad()}),a(),o(3,"span",3),g(4),a(),o(5,"app-button",4),d("clicked",function(V){return i.onVote(V)}),g(6,"Vote"),a()()),e&2&&(r(),_(i.isImageLoaded?-1:1),r(),F("alt",i.label),m("ngClass",A(5,Y,!i.isImageLoaded))("src",i.imageUrl,C),r(2),h(i.label))},dependencies:[L,b],styles:[".vote-card[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:12px}.vote-card[_ngcontent-%COMP%]   .vote-card-image[_ngcontent-%COMP%]{width:200px;aspect-ratio:1;object-fit:cover;border-radius:8px;border:1px solid #133167;padding:4px}.vote-card[_ngcontent-%COMP%]   .vote-card-image.hidden[_ngcontent-%COMP%]{display:none}.vote-card[_ngcontent-%COMP%]   .skeleton-loader[_ngcontent-%COMP%]{width:200px;aspect-ratio:1;border-radius:8px;background-color:#f7f7f7;animation:_ngcontent-%COMP%_pulse 1.5s infinite}@keyframes _ngcontent-%COMP%_pulse{0%{opacity:1}50%{opacity:.5}to{opacity:1}}.vote-card[_ngcontent-%COMP%]   .vote-card-label[_ngcontent-%COMP%]{font-size:14px;font-weight:700;color:#0f254e}"]})};function te(t,n){t&1&&(o(0,"p"),g(1,"Loading cats..."),a())}function ne(t,n){if(t&1&&(o(0,"p",2),g(1),a()),t&2){let e=f();r(),h(e.error)}}function oe(t,n){if(t&1){let e=E();o(0,"app-voting-card",3),d("vote",function(){I(e);let p=f();return k(p.onVote({winner:p.cat1,loser:p.cat2}))}),a(),o(1,"app-voting-card",3),d("vote",function(){I(e);let p=f();return k(p.onVote({winner:p.cat2,loser:p.cat1}))}),a(),l(2,"app-bottom-nav",4)}if(t&2){let e=f();m("imageUrl",e.cat1.imageUrl)("label",e.cat1.id),r(),m("imageUrl",e.cat2.imageUrl)("label",e.cat2.id),r(),m("item",e.navItem)}}var y=class t{catService=D(W);cat1;cat2;loading=!1;error=null;navItem={route:"/ranking",label:"Voir le classement",info:"X parties jou\xE9es"};ngOnInit(){this.loadNewOpponents()}loadNewOpponents(){this.loading=!0,this.error=null,this.catService.selectCatOpponents$().subscribe({next:([n,e])=>{this.cat1=n,this.cat2=e,this.loading=!1},error:n=>{this.loading=!1,n instanceof Error?this.error=n.message:this.error="An unexpected error occurred. Please try again later."}})}onVote(n){return w(this,null,function*(){try{yield this.catService.recordVote(n),this.loadNewOpponents()}catch(e){e instanceof Error&&(this.error=e.message)}})}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=c({type:t,selectors:[["app-voting-page"]],standalone:!0,features:[s],decls:5,vars:1,consts:[[1,"page-container"],[1,"page-content","content"],[1,"error-message"],[3,"vote","imageUrl","label"],[3,"item"]],template:function(e,i){e&1&&(o(0,"section",0)(1,"div",1),v(2,te,2,0,"p")(3,ne,2,1,"p",2)(4,oe,3,5),a()()),e&2&&(r(2),_(i.loading?2:i.error?3:4))},dependencies:[M,Z],styles:[".content[_ngcontent-%COMP%]{display:flex}.content[_ngcontent-%COMP%]   app-voting-card[_ngcontent-%COMP%]{flex:1;display:flex;justify-content:center;align-items:center}.content[_ngcontent-%COMP%]   app-voting-card[_ngcontent-%COMP%]:first-child{border-right:1px dashed #133167}"]})};var $=[{path:"",pathMatch:"full",redirectTo:"voting"},{path:"voting",component:y},{path:"ranking",loadComponent:()=>import("./chunk-ZERUP2BF.js").then(t=>t.RankingPageComponent)},{path:"**",loadComponent:()=>import("./chunk-ZSUCE6DC.js").then(t=>t.NotFoundPageComponent)}];var q={production:!0,firebase:{apiKey:"AIzaSyDc1PksS7zr0DX9xMmdJpCKSK6uxnfWOrc",authDomain:"catmash-37c0c.firebaseapp.com",projectId:"catmash-37c0c",storageBucket:"catmash-37c0c.firebasestorage.app",messagingSenderId:"457408874219",appId:"1:457408874219:web:2964f6270a8980d153e0ae"}};var G={providers:[U({eventCoalescing:!0}),H($),j(),R(()=>K(q.firebase)),X(()=>J())]};var O=class t{brandLogo="assets/img/cat_brand.png";static \u0275fac=function(e){return new(e||t)};static \u0275cmp=c({type:t,selectors:[["app-header"]],standalone:!0,features:[s],decls:5,vars:1,consts:[[1,"header"],[1,"header-brand"],["alt","CatMash Logo",1,"header-logo",3,"src"],[1,"header-title"]],template:function(e,i){e&1&&(o(0,"header",0)(1,"div",1),l(2,"img",2),o(3,"span",3),g(4,"CATMASH"),a()()()),e&2&&(r(2),m("src",i.brandLogo,C))},styles:[".header[_ngcontent-%COMP%]{height:70px;display:flex;justify-content:center;align-items:center}.header[_ngcontent-%COMP%]   .header-brand[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:4px;font-size:12px;font-weight:700}.header[_ngcontent-%COMP%]   .header-brand[_ngcontent-%COMP%]   .header-logo[_ngcontent-%COMP%]{width:40px}"]})};var S=class t{static \u0275fac=function(e){return new(e||t)};static \u0275cmp=c({type:t,selectors:[["app-root"]],standalone:!0,features:[s],decls:4,vars:0,consts:[[1,"app-root"],[1,"app-container"]],template:function(e,i){e&1&&(o(0,"div",0),l(1,"app-header"),o(2,"div",1),l(3,"router-outlet"),a()())},dependencies:[O,B],styles:[".app-root[_ngcontent-%COMP%]{min-height:100vh;display:flex;flex-direction:column}.app-root[_ngcontent-%COMP%]   .app-header[_ngcontent-%COMP%]{height:70px}.app-root[_ngcontent-%COMP%]   .app-container[_ngcontent-%COMP%]{min-height:calc(100vh - 70px)}"]})};z(S,G).catch(t=>console.error(t));
